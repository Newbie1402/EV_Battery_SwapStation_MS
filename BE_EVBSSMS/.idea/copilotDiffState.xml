<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/ARCHITECTURE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/ARCHITECTURE.md" />
              <option name="originalContent" value="# ️ Kiến trúc Microservice - EV Battery Swap Station Management System&#10;&#10;##  Tổng quan&#10;&#10;Hệ thống được tổ chức thành **5 service chính** theo domain-driven design, mỗi service chịu trách nhiệm cho một nhóm chức năng nghiệp vụ cụ thể.&#10;&#10;##  5 Service Chính&#10;&#10;### 1. **auth-user** (Port 9001)&#10;**Gộp từ:** `auth-user` + `admin`&#10;&#10;**Chức năng:**&#10;- ✅ Đăng ký/đăng nhập (EV Driver, Staff, Admin)&#10;- ✅ Quản lý profile và thông tin cá nhân&#10;- ✅ Quản lý phương tiện của người dùng&#10;- ✅ Phân quyền (roles &amp; permissions)&#10;- ✅ Quản lý nhân viên&#10;- ✅ Xử lý khiếu nại/khiếu kiện liên quan đến tài khoản&#10;&#10;**Database:** `authdb` (PostgreSQL - Port 5433)&#10;&#10;---&#10;&#10;### 2. **station** (Port 9002)&#10;**Gộp từ:** `station-inventory` + `geo-routing`&#10;&#10;**Chức năng:**&#10;- ✅ Quản lý trạm đổi pin&#10;- ✅ Quản lý slot (ngăn chứa pin)&#10;- ✅ Quản lý pin (model, dung lượng, SoH - State of Health)&#10;- ✅ Theo dõi tồn kho pin (đầy, đang sạc, bảo dưỡng, lỗi)&#10;- ✅ Tìm kiếm trạm gần nhất (Geolocation)&#10;- ✅ Gợi ý lộ trình (Routing)&#10;&#10;**Database:** `stationdb` (PostgreSQL - Port 5434)&#10;&#10;---&#10;&#10;### 3. **booking** (Port 9003)&#10;**Gộp từ:** `booking-swap` + `support-feedback` + `notification`&#10;&#10;**Chức năng:**&#10;- ✅ Đặt lịch trước để đổi pin&#10;- ✅ Giữ chỗ pin&#10;- ✅ Xử lý giao dịch đổi pin tại trạm&#10;- ✅ Xác nhận giao dịch&#10;- ✅ Quản lý support ticket&#10;- ✅ Đánh giá (rating) dịch vụ trạm&#10;- ✅ Gửi thông báo (email, SMS, push notification)&#10;&#10;**Database:** `bookingdb` (PostgreSQL - Port 5435)&#10;&#10;**Tích hợp:** Kafka, MailHog&#10;&#10;---&#10;&#10;### 4. **billing** (Port 9004)&#10;**Gộp từ:** `billing-payment` + `analytics`&#10;&#10;**Chức năng:**&#10;- ✅ Quản lý gói thuê bao&#10;- ✅ Xử lý thanh toán (tích hợp payment gateway)&#10;- ✅ Tạo và quản lý hóa đơn&#10;- ✅ Báo cáo doanh thu&#10;- ✅ Thống kê số lượt đổi pin&#10;- ✅ Phân tích tần suất sử dụng, giờ cao điểm&#10;- ✅ AI dự báo nhu cầu sử dụng trạm&#10;&#10;**Database:** `billingdb` (PostgreSQL - Port 5436)&#10;&#10;**Tích hợp:** Kafka&#10;&#10;---&#10;&#10;### 5. **gateway** (Port 9000)&#10;**Service:** `api-gateway`&#10;&#10;**Chức năng:**&#10;- ✅ Điểm vào (entry point) duy nhất cho client&#10;- ✅ Định tuyến (routing) request đến service tương ứng&#10;- ✅ Xác thực token (JWT)&#10;- ✅ Rate limiting&#10;- ✅ Monitoring và logging&#10;&#10;**Không có database riêng**&#10;&#10;---&#10;&#10;## ️ Hạ tầng hỗ trợ&#10;&#10;### Eureka Server (Port 8761)&#10;- Service Discovery &amp; Registration&#10;- Health check cho các microservice&#10;&#10;### Kafka + Zookeeper&#10;- Message broker cho event-driven architecture&#10;- Kafka: Port 9092&#10;- Zookeeper: Port 2181&#10;&#10;### MailHog&#10;- SMTP server cho môi trường development&#10;- Web UI: Port 8025&#10;- SMTP: Port 1025&#10;&#10;---&#10;&#10;## ️ Sơ đồ kiến trúc&#10;&#10;```&#10;                        ┌─────────────────┐&#10;                        │   Client Apps   │&#10;                        │  (Web/Mobile)   │&#10;                        └────────┬────────┘&#10;                                 │&#10;                        ┌────────▼────────┐&#10;                        │   API Gateway   │ :9000&#10;                        │  (Routing, JWT) │&#10;                        └────────┬────────┘&#10;                                 │&#10;        ┌────────────────────────┼────────────────────────┐&#10;        │                        │                        │&#10;┌───────▼────────┐    ┌─────────▼──────────┐    ┌───────▼────────┐&#10;│  auth-user     │    │     station        │    │    booking     │&#10;│  :9001         │    │     :9002          │    │    :9003       │&#10;│                │    │                    │    │                │&#10;│ • Auth         │    │ • Stations         │    │ • Bookings     │&#10;│ • Profile      │    │ • Batteries        │    │ • Swaps        │&#10;│ • Permissions  │    │ • Geo/Routing      │    │ • Support      │&#10;│ • Admin        │    │ • Inventory        │    │ • Notification │&#10;└───────┬────────┘    └─────────┬──────────┘    └───────┬────────┘&#10;        │                       │                        │&#10;┌───────▼────────┐    ┌─────────▼──────────┐           │&#10;│   authdb       │    │    stationdb       │           │&#10;│   :5433        │    │    :5434           │           │&#10;└────────────────┘    └────────────────────┘           │&#10;                                                        │&#10;        ┌───────────────────────────────────────────────┤&#10;        │                                               │&#10;┌───────▼────────┐                            ┌────────▼─────────┐&#10;│    billing     │                            │    bookingdb     │&#10;│    :9004       │                            │    :5435         │&#10;│                │                            └──────────────────┘&#10;│ • Payments     │&#10;│ • Invoices     │              ┌─────────────────┐&#10;│ • Analytics    │◄─────────────┤ Kafka + Zookeeper│&#10;│ • AI Forecast  │              │ :9092 / :2181   │&#10;└───────┬────────┘              └─────────────────┘&#10;        │&#10;┌───────▼────────┐              ┌─────────────────┐&#10;│   billingdb    │              │    MailHog      │&#10;│   :5436        │              │  :8025 / :1025  │&#10;└────────────────┘              └─────────────────┘&#10;&#10;        ┌──────────────────────────┐&#10;        │   Eureka Server :8761    │&#10;        │  (Service Discovery)     │&#10;        └──────────────────────────┘&#10;```&#10;&#10;---&#10;&#10;##  Cách sử dụng&#10;&#10;### 1. Chuẩn bị môi trường&#10;&#10;Tạo file `.env` từ `.env.example`:&#10;```bash&#10;cp .env.example .env&#10;```&#10;&#10;&#10;### 2. Build tất cả service&#10;&#10;```bash&#10;# Windows&#10;build-all.bat&#10;&#10;# Linux/Mac&#10;chmod +x build-all.sh&#10;./build-all.sh&#10;```&#10;&#10;### 3. Khởi động hệ thống&#10;&#10;```bash&#10;# Khởi động tất cả services&#10;docker-compose up -d&#10;&#10;# Xem logs&#10;docker-compose logs -f&#10;&#10;# Xem logs của 1 service cụ thể&#10;docker-compose logs -f auth-user&#10;```&#10;&#10;### 4. Kiểm tra trạng thái&#10;&#10;- **Eureka Dashboard**: http://localhost:8761&#10;- **API Gateway**: http://localhost:9000&#10;- **Auth-User Service**: http://localhost:9001&#10;- **Station Service**: http://localhost:9002&#10;- **Booking Service**: http://localhost:9003&#10;- **Billing Service**: http://localhost:9004&#10;- **MailHog UI**: http://localhost:8025&#10;&#10;### 5. Dừng hệ thống&#10;&#10;```bash&#10;# Dừng tất cả&#10;docker-compose down&#10;&#10;# Dừng và xóa volumes (dữ liệu database)&#10;docker-compose down -v&#10;```&#10;&#10;" />
              <option name="updatedContent" value="# ️ Kiến trúc Microservice - EV Battery Swap Station Management System&#10;&#10;##  Tổng quan&#10;&#10;Hệ thống được tổ chức thành **5 service chính** theo domain-driven design, mỗi service chịu trách nhiệm cho một nhóm chức năng nghiệp vụ cụ thể.&#10;&#10;##  Kiến trúc tổng thể&#10;&#10;```&#10;Client (Browser/Mobile App)&#10;    ↓&#10;Nginx:80 (Reverse Proxy)&#10;    ├─ Rate Limiting&#10;    ├─ SSL/TLS Termination&#10;    ├─ Compression&#10;    └─ Load Balancing&#10;    ↓&#10;API Gateway:8080 (Entry Point)&#10;    ├─ Routing&#10;    ├─ Authentication&#10;    └─ Service Discovery&#10;    ↓&#10;┌─────────────┬─────────────┬─────────────┬─────────────┐&#10;│ Auth-User   │ Station     │ Booking     │ Billing     │&#10;│ :8080       │ :8080       │ :8080       │ :8080       │&#10;└─────────────┴─────────────┴─────────────┴─────────────┘&#10;    ↓               ↓               ↓               ↓&#10;┌─────────────┬─────────────┬─────────────┬─────────────┐&#10;│ AuthDB      │ StationDB   │ BookingDB   │ BillingDB   │&#10;│ :5432       │ :5432       │ :5432       │ :5432       │&#10;└─────────────┴─────────────┴─────────────┴─────────────┘&#10;```&#10;&#10;##  6 Thành phần Chính&#10;&#10;### 0. **nginx** (Port 80/443)&#10;**Vai trò:** Reverse Proxy &amp; Load Balancer&#10;&#10;**Chức năng:**&#10;- ✅ Reverse proxy cho API Gateway&#10;- ✅ SSL/TLS termination (HTTPS)&#10;- ✅ Rate limiting (chống DDoS)&#10;- ✅ Gzip compression&#10;- ✅ Security headers&#10;- ✅ Load balancing giữa nhiều API Gateway instances&#10;- ✅ Static content serving (nếu cần)&#10;&#10;**Tài liệu:** [nginx/README.md](nginx/README.md), [nginx/DEPLOYMENT_GUIDE.md](nginx/DEPLOYMENT_GUIDE.md)&#10;&#10;---&#10;&#10;### 1. **gateway** (Port 9000 → Container 8080)&#10;**Service:** `api-gateway`&#10;&#10;**Chức năng:**&#10;- ✅ Điểm vào (entry point) cho tất cả microservices&#10;- ✅ Định tuyến (routing) request đến service tương ứng&#10;- ✅ Xác thực token (JWT)&#10;- ✅ Service discovery via Eureka&#10;- ✅ Monitoring và rate limiting&#10;&#10;**Container:** `api-gateway:8080`&#10;&#10;**Access:**&#10;- Via Nginx: `http://localhost/api/*`&#10;- Direct: `http://localhost:9000/api/*`&#10;&#10;---&#10;&#10;### 2. **auth-user** (Port 9001 → Container 8080)&#10;**Gộp từ:** `auth-user` + `admin`&#10;&#10;**Chức năng:**&#10;- ✅ Đăng ký/đăng nhập (EV Driver, Staff, Admin)&#10;- ✅ Quản lý profile và thông tin cá nhân&#10;- ✅ Quản lý phương tiện của người dùng&#10;- ✅ Phân quyền (roles &amp; permissions)&#10;- ✅ Quản lý nhân viên&#10;- ✅ Xử lý khiếu nại/khiếu kiện liên quan đến tài khoản&#10;&#10;**Database:** `authdb` (PostgreSQL - Port 5433)&#10;&#10;**Container:** `auth-user-service:8080`&#10;&#10;**Access:**&#10;- Via Nginx: `http://localhost/auth-user/swagger-ui/index.html`&#10;- Via Gateway: `http://localhost:9000/auth-user/swagger-ui/index.html`&#10;- Direct: `http://localhost:9001/swagger-ui/index.html`&#10;&#10;---&#10;&#10;### 3. **station** (Port 9002 → Container 8080)&#10;**Gộp từ:** `station-inventory` + `geo-routing`&#10;&#10;**Chức năng:**&#10;- ✅ Quản lý trạm đổi pin&#10;- ✅ Quản lý slot (ngăn chứa pin)&#10;- ✅ Quản lý pin (model, dung lượng, SoH - State of Health)&#10;- ✅ Theo dõi tồn kho pin (đầy, đang sạc, bảo dưỡng, lỗi)&#10;- ✅ Tìm kiếm trạm gần nhất (Geolocation)&#10;- ✅ Gợi ý lộ trình (Routing)&#10;&#10;**Database:** `stationdb` (PostgreSQL - Port 5434)&#10;&#10;**Container:** `station-service:8080`&#10;&#10;**Access:**&#10;- Via Nginx: `http://localhost/station/swagger-ui/index.html`&#10;- Via Gateway: `http://localhost:9000/station/swagger-ui/index.html`&#10;- Direct: `http://localhost:9002/swagger-ui/index.html`&#10;&#10;---&#10;&#10;### 4. **booking** (Port 9003 → Container 8080)&#10;**Gộp từ:** `booking-swap` + `support-feedback` + `notification`&#10;&#10;**Chức năng:**&#10;- ✅ Đặt lịch trước để đổi pin&#10;- ✅ Giữ chỗ pin&#10;- ✅ Xử lý giao dịch đổi pin tại trạm&#10;- ✅ Xác nhận giao dịch&#10;- ✅ Quản lý support ticket&#10;- ✅ Đánh giá (rating) dịch vụ trạm&#10;- ✅ Gửi thông báo (email, SMS, push notification)&#10;&#10;**Database:** `bookingdb` (PostgreSQL - Port 5435)&#10;&#10;**Container:** `booking-service:8080`&#10;&#10;**Tích hợp:** Kafka, MailHog&#10;&#10;**Access:**&#10;- Via Nginx: `http://localhost/booking/swagger-ui/index.html`&#10;- Via Gateway: `http://localhost:9000/booking/swagger-ui/index.html`&#10;- Direct: `http://localhost:9003/swagger-ui/index.html`&#10;&#10;---&#10;&#10;### 5. **billing** (Port 9004 → Container 8080)&#10;**Gộp từ:** `billing-payment` + `analytics`&#10;&#10;**Chức năng:**&#10;- ✅ Quản lý gói thuê bao&#10;- ✅ Xử lý thanh toán (tích hợp payment gateway)&#10;- ✅ Tạo và quản lý hóa đơn&#10;- ✅ Báo cáo doanh thu&#10;- ✅ Thống kê số lượt đổi pin&#10;- ✅ Phân tích tần suất sử dụng, giờ cao điểm&#10;- ✅ AI dự báo nhu cầu sử dụng trạm&#10;&#10;**Database:** `billingdb` (PostgreSQL - Port 5436)&#10;&#10;**Container:** `billing-service:8080`&#10;&#10;**Tích hợp:** Kafka&#10;&#10;**Access:**&#10;- Via Nginx: `http://localhost/billing/swagger-ui/index.html`&#10;- Via Gateway: `http://localhost:9000/billing/swagger-ui/index.html`&#10;- Direct: `http://localhost:9004/swagger-ui/index.html`&#10;&#10;---&#10;&#10;## ️ Hạ tầng hỗ trợ&#10;&#10;### Eureka Server (Port 8761)&#10;- Service Discovery &amp; Registration&#10;- Health check cho các microservice&#10;&#10;### Kafka + Zookeeper&#10;- Message broker cho event-driven architecture&#10;- Kafka: Port 9092&#10;- Zookeeper: Port 2181&#10;&#10;### MailHog&#10;- SMTP server cho môi trường development&#10;- Web UI: Port 8025&#10;- SMTP: Port 1025&#10;&#10;---&#10;&#10;## ️ Sơ đồ kiến trúc&#10;&#10;```&#10;                        ┌─────────────────┐&#10;                        │   Client Apps   │&#10;                        │  (Web/Mobile)   │&#10;                        └────────┬────────┘&#10;                                 │ HTTP/HTTPS&#10;                        ┌────────▼────────┐&#10;                        │      Nginx      │ :80/:443&#10;                        │ (Reverse Proxy) │&#10;                        │  Rate Limiting  │&#10;                        └────────┬────────┘&#10;                                 │&#10;                        ┌────────▼────────┐&#10;                        │   API Gateway   │ :9000&#10;                        │  (Routing, JWT) │&#10;                        └────────┬────────┘&#10;                                 │&#10;        ┌────────────────────────┼────────────────────────┐&#10;        │                        │                        │&#10;┌───────▼────────┐    ┌─────────▼──────────┐    ┌───────▼────────┐&#10;│  auth-user     │    │     station        │    │    booking     │&#10;│  :9001         │    │     :9002          │    │    :9003       │&#10;│                │    │                    │    │                │&#10;│ • Auth         │    │ • Stations         │    │ • Bookings     │&#10;│ • Profile      │    │ • Batteries        │    │ • Swaps        │&#10;│ • Permissions  │    │ • Geo/Routing      │    │ • Support      │&#10;│ • Admin        │    │ • Inventory        │    │ • Notification │&#10;└───────┬────────┘    └─────────┬──────────┘    └───────┬────────┘&#10;        │                       │                        │&#10;┌───────▼────────┐    ┌─────────▼──────────┐           │&#10;│   authdb       │    │    stationdb       │           │&#10;│   :5433        │    │    :5434           │           │&#10;└────────────────┘    └────────────────────┘           │&#10;                                                        │&#10;        ┌───────────────────────────────────────────────┤&#10;        │                                               │&#10;┌───────▼────────┐                            ┌────────▼─────────┐&#10;│    billing     │                            │    bookingdb     │&#10;│    :9004       │                            │    :5435         │&#10;│                │                            └──────────────────┘&#10;│ • Payments     │&#10;│ • Invoices     │              ┌─────────────────┐&#10;│ • Analytics    │◄─────────────┤ Kafka + Zookeeper│&#10;│ • AI Forecast  │              │ :9092 / :2181   │&#10;└───────┬────────┘              └─────────────────┘&#10;        │&#10;┌───────▼────────┐              ┌─────────────────┐&#10;│   billingdb    │              │    MailHog      │&#10;│   :5436        │              │  :8025 / :1025  │&#10;└────────────────┘              └─────────────────┘&#10;&#10;        ┌──────────────────────────┐&#10;        │   Eureka Server :8761    │&#10;        │  (Service Discovery)     │&#10;        └──────────────────────────┘&#10;```&#10;&#10;---&#10;&#10;##  Cách sử dụng&#10;&#10;### 1. Chuẩn bị môi trường&#10;&#10;Tạo file `.env` từ `.env.example`:&#10;```bash&#10;cp .env.example .env&#10;```&#10;&#10;&#10;### 2. Build tất cả service&#10;&#10;```bash&#10;# Windows&#10;build-all.bat&#10;&#10;# Linux/Mac&#10;chmod +x build-all.sh&#10;./build-all.sh&#10;```&#10;&#10;### 3. Khởi động hệ thống&#10;&#10;```bash&#10;# Khởi động tất cả services&#10;docker-compose up -d&#10;&#10;# Xem logs&#10;docker-compose logs -f&#10;&#10;# Xem logs của 1 service cụ thể&#10;docker-compose logs -f auth-user&#10;```&#10;&#10;### 4. Kiểm tra trạng thái&#10;&#10;- **Eureka Dashboard**: http://localhost:8761&#10;- **API Gateway**: http://localhost:9000&#10;- **Auth-User Service**: http://localhost:9001&#10;- **Station Service**: http://localhost:9002&#10;- **Booking Service**: http://localhost:9003&#10;- **Billing Service**: http://localhost:9004&#10;- **MailHog UI**: http://localhost:8025&#10;&#10;### 5. Dừng hệ thống&#10;&#10;```bash&#10;# Dừng tất cả&#10;docker-compose down&#10;&#10;# Dừng và xóa volumes (dữ liệu database)&#10;docker-compose down -v&#10;```&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/DEV_GUIDE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/DEV_GUIDE.md" />
              <option name="updatedContent" value="#  Hướng dẫn Development - EV Battery Swap Station MS&#10;&#10;##  Kiến trúc 5 Service chính&#10;&#10;| Service | Port IDE | Port Docker | Database Port | Chức năng |&#10;|---------|----------|-------------|---------------|-----------|&#10;| **Eureka Server** | 8762 | 8761 | - | Service Discovery |&#10;| **API Gateway** | 8080 | 9000 | - | API Gateway, Routing |&#10;| **Auth-User** | 8081 | 9001 | 5433 | Xác thực, Profile, Phân quyền |&#10;| **Station** | 8082 | 9002 | 5434 | Quản lý trạm, Pin, Geo |&#10;| **Booking** | 8083 | 9003 | 5435 | Đặt lịch, Đổi pin, Notification |&#10;| **Billing** | 8084 | 9004 | 5436 | Thanh toán, Báo cáo, Analytics |&#10;&#10;---&#10;&#10;## ️ Setup cho Development&#10;&#10;### 1. Khởi động Infrastructure (chỉ cần chạy 1 lần)&#10;&#10;```cmd&#10;docker-compose -f docker-compose.base.yml up -d&#10;```&#10;&#10;**Infrastructure bao gồm:**&#10;- ✅ Eureka Server (port 8761)&#10;- ✅ 4 PostgreSQL databases&#10;- ✅ Kafka + Zookeeper&#10;- ✅ MailHog (SMTP testing)&#10;&#10;**Kiểm tra trạng thái:**&#10;```cmd&#10;docker-compose -f docker-compose.base.yml ps&#10;```&#10;&#10;### 2. Chạy Service trong IDE (IntelliJ IDEA)&#10;&#10;#### Option A: Sử dụng Eureka từ Docker (Khuyến nghị ⭐)&#10;&#10;Chỉ cần chạy service của bạn trong IDE, nó sẽ tự động kết nối đến Eureka trong Docker (port 8761).&#10;&#10;**Ví dụ: Chạy Auth-User Service**&#10;1. Mở class `AuthUserApplication.java`&#10;2. Click nút Run&#10;3. Service sẽ chạy trên port `8081` và register với Eureka tại `localhost:8761`&#10;&#10;#### Option B: Chạy Eureka trong IDE (nếu cần debug Eureka)&#10;&#10;**Bước 1:** Stop Eureka trong Docker&#10;```cmd&#10;docker stop base-eureka-server&#10;```&#10;&#10;**Bước 2:** Chạy Eureka trong IDE với profile `ide`&#10;- Mở `EurekaServerApplication.java`&#10;- Edit Configuration → VM options: `-Dspring.profiles.active=ide`&#10;- Run → Eureka sẽ chạy trên port `8762`&#10;&#10;**Bước 3:** Cập nhật biến môi trường cho các service khác:&#10;```&#10;EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://localhost:8762/eureka/&#10;```&#10;&#10;---&#10;&#10;##  Test và Debug&#10;&#10;### Chạy từng service:&#10;&#10;```cmd&#10;# Chỉ chạy service bạn đang phát triển&#10;# Ví dụ: Auth-User Service&#10;cd auth-user&#10;./mvnw spring-boot:run&#10;&#10;# Hoặc trong IDE: Run AuthUserApplication.java&#10;```&#10;&#10;### Access URLs:&#10;&#10;- **Eureka Dashboard (Docker):** http://localhost:8761&#10;- **Eureka Dashboard (IDE):** http://localhost:8762&#10;- **MailHog UI:** http://localhost:8025&#10;- **API Gateway:** http://localhost:8080&#10;- **Auth Service:** http://localhost:8081&#10;- **Station Service:** http://localhost:8082&#10;- **Booking Service:** http://localhost:8083&#10;- **Billing Service:** http://localhost:8084&#10;&#10;---&#10;&#10;##  Deploy Full System với Docker&#10;&#10;```cmd&#10;# Build tất cả services&#10;./build-all.bat   # Windows&#10;./build-all.sh    # Linux/Mac&#10;&#10;# Chạy toàn bộ hệ thống&#10;docker-compose up -d&#10;&#10;# Kiểm tra logs&#10;docker-compose logs -f [service-name]&#10;&#10;# Stop toàn bộ&#10;docker-compose down&#10;```&#10;&#10;---&#10;&#10;##  Troubleshooting&#10;&#10;### Lỗi: Port already in use&#10;&#10;**Nguyên nhân:** Service đang chạy trong Docker conflict với IDE&#10;&#10;**Giải pháp:**&#10;```cmd&#10;# Stop service đang chạy trong Docker&#10;docker stop [container-name]&#10;&#10;# Hoặc stop toàn bộ&#10;docker-compose down&#10;```&#10;&#10;### Lỗi: Cannot connect to Database&#10;&#10;**Kiểm tra database đang chạy:**&#10;```cmd&#10;docker-compose -f docker-compose.base.yml ps&#10;```&#10;&#10;**Restart database:**&#10;```cmd&#10;docker-compose -f docker-compose.base.yml restart [db-name]&#10;```&#10;&#10;### Lỗi: Service không register với Eureka&#10;&#10;**Kiểm tra:**&#10;1. Eureka Server có đang chạy? → http://localhost:8761&#10;2. Biến môi trường `EUREKA_CLIENT_SERVICEURL_DEFAULTZONE` có đúng không?&#10;3. Network có kết nối được không?&#10;&#10;---&#10;&#10;##  Development Workflow&#10;&#10;### Workflow A: Chạy tất cả trong Docker&#10;```cmd&#10;docker-compose up -d&#10;# Phù hợp cho: Test integration, Demo&#10;```&#10;&#10;### Workflow B: Development với IDE (Khuyến nghị)&#10;```cmd&#10;# 1. Chạy infrastructure&#10;docker-compose -f docker-compose.base.yml up -d&#10;&#10;# 2. Chạy service của bạn trong IDE&#10;# - Build nhanh&#10;# - Debug dễ dàng&#10;# - Hot reload&#10;&#10;# 3. Test với Postman/curl&#10;curl http://localhost:8081/api/users&#10;```&#10;&#10;### Workflow C: Hybrid (một số service Docker, một số IDE)&#10;```cmd&#10;# 1. Chạy infrastructure&#10;docker-compose -f docker-compose.base.yml up -d&#10;&#10;# 2. Chạy các service khác trong Docker&#10;docker-compose up -d auth-user station booking&#10;&#10;# 3. Chỉ chạy service đang phát triển trong IDE (ví dụ: billing)&#10;# Run BillingApplication.java trong IDE&#10;```&#10;&#10;---&#10;&#10;##  Clean Up&#10;&#10;```cmd&#10;# Stop và xóa containers&#10;docker-compose down&#10;&#10;# Stop và xóa containers + volumes (xóa data)&#10;docker-compose down -v&#10;&#10;# Xóa tất cả images&#10;docker rmi $(docker images -q &quot;be_evbssms*&quot;)&#10;&#10;# Clean build artifacts&#10;./mvnw clean   # trong từng service folder&#10;```&#10;&#10;---&#10;&#10;##  Tài liệu tham khảo&#10;&#10;- [Spring Boot Documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/)&#10;- [Spring Cloud Netflix](https://spring.io/projects/spring-cloud-netflix)&#10;- [Docker Compose](https://docs.docker.com/compose/)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/README.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/README.md" />
              <option name="originalContent" value="# Cách chạy BE:&#10;&#10;1. Thêm file .env vào thư mục gốc của project với nội dung như file .env.example&#10;2. Chạy lệnh sau trong terminal ở thư mục gốc của project BE:&#10;&#10;```bash&#10;  ./build-all.bat&#10;  docker-compose up --build -d&#10;```&#10;&#10;Nếu không dùng service trực tiếp ở docker muốn chạy được file env thì cần dùng thêm plugin Vd:&#10;EnvFile plugin&#10;http://localhost:8081/swagger-ui/index.html#/Admin/approveRegistration&#10;&#10;| Service       | Chức năng chính                       | Loại giao tiếp chính    |&#10;|---------------|---------------------------------------|-------------------------|&#10;| **auth-user** | Xác thực, quản lý user, role, profile | ✅ REST sync (HTTP)      |&#10;| **station**   | Quản lý trạm, pin, slot, vị trí       | ✅ REST +  Kafka event |&#10;| **booking**   | Đặt lịch, đổi pin, xử lý giao dịch    | ✅ REST +  Kafka event |&#10;| **billing**   | Thanh toán, gói thuê, hóa đơn         | ✅ REST +  Kafka event |&#10;&#10;Auth-User Service: http://localhost:8080/auth-user/swagger-ui.html&#10;Station Service: http://localhost:8080/station/swagger-ui.html&#10;Booking Service: http://localhost:8080/booking/swagger-ui.html&#10;Billing Service: http://localhost:8080/billing/swagger-ui.html&#10;Hoặc trực tiếp các service:&#10;http://localhost:8081/swagger-ui.html (Auth-User)&#10;http://localhost:8082/swagger-ui.html (Station)&#10;http://localhost:8083/swagger-ui.html (Booking)&#10;http://localhost:8084/swagger-ui.html (Billing)&#10;&#10;Docker:&#10;Auth: http://localhost:9000/auth-user/swagger-ui/index.html&#10;&#10;Trực tiếp các service:&#10;Auth: http://localhost:9001/swagger-ui/index.html#/&#10;&#10;&#10;## 4. Project code style&#10;&#10;If using IntelliJ IDEA, you can import the code style file from the project root directory:&#10;&#10;- Go to `File` -&gt; `Settings` -&gt; `Editor` -&gt; `Code Style`.&#10;&#10;Then import the code style file:&#10;&#10;[Google code style](GoogleStyle.xml)&#10;&#10;Then enable auto formatting on save:&#10;&#10;- Go to `File` -&gt; `Settings` -&gt; `Tools` -&gt; `Actions on Save`.&#10;&#10;- Check `Reformat code` and `Optimize imports`." />
              <option name="updatedContent" value="# Cách chạy BE:&#10;&#10;1. Thêm file .env vào thư mục gốc của project với nội dung như file .env.example&#10;2. Chạy lệnh sau trong terminal ở thư mục gốc của project BE:&#10;&#10;```bash&#10;  ./build-all.bat&#10;  docker-compose up --build -d&#10;```&#10;&#10;Nếu không dùng service trực tiếp ở docker muốn chạy được file env thì cần dùng thêm plugin Vd:&#10;EnvFile plugin&#10;&#10;## Kiến trúc hệ thống&#10;&#10;```&#10;Client → Nginx:80 → API Gateway:8080 → [Microservices]&#10;         ↓&#10;    Rate Limiting&#10;    Compression&#10;    SSL/TLS&#10;    Load Balancing&#10;```&#10;&#10;| Service       | Chức năng chính                       | Loại giao tiếp chính    |&#10;|---------------|---------------------------------------|-------------------------|&#10;| **nginx**     | Reverse proxy, load balancer, security| HTTP/HTTPS              |&#10;| **gateway**   | API Gateway, routing                  | HTTP/REST               |&#10;| **auth-user** | Xác thực, quản lý user, role, profile | ✅ REST sync (HTTP)      |&#10;| **station**   | Quản lý trạm, pin, slot, vị trí       | ✅ REST +  Kafka event |&#10;| **booking**   | Đặt lịch, đổi pin, xử lý giao dịch    | ✅ REST +  Kafka event |&#10;| **billing**   | Thanh toán, gói thuê, hóa đơn         | ✅ REST +  Kafka event |&#10;&#10;## Truy cập API và Swagger UI&#10;&#10;### Qua Nginx (Production - Recommended):&#10;```&#10;http://localhost/api/auth/login&#10;http://localhost/api/stations&#10;http://localhost/api/bookings&#10;http://localhost/api/billings&#10;```&#10;&#10;### Swagger UI qua Nginx:&#10;```&#10;http://localhost/auth-user/swagger-ui/index.html&#10;http://localhost/station/swagger-ui/index.html&#10;http://localhost/booking/swagger-ui/index.html&#10;http://localhost/billing/swagger-ui/index.html&#10;```&#10;&#10;### Qua API Gateway trực tiếp (Development):&#10;```&#10;Auth-User Service: http://localhost:9000/auth-user/swagger-ui.html&#10;Station Service: http://localhost:9000/station/swagger-ui.html&#10;Booking Service: http://localhost:9000/booking/swagger-ui.html&#10;Billing Service: http://localhost:9000/billing/swagger-ui.html&#10;```&#10;&#10;### Trực tiếp các service (Development only):&#10;```&#10;Auth: http://localhost:9001/swagger-ui/index.html&#10;Station: http://localhost:9002/swagger-ui/index.html&#10;Booking: http://localhost:9003/swagger-ui/index.html&#10;Billing: http://localhost:9004/swagger-ui/index.html&#10;```&#10;&#10;### Infrastructure:&#10;```&#10;Eureka Dashboard: http://localhost:8761&#10;MailHog Web UI: http://localhost:8025&#10;```&#10;&#10;## Nginx Configuration&#10;&#10;Chi tiết về cấu hình và sử dụng Nginx, xem:&#10;- [nginx/README.md](nginx/README.md) - Tài liệu kỹ thuật&#10;- [nginx/DEPLOYMENT_GUIDE.md](nginx/DEPLOYMENT_GUIDE.md) - Hướng dẫn triển khai&#13;&#10;&#13;&#10;&#13;&#10;## 4. Project code style&#13;&#10;&#13;&#10;If using IntelliJ IDEA, you can import the code style file from the project root directory:&#13;&#10;&#13;&#10;- Go to `File` -&gt; `Settings` -&gt; `Editor` -&gt; `Code Style`.&#13;&#10;&#13;&#10;Then import the code style file:&#13;&#10;&#13;&#10;[Google code style](GoogleStyle.xml)&#13;&#10;&#13;&#10;Then enable auto formatting on save:&#13;&#10;&#13;&#10;- Go to `File` -&gt; `Settings` -&gt; `Tools` -&gt; `Actions on Save`.&#13;&#10;&#13;&#10;- Check `Reformat code` and `Optimize imports`." />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/SWAGGER_GATEWAY_SETUP.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/SWAGGER_GATEWAY_SETUP.md" />
              <option name="updatedContent" value="#  Hướng dẫn khởi động Swagger UI qua Gateway (Port 8080)&#10;&#10;## ✅ Cấu hình hiện tại (đã setup sẵn)&#10;&#10;### Gateway Routes:&#10;- Auth-User Swagger: `http://localhost:8080/auth-user/swagger-ui.html`&#10;- Station Swagger: `http://localhost:8080/station/swagger-ui.html`&#10;- Booking Swagger: `http://localhost:8080/booking/swagger-ui.html`&#10;- Billing Swagger: `http://localhost:8080/billing/swagger-ui.html`&#10;&#10;### Cơ chế hoạt động:&#10;1. Gateway nhận request: `/auth-user/swagger-ui.html`&#10;2. StripPrefix filter loại bỏ `/auth-user`&#10;3. Forward đến auth-user service: `/swagger-ui.html`&#10;4. Service trả về Swagger UI ✅&#10;&#10;##  Các bước khởi động (QUAN TRỌNG)&#10;&#10;### Bước 1: Khởi động Eureka Server&#10;```bash&#10;cd eureka-server&#10;mvn spring-boot:run&#10;```&#10;Đợi xuất hiện: `Started Eureka Server`&#10;&#10;### Bước 2: Khởi động Auth-User Service&#10;```bash&#10;cd auth-user&#10;mvn spring-boot:run&#10;```&#10;Đợi xuất hiện: `Started AuthUserApplication`&#10;&#10;### Bước 3: Kiểm tra Eureka Dashboard&#10;- Mở: http://localhost:8761&#10;- Xác nhận `AUTH-USER` xuất hiện trong &quot;Instances currently registered with Eureka&quot;&#10;&#10;### Bước 4: Khởi động API Gateway&#10;```bash&#10;cd api-gateway&#10;mvn spring-boot:run&#10;```&#10;Đợi xuất hiện: `Started GatewayApplication`&#10;&#10;### Bước 5: Test Swagger UI&#10;```bash&#10;# Test service trực tiếp (phải hoạt động)&#10;http://localhost:8081/swagger-ui/index.html&#10;&#10;# Test qua gateway&#10;http://localhost:8080/auth-user/swagger-ui.html&#10;```&#10;&#10;##  Troubleshooting&#10;&#10;### Lỗi 404: No static resource swagger-ui/index.html&#10;&#10;**Nguyên nhân:**&#10;- Service chưa khởi động&#10;- Service chưa đăng ký với Eureka&#10;- Gateway chưa fetch registry từ Eureka&#10;&#10;**Giải pháp:**&#10;1. Restart tất cả services theo đúng thứ tự trên&#10;2. Đợi 30 giây sau mỗi lần start service&#10;3. Xóa cache browser (Ctrl+Shift+Delete)&#10;4. Test lại&#10;&#10;### Kiểm tra logs&#10;&#10;**Gateway logs:**&#10;```&#10;# Nên thấy:&#10;- &quot;Mapped [GET] [/auth-user/swagger-ui.html]&quot;&#10;- &quot;Route matched: auth-user-swagger-ui&quot;&#10;```&#10;&#10;**Auth-user logs:**&#10;```&#10;# Nên thấy:&#10;- &quot;DiscoveryClient registered with Eureka&quot;&#10;- &quot;Fetched config from server at http://localhost:8761/eureka/&quot;&#10;```&#10;&#10;##  Nếu vẫn lỗi - Dùng URL trực tiếp&#10;&#10;Sửa tạm thời gateway config (file: `api-gateway/src/main/resources/application.yml`):&#10;&#10;```yaml&#10;# Auth-User Swagger - DÙNG URL TRỰC TIẾP&#10;- id: auth-user-swagger-ui&#10;  uri: http://localhost:8081  # Thay vì lb://auth-user&#10;  predicates:&#10;    - Path=/auth-user/swagger-ui.html,/auth-user/swagger-ui/**,/auth-user/v3/api-docs/**,/auth-user/webjars/**&#10;  filters:&#10;    - StripPrefix=1&#10;```&#10;&#10;Sau đó restart gateway và test lại.&#10;&#10;##  Ghi chú&#10;&#10;- Service độc lập vẫn hoạt động bình thường: `http://localhost:8081/swagger-ui/index.html`&#10;- Gateway chỉ là proxy, route requests đến service&#10;- StripPrefix=1 loại bỏ segment đầu tiên (/auth-user) trước khi forward&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/admin/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/admin/Dockerfile" />
              <option name="originalContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]&#10;" />
              <option name="updatedContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./admin/target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/admin/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/admin/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.6&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/analytics/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/analytics/Dockerfile" />
              <option name="originalContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]&#10;" />
              <option name="updatedContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./analytics/target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/analytics/docker-compose.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/analytics/docker-compose.yml" />
              <option name="originalContent" value="analytics:&#10;  build:&#10;    context: ./analytics&#10;  command: [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]&#10;  ports:&#10;    - &quot;9007:8080&quot;&#10;  env_file:&#10;    - .env&#10;  depends_on:&#10;    - analytics-db&#10;    - eureka-server&#10;  networks: [evnet]&#10;  environment:&#10;analytics-db:&#10;  image: postgres:16-alpine&#10;  environment:&#10;    - POSTGRES_DB=analyticsdb&#10;    - POSTGRES_USER=ev&#10;    - POSTGRES_PASSWORD=evpass&#10;  ports:&#10;    - &quot;5439:5432&quot;&#10;  networks: [evnet]&#10;" />
              <option name="updatedContent" value="version: &quot;3.8&quot;&#10;services:&#10;  analytics:&#10;    build:&#10;      context: ./analytics&#10;    command: [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]&#10;    ports:&#10;      - &quot;9007:8080&quot;&#10;    env_file:&#10;      - .env&#10;    depends_on:&#10;      - analytics-db&#10;      - eureka-server&#10;    networks:&#10;      - evnet&#10;&#10;  analytics-db:&#10;    image: postgres:16-alpine&#10;    environment:&#10;      - POSTGRES_DB=analyticsdb&#10;      - POSTGRES_USER=ev&#10;      - POSTGRES_PASSWORD=evpass&#10;    ports:&#10;      - &quot;5439:5432&quot;&#10;    networks:&#10;      - evnet&#10;&#10;  eureka-server:&#10;    image: eurekaserver:latest&#10;    ports:&#10;      - &quot;8761:8761&quot;&#10;    networks:&#10;      - evnet&#10;&#10;networks:&#10;  evnet:&#10;    driver: bridge" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/analytics/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/analytics/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.6&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/FIX_STATUS_CONSTRAINT.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/FIX_STATUS_CONSTRAINT.md" />
              <option name="updatedContent" value="#  Hướng dẫn khắc phục lỗi &quot;chk_status constraint&quot;&#10;&#10;## ❌ Vấn đề&#10;```&#10;ERROR: new row for relation &quot;users&quot; violates check constraint &quot;chk_status&quot;&#10;Detail: Failing row contains (..., PENDING_VERIFICATION, ...)&#10;```&#10;&#10;##  Nguyên nhân&#10;Có sự **không khớp giữa database constraint và Java enum**:&#10;&#10;### Database (V1__init_schema.sql) - CHỈ cho phép 4 giá trị:&#10;```sql&#10;CONSTRAINT chk_status CHECK (status IN ('PENDING_APPROVAL', 'ACTIVE', 'INACTIVE', 'REJECTED'))&#10;```&#10;&#10;### Java enum (UserStatus.java) - Có 6 giá trị:&#10;```java&#10;public enum UserStatus {&#10;    PENDING_APPROVAL,&#10;    REJECTED,&#10;    PENDING_VERIFICATION,  // ❌ Không có trong DB constraint&#10;    ACTIVE,&#10;    INACTIVE,&#10;    BANNED                 // ❌ Không có trong DB constraint&#10;}&#10;```&#10;&#10;Khi admin phê duyệt đơn đăng ký, hệ thống set `status = PENDING_VERIFICATION`, nhưng database không chấp nhận giá trị này → **Lỗi constraint violation!**&#10;&#10;## ✅ Giải pháp đã áp dụng&#10;&#10;### Bước 1: Tạo migration V2&#10;Đã tạo file `V2__update_user_status_constraint.sql` để cập nhật constraint:&#10;&#10;```sql&#10;-- Xóa constraint cũ&#10;ALTER TABLE users DROP CONSTRAINT IF EXISTS chk_status;&#10;&#10;-- Thêm constraint mới với đầy đủ 6 giá trị&#10;ALTER TABLE users ADD CONSTRAINT chk_status &#10;    CHECK (status IN ('PENDING_APPROVAL', 'REJECTED', 'PENDING_VERIFICATION', 'ACTIVE', 'INACTIVE', 'BANNED'));&#10;```&#10;&#10;### Bước 2: Rebuild service&#10;```bash&#10;cd auth-user&#10;mvn clean compile&#10;```&#10;&#10;✅ File migration V2 đã được copy vào `target/classes/db/migration/`&#10;&#10;### Bước 3: Restart service để Flyway chạy migration&#10;Khi restart, Flyway sẽ:&#10;1. Phát hiện migration mới `V2__update_user_status_constraint.sql`&#10;2. Tự động chạy migration này&#10;3. Cập nhật constraint trong database&#10;4. Ghi log vào bảng `flyway_schema_history`&#10;&#10;##  Cách restart service&#10;&#10;### Option 1: Restart từ IDE&#10;- Stop service hiện tại (Ctrl+C)&#10;- Run lại: `mvn spring-boot:run`&#10;&#10;### Option 2: Restart bằng script&#10;```bash&#10;.\run-dev.bat&#10;```&#10;&#10;### Option 3: Restart bằng Maven&#10;```bash&#10;cd D:\Code\SpringBoot3\EV_Battery_SwapStation_MS\BE_EVBSSMS\auth-user&#10;mvn spring-boot:run&#10;```&#10;&#10;##  Kiểm tra sau khi restart&#10;&#10;### 1. Kiểm tra log Flyway&#10;Khi service khởi động, bạn sẽ thấy log:&#10;```&#10;INFO [o.f.c.i.s.JdbcTableSchemaHistory] - Creating Schema History table &quot;public&quot;.&quot;flyway_schema_history&quot; ...&#10;INFO [o.f.core.internal.command.DbMigrate] - Migrating schema &quot;public&quot; to version &quot;2 - update user status constraint&quot;&#10;INFO [o.f.core.internal.command.DbMigrate] - Successfully applied 1 migration to schema &quot;public&quot; (execution time 00:00.123s)&#10;```&#10;&#10;### 2. Kiểm tra database&#10;Kết nối vào PostgreSQL và chạy:&#10;```sql&#10;-- Kiểm tra constraint mới&#10;SELECT conname, pg_get_constraintdef(oid) &#10;FROM pg_constraint &#10;WHERE conname = 'chk_status';&#10;&#10;-- Kết quả mong đợi:&#10;-- chk_status | CHECK (status::text = ANY (ARRAY['PENDING_APPROVAL'::character varying, 'REJECTED'::character varying, 'PENDING_VERIFICATION'::character varying, 'ACTIVE'::character varying, 'INACTIVE'::character varying, 'BANNED'::character varying]::text[]))&#10;&#10;-- Kiểm tra lịch sử migration&#10;SELECT * FROM flyway_schema_history ORDER BY installed_rank;&#10;&#10;-- Kết quả mong đợi:&#10;-- installed_rank | version | description                      | type | script                                     | success&#10;-- ---------------+---------+----------------------------------+------+--------------------------------------------+---------&#10;-- 1              | 1       | init schema                      | SQL  | V1__init_schema.sql                        | t&#10;-- 2              | 2       | update user status constraint    | SQL  | V2__update_user_status_constraint.sql      | t&#10;```&#10;&#10;### 3. Test lại luồng đăng ký → phê duyệt&#10;```bash&#10;# 1. Đăng ký tài khoản mới&#10;POST /api/auth/oauth2/google/register&#10;→ status = PENDING_APPROVAL ✅&#10;&#10;# 2. Admin phê duyệt&#10;POST /api/admin/approve-registration&#10;→ status = PENDING_VERIFICATION ✅ (Không còn lỗi constraint!)&#10;&#10;# 3. User verify OTP&#10;POST /api/auth/verify-otp&#10;→ status = ACTIVE ✅&#10;```&#10;&#10;##  Troubleshooting&#10;&#10;### ❌ Lỗi: &quot;Flyway failed to initialize&quot;&#10;**Nguyên nhân:** Database connection bị lỗi hoặc schema không tồn tại.&#10;&#10;**Giải pháp:**&#10;```bash&#10;# Kiểm tra database đã chạy chưa&#10;docker ps | grep postgres&#10;&#10;# Nếu chưa chạy&#10;docker start auth-user-db&#10;```&#10;&#10;### ❌ Lỗi: &quot;Migration checksum mismatch&quot;&#10;**Nguyên nhân:** File migration V1 đã bị thay đổi sau khi đã chạy.&#10;&#10;**Giải pháp:**&#10;```sql&#10;-- Xóa lịch sử migration cũ (CHỈ dùng trong development!)&#10;DELETE FROM flyway_schema_history WHERE version = '2';&#10;&#10;-- Sau đó restart service&#10;```&#10;&#10;### ❌ Vẫn còn lỗi constraint sau khi restart&#10;**Nguyên nhân:** Migration chưa được chạy hoặc bị lỗi.&#10;&#10;**Giải pháp:**&#10;```bash&#10;# 1. Kiểm tra log&#10;docker logs -f auth-user-service&#10;&#10;# 2. Kiểm tra Flyway history&#10;SELECT * FROM flyway_schema_history;&#10;&#10;# 3. Nếu migration V2 chưa có, chạy thủ công:&#10;psql -U ev -d authdb -f src/main/resources/db/migration/V2__update_user_status_constraint.sql&#10;```&#10;&#10;##  Tài liệu tham khảo&#10;&#10;- [Flyway Documentation](https://flywaydb.org/documentation/)&#10;- [PostgreSQL CHECK Constraint](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-CHECK-CONSTRAINTS)&#10;- [Spring Boot Flyway Integration](https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-initialization.migration-tool.flyway)&#10;&#10;##  Lưu ý quan trọng&#10;&#10;1. **Không sửa migration đã chạy**: Migration V1 đã được apply, không nên sửa file này nữa&#10;2. **Luôn tạo migration mới**: Khi cần thay đổi schema, tạo migration mới (V2, V3, ...)&#10;3. **Kiểm tra enum và constraint**: Đảm bảo Java enum và database constraint luôn khớp nhau&#10;4. **Test sau mỗi migration**: Luôn test lại các luồng nghiệp vụ sau khi chạy migration mới&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/MAILHOG_SETUP.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/MAILHOG_SETUP.md" />
              <option name="updatedContent" value="#  Hướng dẫn sử dụng MailHog để test email&#10;&#10;##  Mục đích&#10;MailHog là một SMTP server dùng để test email trong môi trường development. Tất cả email được gửi từ ứng dụng sẽ bị &quot;chặn&quot; bởi MailHog thay vì gửi đến địa chỉ email thật.&#10;&#10;## ✅ Cấu hình đã được thiết lập&#10;&#10;### 1. File `application.yml`&#10;```yaml&#10;mail:&#10;  host: ${MAIL_HOST:localhost}&#10;  port: ${MAIL_PORT:1025}&#10;  username: ${MAIL_USERNAME:}&#10;  password: ${MAIL_PASSWORD:}&#10;  properties:&#10;    mail:&#10;      smtp:&#10;        auth: ${MAIL_SMTP_AUTH:false}&#10;        starttls:&#10;          enable: ${MAIL_SMTP_STARTTLS:false}&#10;          required: ${MAIL_SMTP_STARTTLS:false}&#10;```&#10;&#10;### 2. File `.env`&#10;```bash&#10;MAIL_HOST=localhost&#10;MAIL_PORT=1025&#10;MAIL_USERNAME=&#10;MAIL_PASSWORD=&#10;MAIL_FROM=noreply@evbss.com&#10;MAIL_SMTP_AUTH=false&#10;MAIL_SMTP_STARTTLS=false&#10;```&#10;&#10;##  Cách sử dụng&#10;&#10;### 1️⃣ Khởi động MailHog (đã chạy rồi)&#10;```bash&#10;# Kiểm tra MailHog đã chạy chưa&#10;docker ps | grep mailhog&#10;&#10;# Nếu chưa chạy, start MailHog&#10;docker start base-mailhog&#10;```&#10;&#10;### 2️⃣ Truy cập MailHog Web UI&#10;Mở browser và truy cập: **http://localhost:8025**&#10;&#10;Bạn sẽ thấy giao diện như sau:&#10;- **Inbox**: Danh sách email đã nhận&#10;- **Search**: Tìm kiếm email&#10;- **Delete**: Xóa email&#10;&#10;### 3️⃣ Test gửi email OTP&#10;&#10;#### Bước 1: Đăng ký tài khoản mới&#10;```bash&#10;POST http://localhost:8080/api/auth/oauth2/google/register&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;idToken&quot;: &quot;eyJhbGc...&quot;,&#10;  &quot;phone&quot;: &quot;+84987654321&quot;,&#10;  &quot;birthday&quot;: &quot;1990-01-15&quot;,&#10;  &quot;role&quot;: &quot;DRIVER&quot;,&#10;  &quot;address&quot;: &quot;123 Đường ABC, Quận 1, TP.HCM&quot;,&#10;  &quot;identityCard&quot;: &quot;123456789012&quot;,&#10;  &quot;vehicles&quot;: [&#10;    {&#10;      &quot;vin&quot;: &quot;VIN123456789&quot;,&#10;      &quot;model&quot;: &quot;VF 8&quot;,&#10;      &quot;licensePlate&quot;: &quot;51A-12345&quot;,&#10;      &quot;batteryType&quot;: &quot;Lithium-ion&quot;,&#10;      &quot;batteryCapacity&quot;: 87.7&#10;    }&#10;  ]&#10;}&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 201,&#10;  &quot;message&quot;: &quot;Đăng ký thành công! Đơn của bạn đang chờ Admin phê duyệt. Bạn sẽ nhận được email khi đơn được duyệt.&quot;,&#10;  &quot;user&quot;: { ... }&#10;}&#10;```&#10;&#10;**Email 1 được gửi:** &quot;Đơn đăng ký của bạn đang được xử lý&quot;&#10;&#10;#### Bước 2: Admin phê duyệt đơn đăng ký&#10;```bash&#10;POST http://localhost:8080/api/admin/approve-registration&#10;Authorization: Bearer &lt;ADMIN_JWT_TOKEN&gt;&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;userId&quot;: 1,&#10;  &quot;approved&quot;: true&#10;}&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 200,&#10;  &quot;message&quot;: &quot;Đã phê duyệt đơn đăng ký thành công. OTP đã được gửi đến email của người dùng.&quot;&#10;}&#10;```&#10;&#10;**Email 2 được gửi:** &#10;1. Email thông báo được chấp nhận&#10;2. Email chứa mã OTP (6 chữ số)&#10;&#10;#### Bước 3: Kiểm tra email trong MailHog&#10;1. Mở **http://localhost:8025**&#10;2. Bạn sẽ thấy 2 email mới:&#10;   - **Email 1**: &quot;Đơn đăng ký của bạn đang được xử lý&quot;&#10;   - **Email 2**: &quot;Đơn đăng ký được chấp nhận&quot;&#10;   - **Email 3**: &quot;Mã OTP xác thực tài khoản&quot; (ví dụ: `123456`)&#10;&#10;#### Bước 4: Verify OTP&#10;```bash&#10;POST http://localhost:8080/api/auth/verify-otp&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;email&quot;: &quot;user@example.com&quot;,&#10;  &quot;otpCode&quot;: &quot;123456&quot;&#10;}&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 200,&#10;  &quot;message&quot;: &quot;Xác thực OTP thành công!&quot;,&#10;  &quot;accessToken&quot;: &quot;eyJhbGc...&quot;,&#10;  &quot;refreshToken&quot;: &quot;eyJhbGc...&quot;,&#10;  &quot;user&quot;: { ... }&#10;}&#10;```&#10;&#10;##  Các loại email được gửi trong hệ thống&#10;&#10;| Sự kiện | Tiêu đề email | Thời điểm |&#10;|---------|---------------|-----------|&#10;| Đăng ký tài khoản | &quot;Đơn đăng ký của bạn đang được xử lý&quot; | Ngay sau khi đăng ký |&#10;| Admin chấp nhận | &quot;Đơn đăng ký được chấp nhận&quot; | Khi admin approve |&#10;| Gửi OTP | &quot;Mã OTP xác thực tài khoản&quot; | Khi admin approve |&#10;| Admin từ chối | &quot;Đơn đăng ký bị từ chối&quot; | Khi admin reject |&#10;| Tài khoản đã active | &quot;Chào mừng đến với EV Battery Swap Station&quot; | Sau khi verify OTP thành công |&#10;&#10;##  Troubleshooting&#10;&#10;### ❌ Lỗi: &quot;STARTTLS is required but host does not support STARTTLS&quot;&#10;**Nguyên nhân:** Cấu hình email đang yêu cầu STARTTLS nhưng MailHog không hỗ trợ.&#10;&#10;**Giải pháp:** Đã được sửa trong `application.yml`:&#10;```yaml&#10;starttls:&#10;  enable: false&#10;  required: false&#10;```&#10;&#10;### ❌ Lỗi: &quot;Connection refused&quot; khi gửi email&#10;**Nguyên nhân:** MailHog chưa chạy hoặc port bị chiếm.&#10;&#10;**Giải pháp:**&#10;```bash&#10;# Kiểm tra MailHog đã chạy chưa&#10;docker ps | grep mailhog&#10;&#10;# Restart MailHog&#10;docker restart base-mailhog&#10;&#10;# Kiểm tra log&#10;docker logs base-mailhog&#10;```&#10;&#10;### ❌ Không thấy email trong MailHog&#10;**Nguyên nhân:** &#10;1. Kafka chưa chạy&#10;2. Consumer chưa lắng nghe&#10;3. Cấu hình email sai&#10;&#10;**Giải pháp:**&#10;```bash&#10;# 1. Kiểm tra Kafka&#10;docker ps | grep kafka&#10;&#10;# 2. Kiểm tra log của auth-user service&#10;docker logs -f auth-user-service&#10;&#10;# Tìm dòng log:&#10;# ✅ &quot;Đã tạo và gửi OTP cho user: xxx@gmail.com&quot;&#10;# ✅ &quot;Đã gửi email event lên Kafka: xxx@gmail.com&quot;&#10;# ✅ &quot;Đã gửi email thành công đến: xxx@gmail.com&quot;&#10;```&#10;&#10;##  Giao diện MailHog&#10;&#10;Khi truy cập **http://localhost:8025**, bạn sẽ thấy:&#10;&#10;```&#10;┌─────────────────────────────────────────────┐&#10;│  MailHog                                    │&#10;├─────────────────────────────────────────────┤&#10;│   Messages (3)                            │&#10;│  ┌─────────────────────────────────────┐   │&#10;│  │ From: noreply@evbss.com             │   │&#10;│  │ To: user@example.com                │   │&#10;│  │ Subject: Mã OTP xác thực tài khoản  │   │&#10;│  │ Time: 2025-10-11 10:30:00           │   │&#10;│  └─────────────────────────────────────┘   │&#10;│  ┌─────────────────────────────────────┐   │&#10;│  │ From: noreply@evbss.com             │   │&#10;│  │ To: user@example.com                │   │&#10;│  │ Subject: Đơn đăng ký được chấp nhận │   │&#10;│  │ Time: 2025-10-11 10:29:50           │   │&#10;│  └─────────────────────────────────────┘   │&#10;└─────────────────────────────────────────────┘&#10;```&#10;&#10;##  Lưu ý quan trọng&#10;&#10;1. **MailHog chỉ dùng cho Development**: Không dùng MailHog trong Production&#10;2. **Email không được gửi ra ngoài**: Tất cả email đều bị chặn bởi MailHog&#10;3. **Không cần username/password**: MailHog không yêu cầu xác thực SMTP&#10;4. **Email được giữ trong memory**: Restart MailHog sẽ mất tất cả email&#10;5. **Port 1025**: SMTP port của MailHog (khác với Gmail là 587)&#10;6. **Port 8025**: Web UI của MailHog&#10;&#10;##  Tham khảo&#10;&#10;- [MailHog Official GitHub](https://github.com/mailhog/MailHog)&#10;- [Spring Boot Mail Documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/io.html#io.email)&#10;- [Kafka Documentation](https://kafka.apache.org/documentation/)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/billing-payment/src/main/resources/application.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/billing-payment/src/main/resources/application.yml" />
              <option name="originalContent" value="spring:&#10;  application:&#10;    name: billing-service&#10;  datasource:&#10;    url: jdbc:postgresql://${BILLING_PAYMENT_DB_HOST:localhost}:${BILLING_PAYMENT_DB_PORT:5436}/${BILLING_PAYMENT_DB_NAME:billingdb}&#10;    username: ${BILLING_PAYMENT_DB_USER:ev}&#10;    password: ${BILLING_PAYMENT_DB_PASSWORD:evpass}&#10;    driver-class-name: org.postgresql.Driver&#10;  jpa:&#10;    hibernate:&#10;      ddl-auto: update&#10;    show-sql: true&#10;    properties:&#10;      hibernate:&#10;        format_sql: true&#10;        dialect: org.hibernate.dialect.PostgreSQLDialect&#10;  flyway:&#10;    enabled: true&#10;    baseline-on-migrate: true&#10;    locations: classpath:db/migration/billing-payment&#10;    url: jdbc:postgresql://${BILLING_PAYMENT_DB_HOST:localhost}:${BILLING_PAYMENT_DB_PORT:5436}/${BILLING_PAYMENT_DB_NAME:billingdb}&#10;    user: ${BILLING_PAYMENT_DB_USER:ev}&#10;    password: ${BILLING_PAYMENT_DB_PASSWORD:evpass}&#10;  docker:&#10;    compose:&#10;      enabled: false&#10;eureka:&#10;  client:&#10;    serviceUrl:&#10;      defaultZone: ${EUREKA_CLIENT_SERVICEURL_DEFAULTZONE:http://localhost:8761/eureka/}&#10;    register-with-eureka: true&#10;    fetch-registry: true&#10;  instance:&#10;    prefer-ip-address: true&#10;&#10;server:&#10;  port: 8084&#10;  forward-headers-strategy: framework&#10;  tomcat:&#10;    remoteip:&#10;      remote-ip-header: X-Forwarded-For&#10;      protocol-header: X-Forwarded-Proto&#10;&#10;# Springdoc OpenAPI (Swagger) Configuration&#10;springdoc:&#10;  api-docs:&#10;    path: /v3/api-docs&#10;    enabled: true&#10;    groups:&#10;      enabled: true&#10;  swagger-ui:&#10;    path: /swagger-ui.html&#10;    enabled: true&#10;    operations-sorter: method&#10;    tags-sorter: alpha&#10;    doc-expansion: none&#10;    urls:&#10;      - name: &quot;Billing Service (Direct)&quot;&#10;        url: &quot;/v3/api-docs&quot;&#10;      - name: &quot;Billing Service (Via Gateway)&quot;&#10;        url: &quot;http://localhost:8080/billing/v3/api-docs&quot;&#10;  show-actuator: false&#10;&#10;logging:&#10;  level:&#10;    org.springframework: INFO&#10;    com.boilerplate.code: DEBUG&#10;    org.flywaydb: DEBUG&#10;" />
              <option name="updatedContent" value="spring:&#10;  application:&#10;    name: billing-service&#10;  datasource:&#10;    url: jdbc:postgresql://${BILLING_PAYMENT_DB_HOST:localhost}:${BILLING_PAYMENT_DB_PORT:5436}/${BILLING_PAYMENT_DB_NAME:billingdb}&#10;    username: ${BILLING_PAYMENT_DB_USER:ev}&#10;    password: ${BILLING_PAYMENT_DB_PASSWORD:evpass}&#10;    driver-class-name: org.postgresql.Driver&#10;  jpa:&#10;    hibernate:&#10;      ddl-auto: update&#10;    show-sql: true&#10;    properties:&#10;      hibernate:&#10;        format_sql: true&#10;        dialect: org.hibernate.dialect.PostgreSQLDialect&#10;  flyway:&#10;    enabled: true&#10;    baseline-on-migrate: true&#10;    locations: classpath:db/migration/billing-payment&#10;    url: jdbc:postgresql://${BILLING_PAYMENT_DB_HOST:localhost}:${BILLING_PAYMENT_DB_PORT:5436}/${BILLING_PAYMENT_DB_NAME:billingdb}&#10;    user: ${BILLING_PAYMENT_DB_USER:ev}&#10;    password: ${BILLING_PAYMENT_DB_PASSWORD:evpass}&#10;  docker:&#10;    compose:&#10;      enabled: false&#10;eureka:&#10;  client:&#10;    serviceUrl:&#10;      defaultZone: ${EUREKA_CLIENT_SERVICEURL_DEFAULTZONE:http://localhost:8761/eureka/}&#10;    register-with-eureka: true&#10;    fetch-registry: true&#10;  instance:&#10;    prefer-ip-address: true&#10;&#10;server:&#10;  port: 8084&#10;  forward-headers-strategy: framework&#10;  tomcat:&#10;    remoteip:&#10;      remote-ip-header: X-Forwarded-For&#10;      protocol-header: X-Forwarded-Proto&#10;&#10;# Springdoc OpenAPI (Swagger) Configuration&#10;springdoc:&#10;  api-docs:&#10;    path: /v3/api-docs&#10;    enabled: true&#10;    groups:&#10;      enabled: true&#10;  swagger-ui:&#10;    path: /swagger-ui.html&#10;    enabled: true&#10;    operations-sorter: method&#10;    tags-sorter: alpha&#10;    doc-expansion: none&#10;    urls:&#10;      - name: &quot;Billing Service (Direct)&quot;&#10;        url: &quot;/v3/api-docs&quot;&#10;      - name: &quot;Billing Service (Via Gateway)&quot;&#10;        url: &quot;http://localhost:8080/billing/v3/api-docs&quot;&#10;  show-actuator: false&#10;&#10;logging:&#10;  level:&#10;    org.springframework: INFO&#10;    com.boilerplate.code: DEBUG&#10;    org.flywaydb: DEBUG" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/docker-compose.prod.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/docker-compose.prod.yml" />
              <option name="originalContent" value="# docker-compose.prod.yml&#10;# Full production deployment - Chạy TOÀN BỘ hệ thống trong Docker&#10;# Bao gồm: Infrastructure + All Microservices&#10;#&#10;# Cách dùng:&#10;#   docker-compose -f docker-compose.prod.yml up -d --build&#10;#&#10;# Tất cả services chạy trong Docker network và giao tiếp qua container names:&#10;#   - Gateway: localhost:9000 → container api-gateway:8080&#10;#   - Auth-User: localhost:9001 → container auth-user:8080&#10;#   - Station: localhost:9002 → container station:8080&#10;#   - Booking: localhost:9003 → container booking:8080&#10;#   - Billing: localhost:9004 → container billing:8080&#10;#   - Eureka: localhost:8761 → container eureka-server:8761&#10;&#10;version: '3.8'&#10;&#10;services:&#10;  # Eureka Server - Service Discovery&#10;  eureka-server:&#10;    build:&#10;      context: ./eureka-server&#10;      dockerfile: Dockerfile&#10;    container_name: eureka-server&#10;    ports:&#10;      - &quot;8761:8761&quot;&#10;    environment:&#10;      - SPRING_PROFILES_ACTIVE=prod&#10;    networks: [ evnet ]&#10;    healthcheck:&#10;      test: [ &quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8761/actuator/health&quot; ]&#10;      interval: 30s&#10;      timeout: 10s&#10;      retries: 5&#10;    restart: unless-stopped&#10;&#10;  # Kafka - Message Broker&#10;  kafka:&#10;    image: confluentinc/cp-kafka:7.6.0&#10;    container_name: kafka&#10;    restart: unless-stopped&#10;    volumes:&#10;      - kafka-data:/var/lib/kafka/data&#10;    ports:&#10;      - &quot;9092:9092&quot;&#10;      - &quot;9093:9093&quot;&#10;    environment:&#10;      KAFKA_PROCESS_ROLES: broker,controller&#10;      KAFKA_NODE_ID: 1&#10;      KAFKA_CONTROLLER_QUORUM_VOTERS: 1@localhost:9093&#10;      KAFKA_LOG_DIRS: /var/lib/kafka/data&#10;      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT&#10;      KAFKA_LISTENERS: PLAINTEXT://kafka:29092,PLAINTEXT_HOST://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093&#10;      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092&#10;      KAFKA_CONTROLLER_LISTENER_NAMES: CONTROLLER&#10;      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT&#10;      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1&#10;      KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: 1&#10;      KAFKA_TRANSACTION_STATE_LOG_MIN_ISR: 1&#10;      KAFKA_MIN_INSYNC_REPLICAS: 1&#10;      KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS: 0&#10;      KAFKA_NUM_PARTITIONS: 3&#10;      KAFKA_LOG_RETENTION_HOURS: 168          # 7 ngày&#10;      KAFKA_LOG_RETENTION_CHECK_INTERVAL_MS: 300000&#10;      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &quot;true&quot;&#10;      KAFKA_METRIC_REPORTERS: io.confluent.metrics.reporter.ConfluentMetricsReporter&#10;      CONFLUENT_METRICS_REPORTER_BOOTSTRAP_SERVERS: kafka:29092&#10;      CONFLUENT_METRICS_REPORTER_TOPIC_REPLICAS: 1&#10;&#10;    healthcheck:&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;nc -z localhost 9092&quot; ]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;    networks: [ evnet ]&#10;&#10;  # MailHog - Email testing&#10;  mailhog:&#10;    image: mailhog/mailhog&#10;    container_name: mailhog&#10;    ports:&#10;      - &quot;8025:8025&quot;    # Web UI&#10;      - &quot;1025:1025&quot;    # SMTP server&#10;    networks: [ evnet ]&#10;    restart: unless-stopped&#10;&#10;  # ==========================================&#10;  # DATABASES&#10;  # ==========================================&#10;&#10;  # Auth-User Database&#10;  auth-user-db:&#10;    image: postgres:16-alpine&#10;    container_name: auth-user-db&#10;    environment:&#10;      - POSTGRES_DB=authdb&#10;      - POSTGRES_USER=ev&#10;      - POSTGRES_PASSWORD=evpass&#10;    ports:&#10;      - &quot;5433:5432&quot;&#10;    volumes:&#10;      - auth-user-data:/var/lib/postgresql/data&#10;    networks: [ evnet ]&#10;    restart: unless-stopped&#10;    healthcheck:&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;pg_isready -U ev -d authdb&quot; ]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;&#10;  # Station Database&#10;  station-db:&#10;    image: postgres:16-alpine&#10;    container_name: station-db&#10;    environment:&#10;      - POSTGRES_DB=stationdb&#10;      - POSTGRES_USER=ev&#10;      - POSTGRES_PASSWORD=evpass&#10;    ports:&#10;      - &quot;5434:5432&quot;&#10;    volumes:&#10;      - station-data:/var/lib/postgresql/data&#10;    networks: [ evnet ]&#10;    restart: unless-stopped&#10;    healthcheck:&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;pg_isready -U ev -d stationdb&quot; ]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;&#10;  # Booking Database&#10;  booking-db:&#10;    image: postgres:16-alpine&#10;    container_name: booking-db&#10;    environment:&#10;      - POSTGRES_DB=bookingdb&#10;      - POSTGRES_USER=ev&#10;      - POSTGRES_PASSWORD=evpass&#10;    ports:&#10;      - &quot;5435:5432&quot;&#10;    volumes:&#10;      - booking-data:/var/lib/postgresql/data&#10;    networks: [ evnet ]&#10;    restart: unless-stopped&#10;    healthcheck:&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;pg_isready -U ev -d bookingdb&quot; ]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;&#10;  # Billing Database&#10;  billing-db:&#10;    image: postgres:16-alpine&#10;    container_name: billing-db&#10;    environment:&#10;      - POSTGRES_DB=billingdb&#10;      - POSTGRES_USER=ev&#10;      - POSTGRES_PASSWORD=evpass&#10;    ports:&#10;      - &quot;5436:5432&quot;&#10;    volumes:&#10;      - billing-data:/var/lib/postgresql/data&#10;    networks: [ evnet ]&#10;    restart: unless-stopped&#10;    healthcheck:&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;pg_isready -U ev -d billingdb&quot; ]&#10;      interval: 10s&#10;      timeout: 5s&#10;      retries: 5&#10;&#10;  # ==========================================&#10;  # MICROSERVICES&#10;  # ==========================================&#10;&#10;  # API Gateway - Entry point cho tất cả request&#10;  gateway:&#10;    container_name: api-gateway&#10;    build:&#10;      context: ./api-gateway&#10;      dockerfile: Dockerfile&#10;    ports:&#10;      - &quot;9000:8080&quot;&#10;    environment:&#10;      - SPRING_PROFILES_ACTIVE=prod&#10;      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka/&#10;    networks: [ evnet ]&#10;    depends_on:&#10;      eureka-server:&#10;        condition: service_healthy&#10;    restart: unless-stopped&#10;&#10;  # Auth-User Service&#10;  auth-user:&#10;    container_name: auth-user-service&#10;    build:&#10;      context: ./auth-user&#10;      dockerfile: Dockerfile&#10;    ports:&#10;      - &quot;9001:8080&quot;&#10;    environment:&#10;      - SPRING_PROFILES_ACTIVE=prod&#10;    networks: [ evnet ]&#10;    depends_on:&#10;      auth-user-db:&#10;        condition: service_healthy&#10;      eureka-server:&#10;        condition: service_healthy&#10;      kafka:&#10;        condition: service_started&#10;      mailhog:&#10;        condition: service_started&#10;    restart: unless-stopped&#10;&#10;  # Station Service&#10;  station:&#10;    container_name: station-service&#10;    build:&#10;      context: ./station-inventory&#10;      dockerfile: Dockerfile&#10;    ports:&#10;      - &quot;9002:8080&quot;&#10;    environment:&#10;      - SPRING_PROFILES_ACTIVE=prod&#10;    networks: [ evnet ]&#10;    depends_on:&#10;      station-db:&#10;        condition: service_healthy&#10;      eureka-server:&#10;        condition: service_healthy&#10;    restart: unless-stopped&#10;&#10;  # Booking Service&#10;  booking:&#10;    container_name: booking-service&#10;    build:&#10;      context: ./booking-swap&#10;      dockerfile: Dockerfile&#10;    ports:&#10;      - &quot;9003:8080&quot;&#10;    environment:&#10;      - SPRING_PROFILES_ACTIVE=prod&#10;    networks: [ evnet ]&#10;    depends_on:&#10;      booking-db:&#10;        condition: service_healthy&#10;      eureka-server:&#10;        condition: service_healthy&#10;      kafka:&#10;        condition: service_started&#10;      mailhog:&#10;        condition: service_started&#10;    restart: unless-stopped&#10;&#10;  # Billing Service&#10;  billing:&#10;    container_name: billing-service&#10;    build:&#10;      context: ./billing-payment&#10;      dockerfile: Dockerfile&#10;    ports:&#10;      - &quot;9004:8080&quot;&#10;    environment:&#10;      - SPRING_PROFILES_ACTIVE=prod&#10;    networks: [ evnet ]&#10;    depends_on:&#10;      billing-db:&#10;        condition: service_healthy&#10;      eureka-server:&#10;        condition: service_healthy&#10;      kafka:&#10;        condition: service_started&#10;    restart: unless-stopped&#10;&#10;networks:&#10;  evnet:&#10;    name: evnet&#10;    driver: bridge&#10;&#10;volumes:&#10;  auth-user-data:&#10;    name: auth-user-data&#10;  station-data:&#10;    name: station-data&#10;  booking-data:&#10;    name: booking-data&#10;  billing-data:&#10;    name: billing-data&#10;  kafka-data:&#10;    name: kafka-data&#10;&#10;" />
              <option name="updatedContent" value="# docker-compose.prod.yml&#13;&#10;# Full production deployment - Chạy TOÀN BỘ hệ thống trong Docker&#13;&#10;# Bao gồm: Infrastructure + All Microservices&#13;&#10;#&#13;&#10;# Cách dùng:&#10;#   docker-compose -f docker-compose.prod.yml up -d --build&#10;#&#10;# Tất cả services chạy trong Docker network và giao tiếp qua container names:&#10;#   - Nginx: localhost:80 → container nginx:80 → api-gateway:8080&#10;#   - Gateway: localhost:9000 → container api-gateway:8080 (direct access)&#10;#   - Auth-User: localhost:9001 → container auth-user:8080&#10;#   - Station: localhost:9002 → container station:8080&#10;#   - Booking: localhost:9003 → container booking:8080&#10;#   - Billing: localhost:9004 → container billing:8080&#10;#   - Eureka: localhost:8761 → container eureka-server:8761&#10;&#10;version: '3.8'&#10;&#10;services:&#10;  # ==========================================&#10;  # NGINX - Reverse Proxy &amp; Load Balancer&#10;  # ==========================================&#10;  nginx:&#10;    build:&#10;      context: ./nginx&#10;      dockerfile: Dockerfile&#10;    container_name: nginx-proxy&#10;    ports:&#10;      - &quot;80:80&quot;      # HTTP&#10;      - &quot;443:443&quot;    # HTTPS (khi có SSL)&#10;    networks: [ evnet ]&#10;    depends_on:&#10;      - gateway&#10;    restart: unless-stopped&#10;    healthcheck:&#10;      test: [ &quot;CMD&quot;, &quot;wget&quot;, &quot;--quiet&quot;, &quot;--tries=1&quot;, &quot;--spider&quot;, &quot;http://localhost/health&quot; ]&#10;      interval: 30s&#10;      timeout: 3s&#10;      retries: 3&#13;&#10;  # Eureka Server - Service Discovery&#13;&#10;  eureka-server:&#13;&#10;    build:&#13;&#10;      context: ./eureka-server&#13;&#10;      dockerfile: Dockerfile&#13;&#10;    container_name: eureka-server&#13;&#10;    ports:&#13;&#10;      - &quot;8761:8761&quot;&#13;&#10;    environment:&#13;&#10;      - SPRING_PROFILES_ACTIVE=prod&#13;&#10;    networks: [ evnet ]&#13;&#10;    healthcheck:&#13;&#10;      test: [ &quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8761/actuator/health&quot; ]&#13;&#10;      interval: 30s&#13;&#10;      timeout: 10s&#13;&#10;      retries: 5&#13;&#10;    restart: unless-stopped&#13;&#10;&#13;&#10;  # Kafka - Message Broker&#13;&#10;  kafka:&#13;&#10;    image: confluentinc/cp-kafka:7.6.0&#13;&#10;    container_name: kafka&#13;&#10;    restart: unless-stopped&#13;&#10;    volumes:&#13;&#10;      - kafka-data:/var/lib/kafka/data&#13;&#10;    ports:&#13;&#10;      - &quot;9092:9092&quot;&#13;&#10;      - &quot;9093:9093&quot;&#13;&#10;    environment:&#13;&#10;      KAFKA_PROCESS_ROLES: broker,controller&#13;&#10;      KAFKA_NODE_ID: 1&#13;&#10;      KAFKA_CONTROLLER_QUORUM_VOTERS: 1@localhost:9093&#13;&#10;      KAFKA_LOG_DIRS: /var/lib/kafka/data&#13;&#10;      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT&#13;&#10;      KAFKA_LISTENERS: PLAINTEXT://kafka:29092,PLAINTEXT_HOST://0.0.0.0:9092,CONTROLLER://0.0.0.0:9093&#13;&#10;      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092&#13;&#10;      KAFKA_CONTROLLER_LISTENER_NAMES: CONTROLLER&#13;&#10;      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT&#13;&#10;      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1&#13;&#10;      KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: 1&#13;&#10;      KAFKA_TRANSACTION_STATE_LOG_MIN_ISR: 1&#13;&#10;      KAFKA_MIN_INSYNC_REPLICAS: 1&#13;&#10;      KAFKA_GROUP_INITIAL_REBALANCE_DELAY_MS: 0&#13;&#10;      KAFKA_NUM_PARTITIONS: 3&#13;&#10;      KAFKA_LOG_RETENTION_HOURS: 168          # 7 ngày&#13;&#10;      KAFKA_LOG_RETENTION_CHECK_INTERVAL_MS: 300000&#13;&#10;      KAFKA_AUTO_CREATE_TOPICS_ENABLE: &quot;true&quot;&#13;&#10;      KAFKA_METRIC_REPORTERS: io.confluent.metrics.reporter.ConfluentMetricsReporter&#13;&#10;      CONFLUENT_METRICS_REPORTER_BOOTSTRAP_SERVERS: kafka:29092&#13;&#10;      CONFLUENT_METRICS_REPORTER_TOPIC_REPLICAS: 1&#13;&#10;&#13;&#10;    healthcheck:&#13;&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;nc -z localhost 9092&quot; ]&#13;&#10;      interval: 10s&#13;&#10;      timeout: 5s&#13;&#10;      retries: 5&#13;&#10;    networks: [ evnet ]&#13;&#10;&#13;&#10;  # MailHog - Email testing&#13;&#10;  mailhog:&#13;&#10;    image: mailhog/mailhog&#13;&#10;    container_name: mailhog&#13;&#10;    ports:&#13;&#10;      - &quot;8025:8025&quot;    # Web UI&#13;&#10;      - &quot;1025:1025&quot;    # SMTP server&#13;&#10;    networks: [ evnet ]&#13;&#10;    restart: unless-stopped&#13;&#10;&#13;&#10;  # ==========================================&#13;&#10;  # DATABASES&#13;&#10;  # ==========================================&#13;&#10;&#13;&#10;  # Auth-User Database&#13;&#10;  auth-user-db:&#13;&#10;    image: postgres:16-alpine&#13;&#10;    container_name: auth-user-db&#13;&#10;    environment:&#13;&#10;      - POSTGRES_DB=authdb&#13;&#10;      - POSTGRES_USER=ev&#13;&#10;      - POSTGRES_PASSWORD=evpass&#13;&#10;    ports:&#13;&#10;      - &quot;5433:5432&quot;&#13;&#10;    volumes:&#13;&#10;      - auth-user-data:/var/lib/postgresql/data&#13;&#10;    networks: [ evnet ]&#13;&#10;    restart: unless-stopped&#13;&#10;    healthcheck:&#13;&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;pg_isready -U ev -d authdb&quot; ]&#13;&#10;      interval: 10s&#13;&#10;      timeout: 5s&#13;&#10;      retries: 5&#13;&#10;&#13;&#10;  # Station Database&#13;&#10;  station-db:&#13;&#10;    image: postgres:16-alpine&#13;&#10;    container_name: station-db&#13;&#10;    environment:&#13;&#10;      - POSTGRES_DB=stationdb&#13;&#10;      - POSTGRES_USER=ev&#13;&#10;      - POSTGRES_PASSWORD=evpass&#13;&#10;    ports:&#13;&#10;      - &quot;5434:5432&quot;&#13;&#10;    volumes:&#13;&#10;      - station-data:/var/lib/postgresql/data&#13;&#10;    networks: [ evnet ]&#13;&#10;    restart: unless-stopped&#13;&#10;    healthcheck:&#13;&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;pg_isready -U ev -d stationdb&quot; ]&#13;&#10;      interval: 10s&#13;&#10;      timeout: 5s&#13;&#10;      retries: 5&#13;&#10;&#13;&#10;  # Booking Database&#13;&#10;  booking-db:&#13;&#10;    image: postgres:16-alpine&#13;&#10;    container_name: booking-db&#13;&#10;    environment:&#13;&#10;      - POSTGRES_DB=bookingdb&#13;&#10;      - POSTGRES_USER=ev&#13;&#10;      - POSTGRES_PASSWORD=evpass&#13;&#10;    ports:&#13;&#10;      - &quot;5435:5432&quot;&#13;&#10;    volumes:&#13;&#10;      - booking-data:/var/lib/postgresql/data&#13;&#10;    networks: [ evnet ]&#13;&#10;    restart: unless-stopped&#13;&#10;    healthcheck:&#13;&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;pg_isready -U ev -d bookingdb&quot; ]&#13;&#10;      interval: 10s&#13;&#10;      timeout: 5s&#13;&#10;      retries: 5&#13;&#10;&#13;&#10;  # Billing Database&#13;&#10;  billing-db:&#13;&#10;    image: postgres:16-alpine&#13;&#10;    container_name: billing-db&#13;&#10;    environment:&#13;&#10;      - POSTGRES_DB=billingdb&#13;&#10;      - POSTGRES_USER=ev&#13;&#10;      - POSTGRES_PASSWORD=evpass&#13;&#10;    ports:&#13;&#10;      - &quot;5436:5432&quot;&#13;&#10;    volumes:&#13;&#10;      - billing-data:/var/lib/postgresql/data&#13;&#10;    networks: [ evnet ]&#13;&#10;    restart: unless-stopped&#13;&#10;    healthcheck:&#13;&#10;      test: [ &quot;CMD-SHELL&quot;, &quot;pg_isready -U ev -d billingdb&quot; ]&#13;&#10;      interval: 10s&#13;&#10;      timeout: 5s&#13;&#10;      retries: 5&#13;&#10;&#13;&#10;  # ==========================================&#13;&#10;  # MICROSERVICES&#13;&#10;  # ==========================================&#13;&#10;&#13;&#10;  # API Gateway - Entry point cho tất cả request&#13;&#10;  gateway:&#13;&#10;    container_name: api-gateway&#13;&#10;    build:&#13;&#10;      context: ./api-gateway&#13;&#10;      dockerfile: Dockerfile&#13;&#10;    ports:&#13;&#10;      - &quot;9000:8080&quot;&#13;&#10;    environment:&#13;&#10;      - SPRING_PROFILES_ACTIVE=prod&#13;&#10;      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka/&#13;&#10;    networks: [ evnet ]&#13;&#10;    depends_on:&#13;&#10;      eureka-server:&#13;&#10;        condition: service_healthy&#13;&#10;    restart: unless-stopped&#13;&#10;&#13;&#10;  # Auth-User Service&#13;&#10;  auth-user:&#13;&#10;    container_name: auth-user-service&#13;&#10;    build:&#13;&#10;      context: ./auth-user&#13;&#10;      dockerfile: Dockerfile&#13;&#10;    ports:&#13;&#10;      - &quot;9001:8080&quot;&#13;&#10;    environment:&#13;&#10;      - SPRING_PROFILES_ACTIVE=prod&#13;&#10;    networks: [ evnet ]&#13;&#10;    depends_on:&#13;&#10;      auth-user-db:&#13;&#10;        condition: service_healthy&#13;&#10;      eureka-server:&#13;&#10;        condition: service_healthy&#13;&#10;      kafka:&#13;&#10;        condition: service_started&#13;&#10;      mailhog:&#13;&#10;        condition: service_started&#13;&#10;    restart: unless-stopped&#13;&#10;&#13;&#10;  # Station Service&#13;&#10;  station:&#13;&#10;    container_name: station-service&#13;&#10;    build:&#13;&#10;      context: ./station-inventory&#13;&#10;      dockerfile: Dockerfile&#13;&#10;    ports:&#13;&#10;      - &quot;9002:8080&quot;&#13;&#10;    environment:&#13;&#10;      - SPRING_PROFILES_ACTIVE=prod&#13;&#10;    networks: [ evnet ]&#13;&#10;    depends_on:&#13;&#10;      station-db:&#13;&#10;        condition: service_healthy&#13;&#10;      eureka-server:&#13;&#10;        condition: service_healthy&#13;&#10;    restart: unless-stopped&#13;&#10;&#13;&#10;  # Booking Service&#13;&#10;  booking:&#13;&#10;    container_name: booking-service&#13;&#10;    build:&#13;&#10;      context: ./booking-swap&#13;&#10;      dockerfile: Dockerfile&#13;&#10;    ports:&#13;&#10;      - &quot;9003:8080&quot;&#13;&#10;    environment:&#13;&#10;      - SPRING_PROFILES_ACTIVE=prod&#13;&#10;    networks: [ evnet ]&#13;&#10;    depends_on:&#13;&#10;      booking-db:&#13;&#10;        condition: service_healthy&#13;&#10;      eureka-server:&#13;&#10;        condition: service_healthy&#13;&#10;      kafka:&#13;&#10;        condition: service_started&#13;&#10;      mailhog:&#13;&#10;        condition: service_started&#13;&#10;    restart: unless-stopped&#13;&#10;&#13;&#10;  # Billing Service&#13;&#10;  billing:&#13;&#10;    container_name: billing-service&#13;&#10;    build:&#13;&#10;      context: ./billing-payment&#13;&#10;      dockerfile: Dockerfile&#13;&#10;    ports:&#13;&#10;      - &quot;9004:8080&quot;&#13;&#10;    environment:&#13;&#10;      - SPRING_PROFILES_ACTIVE=prod&#13;&#10;    networks: [ evnet ]&#13;&#10;    depends_on:&#13;&#10;      billing-db:&#13;&#10;        condition: service_healthy&#13;&#10;      eureka-server:&#13;&#10;        condition: service_healthy&#13;&#10;      kafka:&#13;&#10;        condition: service_started&#13;&#10;    restart: unless-stopped&#13;&#10;&#13;&#10;networks:&#13;&#10;  evnet:&#13;&#10;    name: evnet&#13;&#10;    driver: bridge&#13;&#10;&#13;&#10;volumes:&#13;&#10;  auth-user-data:&#13;&#10;    name: auth-user-data&#13;&#10;  station-data:&#13;&#10;    name: station-data&#13;&#10;  booking-data:&#13;&#10;    name: booking-data&#13;&#10;  billing-data:&#13;&#10;    name: billing-data&#13;&#10;  kafka-data:&#13;&#10;    name: kafka-data&#13;&#10;&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/geo-routing/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/geo-routing/Dockerfile" />
              <option name="originalContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]&#10;" />
              <option name="updatedContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./geo-routing/target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/geo-routing/docker-compose.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/geo-routing/docker-compose.yml" />
              <option name="originalContent" value="geo-routing:&#10;  build:&#10;    context: ./geo-routing&#10;  command: [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]&#10;  ports:&#10;    - &quot;9009:8080&quot;&#10;  env_file:&#10;    - .env&#10;  depends_on:&#10;    - eureka-server&#10;  networks: [evnet]&#10;" />
              <option name="updatedContent" value="version: &quot;3.8&quot;&#10;services:&#10;  geo-routing:&#10;    build:&#10;      context: ./geo-routing&#10;    command: [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]&#10;    ports:&#10;      - &quot;9009:8080&quot;&#10;    env_file:&#10;      - .env&#10;    depends_on:&#10;      - eureka-server&#10;    networks:&#10;      - evnet&#10;&#10;  eureka-server:&#10;    image: eurekaserver:latest&#10;    ports:&#10;      - &quot;8761:8761&quot;&#10;    networks:&#10;      - evnet&#10;&#10;networks:&#10;  evnet:&#10;    driver: bridge" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/geo-routing/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/geo-routing/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.6&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/.dockerignore">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/.dockerignore" />
              <option name="updatedContent" value="# .dockerignore cho nginx&#10;&#10;# Documentation&#10;*.md&#10;README.md&#10;DEPLOYMENT_GUIDE.md&#10;QUICKSTART.md&#10;CHANGELOG.md&#10;&#10;# Test scripts&#10;*.sh&#10;*.bat&#10;test-*&#10;&#10;# Git&#10;.git&#10;.gitignore&#10;&#10;# IDE&#10;.vscode&#10;.idea&#10;*.swp&#10;*.swo&#10;*~&#10;&#10;# OS files&#10;.DS_Store&#10;Thumbs.db&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/CHANGELOG.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/CHANGELOG.md" />
              <option name="updatedContent" value="# Triển khai Nginx Reverse Proxy - Hoàn thành&#10;&#10;## Tổng quan&#10;&#10;Nginx đã được tích hợp thành công vào hệ thống EV Battery Swap Station Management System như một reverse proxy layer phía trước API Gateway.&#10;&#10;## Các file đã tạo&#10;&#10;### 1. Cấu hình Nginx&#10;- `nginx/nginx.conf` - Cấu hình chính&#10;- `nginx/conf.d/api.conf` - Routing chi tiết cho API&#10;- `nginx/conf.d/proxy_params.conf` - Common proxy settings&#10;- `nginx/Dockerfile` - Docker image cho Nginx&#10;&#10;### 2. Tài liệu&#10;- `nginx/README.md` - Tài liệu kỹ thuật chi tiết&#10;- `nginx/DEPLOYMENT_GUIDE.md` - Hướng dẫn triển khai và sử dụng&#10;&#10;### 3. Testing&#10;- `nginx/test-nginx.sh` - Test script cho Linux/Mac&#10;- `nginx/test-nginx.bat` - Test script cho Windows&#10;&#10;### 4. Cập nhật hệ thống&#10;- `docker-compose.prod.yml` - Thêm Nginx service&#10;- `README.md` - Cập nhật hướng dẫn truy cập&#10;- `ARCHITECTURE.md` - Cập nhật kiến trúc tổng thể&#10;&#10;## Kiến trúc mới&#10;&#10;```&#10;Before:&#10;Client → API Gateway:9000 → Services&#10;&#10;After:&#10;Client → Nginx:80 → API Gateway:8080 → Services&#10;         ↓&#10;    - Rate Limiting (100 req/s API, 20 req/s Auth)&#10;    - Gzip Compression&#10;    - Security Headers&#10;    - SSL/TLS Termination (ready)&#10;    - Load Balancing (ready to scale)&#10;```&#10;&#10;## Lợi ích đạt được&#10;&#10;### 1. Bảo mật&#10;- ✅ Rate limiting để chống DDoS&#10;  - API endpoints: 100 requests/giây với burst 50&#10;  - Auth endpoints: 20 requests/giây với burst 10&#10;- ✅ Security headers (X-Frame-Options, X-Content-Type-Options, etc.)&#10;- ✅ Connection limiting (10 connections/IP)&#10;- ✅ SSL/TLS termination sẵn sàng (chỉ cần thêm certificate)&#10;&#10;### 2. Hiệu năng&#10;- ✅ Gzip compression tự động&#10;- ✅ HTTP/1.1 keep-alive connections&#10;- ✅ Connection pooling với upstream&#10;- ✅ Buffering tối ưu&#10;&#10;### 3. Scalability&#10;- ✅ Load balancing sẵn sàng cho multiple API Gateway instances&#10;- ✅ Least connections strategy&#10;- ✅ Health checks và failover tự động&#10;&#10;### 4. Monitoring&#10;- ✅ Centralized access logs&#10;- ✅ Error logs riêng&#10;- ✅ Health check endpoint&#10;- ✅ Request timing metrics&#10;&#10;### 5. Flexibility&#10;- ✅ Dễ dàng thay đổi backend mà không ảnh hưởng client&#10;- ✅ A/B testing sẵn sàng&#10;- ✅ Canary deployment sẵn sàng&#10;&#10;## Cách sử dụng&#10;&#10;### 1. Khởi động hệ thống với Nginx&#10;&#10;```bash&#10;# Build và start tất cả services kèm Nginx&#10;docker-compose -f docker-compose.prod.yml up -d --build&#10;&#10;# Chỉ start Nginx&#10;docker-compose -f docker-compose.prod.yml up -d nginx&#10;```&#10;&#10;### 2. Truy cập API qua Nginx (Production)&#10;&#10;```bash&#10;# API endpoints&#10;curl http://localhost/api/auth/login&#10;curl http://localhost/api/stations&#10;curl http://localhost/api/bookings&#10;curl http://localhost/api/billings&#10;&#10;# Swagger UI&#10;http://localhost/auth-user/swagger-ui/index.html&#10;http://localhost/station/swagger-ui/index.html&#10;http://localhost/booking/swagger-ui/index.html&#10;http://localhost/billing/swagger-ui/index.html&#10;```&#10;&#10;### 3. Health Checks&#10;&#10;```bash&#10;# Nginx health&#10;curl http://localhost/health&#10;&#10;# API Gateway health via Nginx&#10;curl http://localhost/api/actuator/health&#10;```&#10;&#10;### 4. Test Nginx&#10;&#10;```bash&#10;# Windows&#10;cd nginx&#10;test-nginx.bat&#10;&#10;# Linux/Mac&#10;cd nginx&#10;chmod +x test-nginx.sh&#10;./test-nginx.sh&#10;```&#10;&#10;### 5. Xem logs&#10;&#10;```bash&#10;# Nginx logs&#10;docker logs nginx-proxy -f&#10;&#10;# Access logs chi tiết&#10;docker exec nginx-proxy tail -f /var/log/nginx/access.log&#10;docker exec nginx-proxy tail -f /var/log/nginx/api_access.log&#10;&#10;# Error logs&#10;docker exec nginx-proxy tail -f /var/log/nginx/error.log&#10;```&#10;&#10;### 6. Reload cấu hình (không downtime)&#10;&#10;```bash&#10;# Test cấu hình&#10;docker exec nginx-proxy nginx -t&#10;&#10;# Reload nếu OK&#10;docker exec nginx-proxy nginx -s reload&#10;```&#10;&#10;## URL Mapping&#10;&#10;### Production (qua Nginx - Port 80) - RECOMMENDED&#10;| Endpoint | URL |&#10;|----------|-----|&#10;| Nginx Health | `http://localhost/health` |&#10;| Auth API | `http://localhost/api/auth/*` |&#10;| Station API | `http://localhost/api/stations/*` |&#10;| Booking API | `http://localhost/api/bookings/*` |&#10;| Billing API | `http://localhost/api/billings/*` |&#10;| Auth Swagger | `http://localhost/auth-user/swagger-ui/index.html` |&#10;| Station Swagger | `http://localhost/station/swagger-ui/index.html` |&#10;| Booking Swagger | `http://localhost/booking/swagger-ui/index.html` |&#10;| Billing Swagger | `http://localhost/billing/swagger-ui/index.html` |&#10;&#10;### Development (Direct Access)&#10;| Service | URL |&#10;|---------|-----|&#10;| API Gateway | `http://localhost:9000` |&#10;| Auth-User | `http://localhost:9001` |&#10;| Station | `http://localhost:9002` |&#10;| Booking | `http://localhost:9003` |&#10;| Billing | `http://localhost:9004` |&#10;| Eureka | `http://localhost:8761` |&#10;&#10;## Tùy chỉnh&#10;&#10;### 1. Điều chỉnh Rate Limiting&#10;&#10;Sửa `nginx/nginx.conf`:&#10;&#10;```nginx&#10;# Tăng/giảm rate limit&#10;limit_req_zone $binary_remote_addr zone=api_limit:10m rate=200r/s;&#10;limit_req_zone $binary_remote_addr zone=auth_limit:10m rate=10r/s;&#10;```&#10;&#10;### 2. Thêm SSL/TLS&#10;&#10;Uncomment phần HTTPS trong `nginx/nginx.conf` và thêm certificates:&#10;&#10;```yaml&#10;# docker-compose.prod.yml&#10;nginx:&#10;  volumes:&#10;    - ./ssl:/etc/nginx/ssl:ro&#10;```&#10;&#10;### 3. Scale API Gateway&#10;&#10;Thêm instances trong `nginx/nginx.conf`:&#10;&#10;```nginx&#10;upstream api_gateway {&#10;    least_conn;&#10;    server api-gateway-1:8080;&#10;    server api-gateway-2:8080;&#10;    server api-gateway-3:8080;&#10;}&#10;```&#10;&#10;Scale trong docker-compose:&#10;```bash&#10;docker-compose -f docker-compose.prod.yml up -d --scale gateway=3&#10;```&#10;&#10;### 4. Chặn Swagger UI trong Production&#10;&#10;Sửa `nginx/conf.d/api.conf`:&#10;&#10;```nginx&#10;location ~ ^/(auth-user|station|booking|billing)/swagger-ui/ {&#10;    return 403;  # Forbidden&#10;}&#10;```&#10;&#10;## Best Practices&#10;&#10;### Production Deployment&#10;1. ✅ Luôn dùng HTTPS với SSL certificate&#10;2. ✅ Chặn Swagger UI endpoints&#10;3. ✅ Enable access logs và monitor 5xx errors&#10;4. ✅ Setup log rotation&#10;5. ✅ Backup cấu hình Nginx thường xuyên&#10;6. ✅ Monitor rate limit metrics&#10;7. ✅ Setup alerts cho high error rate&#10;&#10;### Development&#10;1. ✅ Có thể bypass Nginx bằng cách truy cập trực tiếp port 9000-9004&#10;2. ✅ Swagger UI nên accessible để test API&#10;3. ✅ Rate limits có thể set cao hơn&#10;&#10;## Troubleshooting&#10;&#10;### Nginx không start&#10;```bash&#10;docker logs nginx-proxy&#10;docker exec nginx-proxy nginx -t&#10;```&#10;&#10;### 502 Bad Gateway&#10;- API Gateway chưa ready → Đợi health check&#10;- Check logs: `docker logs api-gateway`&#10;&#10;### 503 Service Unavailable&#10;- Rate limit hit → Tăng rate limit hoặc giảm request rate&#10;- Upstream unavailable → Check services status&#10;&#10;### Port 80 bị chiếm&#10;```bash&#10;# Windows&#10;netstat -ano | findstr :80&#10;&#10;# Hoặc&#10;Get-NetTCPConnection -LocalPort 80&#10;```&#10;&#10;## Kết luận&#10;&#10;Việc triển khai Nginx là RẤT HỢP LÝ và mang lại nhiều lợi ích:&#10;&#10;1. **Bảo mật**: Rate limiting, security headers, chống DDoS&#10;2. **Hiệu năng**: Compression, connection pooling, caching&#10;3. **Khả năng mở rộng**: Dễ dàng scale API Gateway&#10;4. **Monitoring**: Centralized logging và metrics&#10;5. **Tính linh hoạt**: Dễ thay đổi backend mà không ảnh hưởng client&#10;6. **Production-ready**: SSL/TLS termination sẵn sàng&#10;&#10;Trong production, nên routing TẤT CẢ traffic qua Nginx (port 80/443) thay vì truy cập trực tiếp API Gateway.&#10;&#10;## Tài liệu tham khảo&#10;&#10;- [nginx/README.md](README.md) - Tài liệu kỹ thuật chi tiết&#10;- [nginx/DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) - Hướng dẫn triển khai&#10;- [ARCHITECTURE.md](../ARCHITECTURE.md) - Kiến trúc tổng thể hệ thống&#10;- [README.md](../README.md) - Hướng dẫn chung&#10;&#10;---&#10;&#10;Ngày triển khai: 2025-11-13&#10;Status: ✅ Hoàn thành và sẵn sàng sử dụng&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/DEPLOYMENT_GUIDE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/DEPLOYMENT_GUIDE.md" />
              <option name="updatedContent" value="# Hướng dẫn triển khai Nginx cho API Gateway&#10;&#10;## Tổng quan&#10;&#10;Nginx đã được tích hợp vào hệ thống EV Battery Swap Station MS như một reverse proxy phía trước API Gateway, cung cấp:&#10;&#10;- **Bảo mật**: Rate limiting, security headers, SSL/TLS termination&#10;- **Hiệu năng**: Gzip compression, connection pooling, caching&#10;- **Load Balancing**: Phân tải giữa nhiều instance API Gateway&#10;- **Giám sát**: Access logs, error logs, health checks&#10;&#10;## Kiến trúc mới&#10;&#10;### Trước khi có Nginx&#10;```&#10;Client → API Gateway:9000 → Services&#10;```&#10;&#10;### Sau khi có Nginx&#10;```&#10;Client → Nginx:80 → API Gateway:8080 → Services&#10;         ↓&#10;    Rate Limiting&#10;    Compression&#10;    SSL/TLS&#10;    Load Balancing&#10;```&#10;&#10;## Cách sử dụng&#10;&#10;### 1. Khởi động toàn bộ hệ thống&#10;&#10;```bash&#10;docker-compose -f docker-compose.prod.yml up -d --build&#10;```&#10;&#10;Nginx sẽ tự động khởi động cùng với các services khác.&#10;&#10;### 2. Truy cập API qua Nginx&#10;&#10;**Production (recommend):**&#10;```bash&#10;# Qua Nginx - Port 80&#10;curl http://localhost/api/auth/login&#10;curl http://localhost/api/stations&#10;curl http://localhost/api/bookings&#10;curl http://localhost/api/billings&#10;```&#10;&#10;**Development (direct access):**&#10;```bash&#10;# Trực tiếp qua API Gateway - Port 9000&#10;curl http://localhost:9000/api/auth/login&#10;curl http://localhost:9000/api/stations&#10;```&#10;&#10;### 3. Truy cập Swagger UI qua Nginx&#10;&#10;```&#10;http://localhost/auth-user/swagger-ui/index.html&#10;http://localhost/station/swagger-ui/index.html&#10;http://localhost/booking/swagger-ui/index.html&#10;http://localhost/billing/swagger-ui/index.html&#10;```&#10;&#10;### 4. Health Check&#10;&#10;```bash&#10;# Nginx health&#10;curl http://localhost/health&#10;&#10;# API Gateway health qua Nginx&#10;curl http://localhost/api/actuator/health&#10;```&#10;&#10;## Port mapping&#10;&#10;| Service | Container Port | Host Port | Via Nginx |&#10;|---------|---------------|-----------|-----------|&#10;| Nginx | 80 | 80 | - |&#10;| API Gateway | 8080 | 9000 | ✓ |&#10;| Auth-User | 8080 | 9001 | ✓ |&#10;| Station | 8080 | 9002 | ✓ |&#10;| Booking | 8080 | 9003 | ✓ |&#10;| Billing | 8080 | 9004 | ✓ |&#10;| Eureka | 8761 | 8761 | ✗ |&#10;&#10;## Tính năng Rate Limiting&#10;&#10;Nginx đã được cấu hình rate limiting:&#10;&#10;### API Endpoints&#10;- **Rate**: 100 requests/giây&#10;- **Burst**: 50 requests&#10;- **Connection limit**: 10 connections/IP&#10;&#10;### Auth Endpoints&#10;- **Rate**: 20 requests/giây&#10;- **Burst**: 10 requests&#10;- **Connection limit**: 5 connections/IP&#10;&#10;### Test rate limiting&#10;&#10;```bash&#10;# Gửi 150 requests nhanh liên tục&#10;for i in {1..150}; do curl http://localhost/api/stations &amp; done&#10;&#10;# Một số requests sẽ nhận 503 Service Temporarily Unavailable&#10;```&#10;&#10;## Logs và Monitoring&#10;&#10;### Xem logs Nginx&#10;&#10;```bash&#10;# Access logs&#10;docker logs nginx-proxy -f&#10;&#10;# Hoặc exec vào container&#10;docker exec nginx-proxy tail -f /var/log/nginx/access.log&#10;docker exec nginx-proxy tail -f /var/log/nginx/api_access.log&#10;```&#10;&#10;### Xem error logs&#10;&#10;```bash&#10;docker exec nginx-proxy tail -f /var/log/nginx/error.log&#10;docker exec nginx-proxy tail -f /var/log/nginx/api_error.log&#10;```&#10;&#10;### Kiểm tra cấu hình&#10;&#10;```bash&#10;# Test cấu hình&#10;docker exec nginx-proxy nginx -t&#10;&#10;# Reload cấu hình (không downtime)&#10;docker exec nginx-proxy nginx -s reload&#10;```&#10;&#10;## Tùy chỉnh cấu hình&#10;&#10;### 1. Thay đổi Rate Limit&#10;&#10;Sửa file `nginx/nginx.conf`:&#10;&#10;```nginx&#10;# Tăng limit cho API&#10;limit_req_zone $binary_remote_addr zone=api_limit:10m rate=200r/s;&#10;&#10;# Giảm limit cho auth&#10;limit_req_zone $binary_remote_addr zone=auth_limit:10m rate=10r/s;&#10;```&#10;&#10;Sau đó reload:&#10;```bash&#10;docker-compose -f docker-compose.prod.yml restart nginx&#10;```&#10;&#10;### 2. Thêm SSL/TLS&#10;&#10;Uncomment phần HTTPS trong `nginx/nginx.conf` và mount certificate:&#10;&#10;```yaml&#10;# docker-compose.prod.yml&#10;nginx:&#10;  volumes:&#10;    - ./ssl:/etc/nginx/ssl:ro&#10;```&#10;&#10;### 3. Load Balance nhiều API Gateway&#10;&#10;Thêm instances trong `nginx/nginx.conf`:&#10;&#10;```nginx&#10;upstream api_gateway {&#10;    least_conn;&#10;    server api-gateway-1:8080;&#10;    server api-gateway-2:8080;&#10;    server api-gateway-3:8080;&#10;}&#10;```&#10;&#10;Và scale API Gateway:&#10;```bash&#10;docker-compose -f docker-compose.prod.yml up -d --scale gateway=3&#10;```&#10;&#10;## Troubleshooting&#10;&#10;### Nginx không start&#10;&#10;```bash&#10;# Xem logs&#10;docker logs nginx-proxy&#10;&#10;# Kiểm tra cấu hình&#10;docker exec nginx-proxy nginx -t&#10;```&#10;&#10;### 502 Bad Gateway&#10;&#10;Nguyên nhân:&#10;- API Gateway chưa ready → Đợi health check pass&#10;- API Gateway crashed → `docker logs api-gateway`&#10;- Network issue → `docker network inspect evnet`&#10;&#10;### 503 Service Unavailable&#10;&#10;Nguyên nhân:&#10;- Rate limit bị hit → Giảm request rate hoặc tăng limit&#10;- Upstream unavailable → Kiểm tra API Gateway status&#10;&#10;### Không thể kết nối port 80&#10;&#10;```bash&#10;# Kiểm tra port 80 có bị chiếm không&#10;netstat -ano | findstr :80&#10;&#10;# Hoặc dùng PowerShell&#10;Get-NetTCPConnection -LocalPort 80&#10;```&#10;&#10;## Migration từ Direct Access sang Nginx&#10;&#10;### Frontend cần update URLs&#10;&#10;**Trước:**&#10;```javascript&#10;const API_URL = 'http://localhost:9000/api'&#10;```&#10;&#10;**Sau:**&#10;```javascript&#10;// Production - qua Nginx&#10;const API_URL = 'http://your-domain.com/api'&#10;&#10;// hoặc development&#10;const API_URL = 'http://localhost/api'&#10;```&#10;&#10;### Postman/API Testing&#10;&#10;Update base URL trong collections:&#10;- Development: `http://localhost/api`&#10;- Production: `https://your-domain.com/api`&#10;&#10;## Best Practices&#10;&#10;### Production Environment&#10;&#10;1. **Enable HTTPS**: Luôn dùng SSL/TLS trong production&#10;2. **Chặn Swagger UI**: Return 403 cho `/swagger-ui` paths&#10;3. **Log Rotation**: Setup logrotate cho nginx logs&#10;4. **Monitoring**: Monitor 5xx errors, response time&#10;5. **Backup Config**: Backup cấu hình Nginx thường xuyên&#10;6. **Security**: Setup fail2ban để chặn IP độc hại&#10;&#10;### Development Environment&#10;&#10;1. Có thể bỏ qua Nginx, truy cập trực tiếp API Gateway port 9000&#10;2. Swagger UI nên accessible qua Nginx để test routing&#10;3. Rate limiting có thể set cao hơn&#10;&#10;## Performance Tuning&#10;&#10;### Worker Processes&#10;```nginx&#10;# Mặc định auto = số CPU cores&#10;worker_processes auto;&#10;```&#10;&#10;### Worker Connections&#10;```nginx&#10;events {&#10;    worker_connections 2048;  # Tăng nếu nhiều concurrent users&#10;}&#10;```&#10;&#10;### Upload Size&#10;```nginx&#10;http {&#10;    client_max_body_size 20M;  # Tăng nếu upload files lớn&#10;}&#10;```&#10;&#10;## Kết luận&#10;&#10;Việc thêm Nginx là **RẤT HỢP LÝ** vì:&#10;&#10;✅ **Bảo mật**: Rate limiting, security headers, chống DDoS  &#10;✅ **Hiệu năng**: Compression, caching, connection pooling  &#10;✅ **Scalability**: Dễ dàng scale API Gateway instances  &#10;✅ **Monitoring**: Centralized logging và metrics  &#10;✅ **SSL/TLS**: Termination tại Nginx, backend không lo HTTPS  &#10;✅ **Flexibility**: Dễ dàng thay đổi backend mà không ảnh hưởng client  &#10;&#10;Trong production, nên routing tất cả traffic qua Nginx (port 80/443) thay vì truy cập trực tiếp API Gateway.&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/Dockerfile" />
              <option name="updatedContent" value="# Dockerfile for Nginx&#10;# Nginx reverse proxy cho API Gateway&#10;&#10;FROM nginx:1.25-alpine&#10;&#10;# Copy cấu hình&#10;COPY nginx.conf /etc/nginx/nginx.conf&#10;COPY conf.d/ /etc/nginx/conf.d/&#10;&#10;# Tạo thư mục log&#10;RUN mkdir -p /var/log/nginx&#10;&#10;# Health check&#10;HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \&#10;    CMD wget --quiet --tries=1 --spider http://localhost/health || exit 1&#10;&#10;# Expose port&#10;EXPOSE 80 443&#10;&#10;# Start nginx&#10;CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/QUICKSTART.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/QUICKSTART.md" />
              <option name="updatedContent" value="# Quick Start Guide - Nginx cho API Gateway&#10;&#10;## Khởi động nhanh (5 phút)&#10;&#10;### Bước 1: Build và Start&#10;&#10;```bash&#10;# Từ thư mục gốc BE_EVBSSMS&#10;docker-compose -f docker-compose.prod.yml up -d --build&#10;```&#10;&#10;Chờ khoảng 2-3 phút để tất cả services khởi động.&#10;&#10;### Bước 2: Kiểm tra Status&#10;&#10;```bash&#10;# Xem tất cả containers&#10;docker-compose -f docker-compose.prod.yml ps&#10;&#10;# Kiểm tra Nginx&#10;curl http://localhost/health&#10;```&#10;&#10;Kết quả mong đợi: `healthy`&#10;&#10;### Bước 3: Test API qua Nginx&#10;&#10;```bash&#10;# Test API Gateway health&#10;curl http://localhost/api/actuator/health&#10;&#10;# Test Auth Service&#10;curl http://localhost/auth-user/v3/api-docs&#10;&#10;# Test Station Service&#10;curl http://localhost/station/v3/api-docs&#10;```&#10;&#10;### Bước 4: Truy cập Swagger UI&#10;&#10;Mở trình duyệt và truy cập:&#10;&#10;**Via Nginx (Production)**&#10;- Auth: http://localhost/auth-user/swagger-ui/index.html&#10;- Station: http://localhost/station/swagger-ui/index.html&#10;- Booking: http://localhost/booking/swagger-ui/index.html&#10;- Billing: http://localhost/billing/swagger-ui/index.html&#10;&#10;**Direct Access (Development)**&#10;- Auth: http://localhost:9001/swagger-ui/index.html&#10;- Station: http://localhost:9002/swagger-ui/index.html&#10;- Booking: http://localhost:9003/swagger-ui/index.html&#10;- Billing: http://localhost:9004/swagger-ui/index.html&#10;&#10;### Bước 5: Test Rate Limiting&#10;&#10;Chạy script test:&#10;&#10;**Windows:**&#10;```bash&#10;cd nginx&#10;test-nginx.bat&#10;```&#10;&#10;**Linux/Mac:**&#10;```bash&#10;cd nginx&#10;chmod +x test-nginx.sh&#10;./test-nginx.sh&#10;```&#10;&#10;## Các lệnh thường dùng&#10;&#10;### Quản lý Services&#10;&#10;```bash&#10;# Start&#10;docker-compose -f docker-compose.prod.yml up -d&#10;&#10;# Stop&#10;docker-compose -f docker-compose.prod.yml down&#10;&#10;# Restart Nginx&#10;docker-compose -f docker-compose.prod.yml restart nginx&#10;&#10;# Xem logs Nginx&#10;docker logs nginx-proxy -f&#10;&#10;# Xem logs tất cả services&#10;docker-compose -f docker-compose.prod.yml logs -f&#10;```&#10;&#10;### Kiểm tra Nginx&#10;&#10;```bash&#10;# Test cấu hình&#10;docker exec nginx-proxy nginx -t&#10;&#10;# Reload cấu hình (không downtime)&#10;docker exec nginx-proxy nginx -s reload&#10;&#10;# Xem access logs&#10;docker exec nginx-proxy tail -f /var/log/nginx/access.log&#10;&#10;# Xem error logs&#10;docker exec nginx-proxy tail -f /var/log/nginx/error.log&#10;```&#10;&#10;### Health Checks&#10;&#10;```bash&#10;# Nginx&#10;curl http://localhost/health&#10;&#10;# API Gateway&#10;curl http://localhost/api/actuator/health&#10;&#10;# Eureka (xem services đã đăng ký)&#10;http://localhost:8761&#10;```&#10;&#10;## Troubleshooting nhanh&#10;&#10;### Nginx không start&#10;&#10;**Lỗi:** Port 80 đã bị chiếm&#10;&#10;```bash&#10;# Windows - Tìm process đang dùng port 80&#10;netstat -ano | findstr :80&#10;&#10;# Kill process&#10;taskkill /PID &lt;PID&gt; /F&#10;```&#10;&#10;### 502 Bad Gateway&#10;&#10;**Nguyên nhân:** API Gateway chưa sẵn sàng&#10;&#10;```bash&#10;# Kiểm tra API Gateway&#10;docker logs api-gateway&#10;&#10;# Chờ Gateway ready&#10;docker-compose -f docker-compose.prod.yml logs -f gateway&#10;```&#10;&#10;### 503 Service Unavailable&#10;&#10;**Nguyên nhân 1:** Services chưa đăng ký với Eureka&#10;&#10;```bash&#10;# Kiểm tra Eureka&#10;http://localhost:8761&#10;&#10;# Restart service&#10;docker-compose -f docker-compose.prod.yml restart auth-user&#10;```&#10;&#10;**Nguyên nhân 2:** Rate limiting&#10;&#10;→ Đây là behavior đúng khi bạn gửi quá nhiều requests&#10;&#10;### Swagger UI không load&#10;&#10;**Kiểm tra routing:**&#10;&#10;```bash&#10;# Test trực tiếp service&#10;curl http://localhost:9001/swagger-ui/index.html&#10;&#10;# Test qua Gateway&#10;curl http://localhost:9000/auth-user/swagger-ui/index.html&#10;&#10;# Test qua Nginx&#10;curl http://localhost/auth-user/swagger-ui/index.html&#10;```&#10;&#10;## Production Checklist&#10;&#10;Trước khi deploy lên production, đảm bảo:&#10;&#10;- [ ] Đã thêm SSL certificate&#10;- [ ] Đã chặn Swagger UI endpoints&#10;- [ ] Đã điều chỉnh rate limits phù hợp&#10;- [ ] Đã setup log rotation&#10;- [ ] Đã setup monitoring và alerts&#10;- [ ] Đã test failover scenarios&#10;- [ ] Đã backup cấu hình Nginx&#10;- [ ] Đã document các environment variables&#10;&#10;## URLs Tham khảo nhanh&#10;&#10;### Via Nginx (Port 80) - Production&#10;| Service | URL |&#10;|---------|-----|&#10;| Health Check | http://localhost/health |&#10;| API Gateway | http://localhost/api/* |&#10;| Auth Swagger | http://localhost/auth-user/swagger-ui/index.html |&#10;| Station Swagger | http://localhost/station/swagger-ui/index.html |&#10;| Booking Swagger | http://localhost/booking/swagger-ui/index.html |&#10;| Billing Swagger | http://localhost/billing/swagger-ui/index.html |&#10;&#10;### Direct Access - Development&#10;| Service | Port | URL |&#10;|---------|------|-----|&#10;| Nginx | 80 | http://localhost |&#10;| API Gateway | 9000 | http://localhost:9000 |&#10;| Auth-User | 9001 | http://localhost:9001 |&#10;| Station | 9002 | http://localhost:9002 |&#10;| Booking | 9003 | http://localhost:9003 |&#10;| Billing | 9004 | http://localhost:9004 |&#10;| Eureka | 8761 | http://localhost:8761 |&#10;| MailHog | 8025 | http://localhost:8025 |&#10;&#10;## Hỗ trợ&#10;&#10;Để biết thêm chi tiết, xem:&#10;- [README.md](README.md) - Tài liệu kỹ thuật đầy đủ&#10;- [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) - Hướng dẫn triển khai chi tiết&#10;- [CHANGELOG.md](CHANGELOG.md) - Lịch sử thay đổi và tổng quan&#10;&#10;Nếu gặp vấn đề, kiểm tra logs:&#10;```bash&#10;docker logs nginx-proxy&#10;docker logs api-gateway&#10;docker-compose -f docker-compose.prod.yml logs&#10;```&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/README.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/README.md" />
              <option name="updatedContent" value="# Nginx Reverse Proxy&#10;&#10;Nginx đóng vai trò reverse proxy phía trước API Gateway, cung cấp các tính năng bảo mật, load balancing, và tối ưu hiệu năng.&#10;&#10;## Kiến trúc&#10;&#10;```&#10;Client (Browser/Mobile App)&#10;    ↓&#10;Nginx:80 (Reverse Proxy)&#10;    ↓&#10;API Gateway:8080&#10;    ↓&#10;[Auth-User, Station, Booking, Billing Services]&#10;```&#10;&#10;## Tính năng&#10;&#10;### 1. Reverse Proxy&#10;- Forward tất cả requests từ client đến API Gateway&#10;- Ẩn cấu trúc hệ thống backend khỏi client&#10;&#10;### 2. Rate Limiting&#10;- API endpoints: 100 requests/giây với burst 50&#10;- Auth endpoints: 20 requests/giây với burst 10&#10;- Connection limit: 10 connections/IP&#10;&#10;### 3. Security&#10;- Headers bảo mật: X-Frame-Options, X-Content-Type-Options, X-XSS-Protection&#10;- Rate limiting chống DDoS&#10;- SSL/TLS termination (khi có certificate)&#10;&#10;### 4. Performance&#10;- Gzip compression cho tất cả response&#10;- HTTP/1.1 keep-alive connections&#10;- Connection pooling với upstream&#10;- Buffering tối ưu&#10;&#10;### 5. Load Balancing&#10;- Strategy: Least connections&#10;- Health checks cho upstream servers&#10;- Failover tự động khi API Gateway lỗi&#10;&#10;## Cấu hình&#10;&#10;### nginx.conf&#10;File cấu hình chính, định nghĩa:&#10;- Worker processes&#10;- Compression settings&#10;- Security headers&#10;- Rate limiting zones&#10;- Upstream servers&#10;&#10;### conf.d/api.conf&#10;Cấu hình routing chi tiết:&#10;- `/api/*` - Tất cả API endpoints&#10;- `/api/auth/*` - Auth endpoints với rate limit nghiêm ngặt&#10;- `/{service}/swagger-ui/*` - Swagger UI (dev only)&#10;- `/ws/*` - WebSocket support&#10;&#10;### conf.d/proxy_params.conf&#10;Common proxy settings:&#10;- Headers forwarding&#10;- Timeouts&#10;- Buffering&#10;- Rate limiting&#10;&#10;## URL Mapping&#10;&#10;### Production (qua Nginx)&#10;```&#10;http://localhost/api/auth/login           → API Gateway → Auth-User Service&#10;http://localhost/api/stations             → API Gateway → Station Service&#10;http://localhost/api/bookings             → API Gateway → Booking Service&#10;http://localhost/api/billings             → API Gateway → Billing Service&#10;```&#10;&#10;### Development (truy cập trực tiếp)&#10;```&#10;http://localhost:9000/api/auth/login      → API Gateway trực tiếp&#10;http://localhost:9001/api/users           → Auth-User Service trực tiếp&#10;```&#10;&#10;### Swagger UI (qua Nginx)&#10;```&#10;http://localhost/auth-user/swagger-ui/index.html&#10;http://localhost/station/swagger-ui/index.html&#10;http://localhost/booking/swagger-ui/index.html&#10;http://localhost/billing/swagger-ui/index.html&#10;```&#10;&#10;## Chạy Nginx&#10;&#10;### Với Docker Compose&#10;```bash&#10;# Chạy toàn bộ hệ thống kèm Nginx&#10;docker-compose -f docker-compose.prod.yml up -d --build&#10;&#10;# Chỉ chạy Nginx&#10;docker-compose -f docker-compose.prod.yml up -d nginx&#10;&#10;# Xem logs&#10;docker-compose -f docker-compose.prod.yml logs -f nginx&#10;&#10;# Restart Nginx&#10;docker-compose -f docker-compose.prod.yml restart nginx&#10;```&#10;&#10;### Standalone Docker&#10;```bash&#10;# Build image&#10;docker build -t evbss-nginx ./nginx&#10;&#10;# Run container&#10;docker run -d \&#10;  --name nginx-proxy \&#10;  --network evnet \&#10;  -p 80:80 \&#10;  -p 443:443 \&#10;  evbss-nginx&#10;```&#10;&#10;## Health Check&#10;&#10;```bash&#10;# Nginx health&#10;curl http://localhost/health&#10;&#10;# Output: &quot;Nginx is healthy&quot;&#10;```&#10;&#10;## Logs&#10;&#10;### Access logs&#10;```bash&#10;docker exec nginx-proxy tail -f /var/log/nginx/access.log&#10;docker exec nginx-proxy tail -f /var/log/nginx/api_access.log&#10;```&#10;&#10;### Error logs&#10;```bash&#10;docker exec nginx-proxy tail -f /var/log/nginx/error.log&#10;docker exec nginx-proxy tail -f /var/log/nginx/api_error.log&#10;```&#10;&#10;## Monitoring&#10;&#10;### Kiểm tra cấu hình&#10;```bash&#10;# Test cấu hình trước khi apply&#10;docker exec nginx-proxy nginx -t&#10;&#10;# Reload cấu hình không downtime&#10;docker exec nginx-proxy nginx -s reload&#10;```&#10;&#10;### Kiểm tra connections&#10;```bash&#10;# Số connections đang active&#10;docker exec nginx-proxy ss -an | grep :80 | wc -l&#10;```&#10;&#10;## SSL/TLS Configuration&#10;&#10;Khi có SSL certificate, uncomment phần HTTPS trong `nginx.conf`:&#10;&#10;```nginx&#10;server {&#10;    listen 443 ssl http2;&#10;    listen [::]:443 ssl http2;&#10;    server_name your-domain.com;&#10;&#10;    ssl_certificate /etc/nginx/ssl/cert.pem;&#10;    ssl_certificate_key /etc/nginx/ssl/key.pem;&#10;    &#10;    # ... rest of config&#10;}&#10;```&#10;&#10;Thêm volume cho certificates trong docker-compose:&#10;```yaml&#10;nginx:&#10;  volumes:&#10;    - ./ssl:/etc/nginx/ssl:ro&#10;```&#10;&#10;## Rate Limiting Tuning&#10;&#10;Điều chỉnh trong `nginx.conf`:&#10;&#10;```nginx&#10;# Tăng limit cho API&#10;limit_req_zone $binary_remote_addr zone=api_limit:10m rate=200r/s;&#10;&#10;# Giảm limit cho auth&#10;limit_req_zone $binary_remote_addr zone=auth_limit:10m rate=10r/s;&#10;```&#10;&#10;## Load Balancing Multiple API Gateway Instances&#10;&#10;Thêm instances vào upstream trong `nginx.conf`:&#10;&#10;```nginx&#10;upstream api_gateway {&#10;    least_conn;&#10;    server api-gateway-1:8080 max_fails=3 fail_timeout=30s;&#10;    server api-gateway-2:8080 max_fails=3 fail_timeout=30s;&#10;    server api-gateway-3:8080 max_fails=3 fail_timeout=30s;&#10;    keepalive 32;&#10;}&#10;```&#10;&#10;## Troubleshooting&#10;&#10;### Nginx không start&#10;```bash&#10;# Kiểm tra logs&#10;docker logs nginx-proxy&#10;&#10;# Kiểm tra cấu hình&#10;docker exec nginx-proxy nginx -t&#10;```&#10;&#10;### 502 Bad Gateway&#10;- API Gateway chưa ready → Đợi health check&#10;- API Gateway crashed → Kiểm tra logs gateway&#10;- Network issue → Kiểm tra Docker network&#10;&#10;### 503 Service Unavailable&#10;- Eureka chưa ready&#10;- Services chưa đăng ký với Eureka&#10;- Rate limit quá thấp&#10;&#10;### Không thể kết nối&#10;```bash&#10;# Kiểm tra Nginx đang chạy&#10;docker ps | grep nginx&#10;&#10;# Kiểm tra port 80 có được bind&#10;netstat -an | grep :80&#10;&#10;# Kiểm tra network&#10;docker network inspect evnet&#10;```&#10;&#10;## Production Checklist&#10;&#10;- [ ] Enable HTTPS với SSL certificate&#10;- [ ] Chặn Swagger UI trong production (return 403)&#10;- [ ] Điều chỉnh rate limits phù hợp&#10;- [ ] Setup log rotation&#10;- [ ] Monitor Nginx metrics (access logs, error rate)&#10;- [ ] Backup cấu hình Nginx&#10;- [ ] Setup alerts cho 5xx errors&#10;- [ ] Enable fail2ban để chặn IP độc hại&#10;&#10;## Performance Tuning&#10;&#10;### Worker processes&#10;```nginx&#10;# Mặc định: auto (= số CPU cores)&#10;worker_processes auto;&#10;```&#10;&#10;### Worker connections&#10;```nginx&#10;events {&#10;    worker_connections 2048;  # Tăng nếu cần handle nhiều connections&#10;}&#10;```&#10;&#10;### Client body size&#10;```nginx&#10;http {&#10;    client_max_body_size 20M;  # Tăng nếu cần upload files lớn&#10;}&#10;```&#10;&#10;## Tài liệu tham khảo&#10;&#10;- [Nginx Official Docs](https://nginx.org/en/docs/)&#10;- [Nginx Reverse Proxy Guide](https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/)&#10;- [Nginx Rate Limiting](https://www.nginx.com/blog/rate-limiting-nginx/)&#10;- [Nginx SSL Configuration](https://nginx.org/en/docs/http/configuring_https_servers.html)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/conf.d/api.conf">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/conf.d/api.conf" />
              <option name="updatedContent" value="# api.conf&#10;# Cấu hình routing chi tiết cho API Gateway&#10;&#10;server {&#10;    listen 80;&#10;    server_name localhost;&#10;&#10;    # Logs&#10;    access_log /var/log/nginx/api_access.log main;&#10;    error_log /var/log/nginx/api_error.log warn;&#10;&#10;    # Health check&#10;    location /health {&#10;        access_log off;&#10;        return 200 &quot;Nginx is healthy\n&quot;;&#10;        add_header Content-Type text/plain;&#10;    }&#10;&#10;    # API Gateway - Tất cả API requests&#10;    location /api/ {&#10;        # Rate limiting cho API&#10;        limit_req zone=api_limit burst=50 nodelay;&#10;        limit_conn addr 10;&#10;&#10;        proxy_pass http://api_gateway;&#10;        proxy_set_header Host $host;&#10;        proxy_set_header X-Real-IP $remote_addr;&#10;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&#10;        proxy_set_header X-Forwarded-Proto $scheme;&#10;&#10;        # Timeouts cho API&#10;        proxy_connect_timeout 30s;&#10;        proxy_send_timeout 30s;&#10;        proxy_read_timeout 30s;&#10;&#10;        # HTTP/1.1 để support keep-alive&#10;        proxy_http_version 1.1;&#10;        proxy_set_header Connection &quot;&quot;;&#10;    }&#10;&#10;    # Auth endpoints - Rate limiting nghiêm ngặt hơn&#10;    location ~ ^/api/(auth|login|register)/ {&#10;        limit_req zone=auth_limit burst=10 nodelay;&#10;        limit_conn addr 5;&#10;&#10;        proxy_pass http://api_gateway;&#10;        proxy_set_header Host $host;&#10;        proxy_set_header X-Real-IP $remote_addr;&#10;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&#10;        proxy_set_header X-Forwarded-Proto $scheme;&#10;&#10;        proxy_connect_timeout 15s;&#10;        proxy_send_timeout 15s;&#10;        proxy_read_timeout 15s;&#10;&#10;        proxy_http_version 1.1;&#10;        proxy_set_header Connection &quot;&quot;;&#10;    }&#10;&#10;    # Swagger UI - Chỉ cho dev/staging&#10;    location ~ ^/(auth-user|station|booking|billing)/swagger-ui/ {&#10;        # Có thể chặn trong production bằng cách comment hoặc return 403&#10;        # return 403;&#10;&#10;        proxy_pass http://api_gateway;&#10;        proxy_set_header Host $host;&#10;        proxy_set_header X-Real-IP $remote_addr;&#10;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&#10;        proxy_set_header X-Forwarded-Proto $scheme;&#10;&#10;        proxy_http_version 1.1;&#10;        proxy_set_header Connection &quot;&quot;;&#10;    }&#10;&#10;    # API Docs&#10;    location ~ ^/(auth-user|station|booking|billing)/v3/api-docs {&#10;        # Có thể chặn trong production&#10;        # return 403;&#10;&#10;        proxy_pass http://api_gateway;&#10;        proxy_set_header Host $host;&#10;        proxy_set_header X-Real-IP $remote_addr;&#10;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&#10;        proxy_set_header X-Forwarded-Proto $scheme;&#10;&#10;        proxy_http_version 1.1;&#10;        proxy_set_header Connection &quot;&quot;;&#10;    }&#10;&#10;    # WebSocket support (nếu có real-time features)&#10;    location /ws/ {&#10;        proxy_pass http://api_gateway;&#10;        proxy_http_version 1.1;&#10;        proxy_set_header Upgrade $http_upgrade;&#10;        proxy_set_header Connection &quot;upgrade&quot;;&#10;        proxy_set_header Host $host;&#10;        proxy_set_header X-Real-IP $remote_addr;&#10;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&#10;        proxy_set_header X-Forwarded-Proto $scheme;&#10;&#10;        # Timeouts cho WebSocket&#10;        proxy_connect_timeout 7d;&#10;        proxy_send_timeout 7d;&#10;        proxy_read_timeout 7d;&#10;    }&#10;&#10;    # Static files cho frontend (nếu có)&#10;    # location / {&#10;    #     root /usr/share/nginx/html;&#10;    #     try_files $uri $uri/ /index.html;&#10;    # }&#10;&#10;    # Error pages&#10;    error_page 500 502 503 504 /50x.html;&#10;    location = /50x.html {&#10;        root /usr/share/nginx/html;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/conf.d/proxy_params.conf">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/conf.d/proxy_params.conf" />
              <option name="updatedContent" value="# proxy_params.conf&#10;# Common proxy settings cho tất cả upstream services&#10;&#10;proxy_pass http://api_gateway;&#10;&#10;# Headers&#10;proxy_set_header Host $host;&#10;proxy_set_header X-Real-IP $remote_addr;&#10;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&#10;proxy_set_header X-Forwarded-Proto $scheme;&#10;proxy_set_header X-Forwarded-Host $host;&#10;proxy_set_header X-Forwarded-Port $server_port;&#10;&#10;# Timeouts&#10;proxy_connect_timeout 60s;&#10;proxy_send_timeout 60s;&#10;proxy_read_timeout 60s;&#10;&#10;# Buffering&#10;proxy_buffering on;&#10;proxy_buffer_size 4k;&#10;proxy_buffers 8 4k;&#10;proxy_busy_buffers_size 8k;&#10;&#10;# HTTP version&#10;proxy_http_version 1.1;&#10;proxy_set_header Connection &quot;&quot;;&#10;&#10;# Rate limiting&#10;limit_req zone=api_limit burst=50 nodelay;&#10;limit_conn addr 10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/nginx.conf">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/nginx.conf" />
              <option name="updatedContent" value="# nginx.conf - Nginx Configuration cho EV Battery Swap Station MS&#10;# Đóng vai trò reverse proxy phía trước API Gateway&#10;# Xử lý: SSL/TLS, Rate Limiting, Compression, Static Content&#10;&#10;user nginx;&#10;worker_processes auto;&#10;error_log /var/log/nginx/error.log warn;&#10;pid /var/run/nginx.pid;&#10;&#10;events {&#10;    worker_connections 2048;&#10;    use epoll;&#10;    multi_accept on;&#10;}&#10;&#10;http {&#10;    include /etc/nginx/mime.types;&#10;    default_type application/octet-stream;&#10;&#10;    # Log format&#10;    log_format main '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '&#10;                    '$status $body_bytes_sent &quot;$http_referer&quot; '&#10;                    '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot; '&#10;                    'rt=$request_time uct=&quot;$upstream_connect_time&quot; '&#10;                    'uht=&quot;$upstream_header_time&quot; urt=&quot;$upstream_response_time&quot;';&#10;&#10;    access_log /var/log/nginx/access.log main;&#10;&#10;    # Performance settings&#10;    sendfile on;&#10;    tcp_nopush on;&#10;    tcp_nodelay on;&#10;    keepalive_timeout 65;&#10;    types_hash_max_size 2048;&#10;    client_max_body_size 20M;&#10;&#10;    # Compression&#10;    gzip on;&#10;    gzip_vary on;&#10;    gzip_proxied any;&#10;    gzip_comp_level 6;&#10;    gzip_types text/plain text/css text/xml text/javascript &#10;               application/json application/javascript application/xml+rss &#10;               application/rss+xml font/truetype font/opentype &#10;               application/vnd.ms-fontobject image/svg+xml;&#10;    gzip_disable &quot;msie6&quot;;&#10;&#10;    # Security headers&#10;    add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;&#10;    add_header X-Content-Type-Options &quot;nosniff&quot; always;&#10;    add_header X-XSS-Protection &quot;1; mode=block&quot; always;&#10;    add_header Referrer-Policy &quot;no-referrer-when-downgrade&quot; always;&#10;&#10;    # Rate limiting zones&#10;    limit_req_zone $binary_remote_addr zone=api_limit:10m rate=100r/s;&#10;    limit_req_zone $binary_remote_addr zone=auth_limit:10m rate=20r/s;&#10;    limit_conn_zone $binary_remote_addr zone=addr:10m;&#10;&#10;    # Upstream - API Gateway&#10;    upstream api_gateway {&#10;        least_conn;&#10;        server api-gateway:8080 max_fails=3 fail_timeout=30s;&#10;        # Có thể thêm nhiều instance để load balance&#10;        # server api-gateway-2:8080 max_fails=3 fail_timeout=30s;&#10;        keepalive 32;&#10;    }&#10;&#10;    # HTTP Server - Redirect to HTTPS (Production)&#10;    server {&#10;        listen 80;&#10;        listen [::]:80;&#10;        server_name _;&#10;&#10;        # Health check endpoint (không redirect)&#10;        location /health {&#10;            access_log off;&#10;            return 200 &quot;healthy\n&quot;;&#10;            add_header Content-Type text/plain;&#10;        }&#10;&#10;        # Redirect tất cả HTTP sang HTTPS (uncomment khi có SSL)&#10;        # return 301 https://$host$request_uri;&#10;&#10;        # Tạm thời forward đến API Gateway (dev/test)&#10;        location / {&#10;            proxy_pass http://api_gateway;&#10;            proxy_set_header Host $host;&#10;            proxy_set_header X-Real-IP $remote_addr;&#10;            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&#10;            proxy_set_header X-Forwarded-Proto $scheme;&#10;        }&#10;    }&#10;&#10;    # HTTPS Server (Production với SSL)&#10;    # Uncomment khi có certificate&#10;    # server {&#10;    #     listen 443 ssl http2;&#10;    #     listen [::]:443 ssl http2;&#10;    #     server_name your-domain.com;&#10;    # &#10;    #     # SSL Certificate&#10;    #     ssl_certificate /etc/nginx/ssl/cert.pem;&#10;    #     ssl_certificate_key /etc/nginx/ssl/key.pem;&#10;    #     ssl_protocols TLSv1.2 TLSv1.3;&#10;    #     ssl_ciphers HIGH:!aNULL:!MD5;&#10;    #     ssl_prefer_server_ciphers on;&#10;    #     ssl_session_cache shared:SSL:10m;&#10;    #     ssl_session_timeout 10m;&#10;    # &#10;    #     # API Gateway routes&#10;    #     location / {&#10;    #         include /etc/nginx/conf.d/proxy_params.conf;&#10;    #     }&#10;    # }&#10;&#10;    # Include additional configurations&#10;    include /etc/nginx/conf.d/*.conf;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/test-nginx.bat">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/test-nginx.bat" />
              <option name="updatedContent" value="@echo off&#10;REM test-nginx.bat&#10;REM Script để test Nginx reverse proxy trên Windows&#10;&#10;echo ==========================================&#10;echo Testing Nginx Reverse Proxy&#10;echo ==========================================&#10;echo.&#10;&#10;REM Test 1: Nginx Health Check&#10;echo Test 1: Nginx Health Check&#10;echo Testing http://localhost/health ...&#10;curl -s -o NUL -w &quot;HTTP Status: %%{http_code}\n&quot; http://localhost/health&#10;echo.&#10;&#10;REM Test 2: API Gateway via Nginx&#10;echo Test 2: API Gateway via Nginx&#10;echo Testing http://localhost/api/actuator/health ...&#10;curl -s -o NUL -w &quot;HTTP Status: %%{http_code}\n&quot; http://localhost/api/actuator/health&#10;echo.&#10;&#10;REM Test 3: Auth Service via Nginx&#10;echo Test 3: Auth Service via Nginx&#10;echo Testing http://localhost/auth-user/swagger-ui/index.html ...&#10;curl -s -o NUL -w &quot;HTTP Status: %%{http_code}\n&quot; http://localhost/auth-user/swagger-ui/index.html&#10;echo.&#10;&#10;REM Test 4: Station Service via Nginx&#10;echo Test 4: Station Service via Nginx&#10;echo Testing http://localhost/station/swagger-ui/index.html ...&#10;curl -s -o NUL -w &quot;HTTP Status: %%{http_code}\n&quot; http://localhost/station/swagger-ui/index.html&#10;echo.&#10;&#10;REM Test 5: Booking Service via Nginx&#10;echo Test 5: Booking Service via Nginx&#10;echo Testing http://localhost/booking/swagger-ui/index.html ...&#10;curl -s -o NUL -w &quot;HTTP Status: %%{http_code}\n&quot; http://localhost/booking/swagger-ui/index.html&#10;echo.&#10;&#10;REM Test 6: Billing Service via Nginx&#10;echo Test 6: Billing Service via Nginx&#10;echo Testing http://localhost/billing/swagger-ui/index.html ...&#10;curl -s -o NUL -w &quot;HTTP Status: %%{http_code}\n&quot; http://localhost/billing/swagger-ui/index.html&#10;echo.&#10;&#10;REM Test 7: Security Headers&#10;echo Test 7: Security Headers&#10;echo Checking security headers from http://localhost/health ...&#10;curl -I http://localhost/health | findstr /i &quot;X-Frame-Options X-Content-Type-Options X-XSS-Protection Referrer-Policy&quot;&#10;echo.&#10;&#10;REM Test 8: Rate Limiting&#10;echo Test 8: Rate Limiting Test&#10;echo Sending 30 fast requests to test rate limiting...&#10;echo This should trigger some 503 errors if rate limiting is working...&#10;for /L %%i in (1,1,30) do (&#10;    curl -s -o NUL http://localhost/api/actuator/health&#10;)&#10;echo Done. Check nginx logs for rate limit messages.&#10;echo.&#10;&#10;echo ==========================================&#10;echo Test Summary&#10;echo ==========================================&#10;echo.&#10;echo Nginx reverse proxy is configured and running.&#10;echo All API requests should go through Nginx (port 80) in production.&#10;echo.&#10;echo Access URLs via Nginx (port 80):&#10;echo   - Health: http://localhost/health&#10;echo   - APIs: http://localhost/api/*&#10;echo   - Auth Swagger: http://localhost/auth-user/swagger-ui/index.html&#10;echo   - Station Swagger: http://localhost/station/swagger-ui/index.html&#10;echo   - Booking Swagger: http://localhost/booking/swagger-ui/index.html&#10;echo   - Billing Swagger: http://localhost/billing/swagger-ui/index.html&#10;echo.&#10;echo Direct access ports (for development/debugging):&#10;echo   - API Gateway: http://localhost:9000&#10;echo   - Auth-User: http://localhost:9001&#10;echo   - Station: http://localhost:9002&#10;echo   - Booking: http://localhost:9003&#10;echo   - Billing: http://localhost:9004&#10;echo.&#10;echo View logs:&#10;echo   docker logs nginx-proxy -f&#10;echo   docker exec nginx-proxy tail -f /var/log/nginx/access.log&#10;echo.&#10;&#10;pause&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/nginx/test-nginx.sh">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/nginx/test-nginx.sh" />
              <option name="updatedContent" value="#!/bin/bash&#10;# test-nginx.sh&#10;# Script để test Nginx reverse proxy&#10;&#10;echo &quot;==========================================&quot;&#10;echo &quot;Testing Nginx Reverse Proxy&quot;&#10;echo &quot;==========================================&quot;&#10;echo &quot;&quot;&#10;&#10;# Colors&#10;GREEN='\033[0;32m'&#10;RED='\033[0;31m'&#10;YELLOW='\033[1;33m'&#10;NC='\033[0m' # No Color&#10;&#10;# Test 1: Nginx Health Check&#10;echo &quot;Test 1: Nginx Health Check&quot;&#10;echo -n &quot;Testing http://localhost/health ... &quot;&#10;response=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost/health)&#10;if [ &quot;$response&quot; = &quot;200&quot; ]; then&#10;    echo -e &quot;${GREEN}✓ PASS${NC} (HTTP $response)&quot;&#10;else&#10;    echo -e &quot;${RED}✗ FAIL${NC} (HTTP $response)&quot;&#10;fi&#10;echo &quot;&quot;&#10;&#10;# Test 2: API Gateway via Nginx&#10;echo &quot;Test 2: API Gateway via Nginx&quot;&#10;echo -n &quot;Testing http://localhost/api/actuator/health ... &quot;&#10;response=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost/api/actuator/health)&#10;if [ &quot;$response&quot; = &quot;200&quot; ]; then&#10;    echo -e &quot;${GREEN}✓ PASS${NC} (HTTP $response)&quot;&#10;else&#10;    echo -e &quot;${RED}✗ FAIL${NC} (HTTP $response)&quot;&#10;fi&#10;echo &quot;&quot;&#10;&#10;# Test 3: Auth Service via Nginx → Gateway&#10;echo &quot;Test 3: Auth Service via Nginx → Gateway&quot;&#10;echo -n &quot;Testing http://localhost/auth-user/swagger-ui/index.html ... &quot;&#10;response=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost/auth-user/swagger-ui/index.html)&#10;if [ &quot;$response&quot; = &quot;200&quot; ]; then&#10;    echo -e &quot;${GREEN}✓ PASS${NC} (HTTP $response)&quot;&#10;else&#10;    echo -e &quot;${RED}✗ FAIL${NC} (HTTP $response)&quot;&#10;fi&#10;echo &quot;&quot;&#10;&#10;# Test 4: Station Service via Nginx → Gateway&#10;echo &quot;Test 4: Station Service via Nginx → Gateway&quot;&#10;echo -n &quot;Testing http://localhost/station/swagger-ui/index.html ... &quot;&#10;response=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost/station/swagger-ui/index.html)&#10;if [ &quot;$response&quot; = &quot;200&quot; ]; then&#10;    echo -e &quot;${GREEN}✓ PASS${NC} (HTTP $response)&quot;&#10;else&#10;    echo -e &quot;${RED}✗ FAIL${NC} (HTTP $response)&quot;&#10;fi&#10;echo &quot;&quot;&#10;&#10;# Test 5: Booking Service via Nginx → Gateway&#10;echo &quot;Test 5: Booking Service via Nginx → Gateway&quot;&#10;echo -n &quot;Testing http://localhost/booking/swagger-ui/index.html ... &quot;&#10;response=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost/booking/swagger-ui/index.html)&#10;if [ &quot;$response&quot; = &quot;200&quot; ]; then&#10;    echo -e &quot;${GREEN}✓ PASS${NC} (HTTP $response)&quot;&#10;else&#10;    echo -e &quot;${RED}✗ FAIL${NC} (HTTP $response)&quot;&#10;fi&#10;echo &quot;&quot;&#10;&#10;# Test 6: Billing Service via Nginx → Gateway&#10;echo &quot;Test 6: Billing Service via Nginx → Gateway&quot;&#10;echo -n &quot;Testing http://localhost/billing/swagger-ui/index.html ... &quot;&#10;response=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost/billing/swagger-ui/index.html)&#10;if [ &quot;$response&quot; = &quot;200&quot; ]; then&#10;    echo -e &quot;${GREEN}✓ PASS${NC} (HTTP $response)&quot;&#10;else&#10;    echo -e &quot;${RED}✗ FAIL${NC} (HTTP $response)&quot;&#10;fi&#10;echo &quot;&quot;&#10;&#10;# Test 7: Rate Limiting (send 30 requests fast)&#10;echo &quot;Test 7: Rate Limiting&quot;&#10;echo &quot;Sending 30 fast requests to test rate limiting...&quot;&#10;success=0&#10;rate_limited=0&#10;for i in {1..30}; do&#10;    response=$(curl -s -o /dev/null -w &quot;%{http_code}&quot; http://localhost/api/actuator/health)&#10;    if [ &quot;$response&quot; = &quot;200&quot; ]; then&#10;        ((success++))&#10;    elif [ &quot;$response&quot; = &quot;503&quot; ]; then&#10;        ((rate_limited++))&#10;    fi&#10;done&#10;echo &quot;Results: ${GREEN}$success successful${NC}, ${YELLOW}$rate_limited rate-limited${NC}&quot;&#10;if [ &quot;$rate_limited&quot; -gt 0 ]; then&#10;    echo -e &quot;${GREEN}✓ Rate limiting is working${NC}&quot;&#10;else&#10;    echo -e &quot;${YELLOW}⚠ Rate limiting may not be working (all requests passed)${NC}&quot;&#10;fi&#10;echo &quot;&quot;&#10;&#10;# Test 8: Response Headers&#10;echo &quot;Test 8: Security Headers&quot;&#10;echo &quot;Checking security headers...&quot;&#10;headers=$(curl -s -I http://localhost/health)&#10;&#10;check_header() {&#10;    header=$1&#10;    if echo &quot;$headers&quot; | grep -q &quot;$header&quot;; then&#10;        echo -e &quot;  ${GREEN}✓${NC} $header present&quot;&#10;    else&#10;        echo -e &quot;  ${RED}✗${NC} $header missing&quot;&#10;    fi&#10;}&#10;&#10;check_header &quot;X-Frame-Options&quot;&#10;check_header &quot;X-Content-Type-Options&quot;&#10;check_header &quot;X-XSS-Protection&quot;&#10;check_header &quot;Referrer-Policy&quot;&#10;echo &quot;&quot;&#10;&#10;# Test 9: Compression&#10;echo &quot;Test 9: Gzip Compression&quot;&#10;echo -n &quot;Checking if gzip is enabled ... &quot;&#10;if curl -s -I -H &quot;Accept-Encoding: gzip&quot; http://localhost/health | grep -q &quot;Content-Encoding: gzip&quot;; then&#10;    echo -e &quot;${GREEN}✓ PASS${NC} (gzip enabled)&quot;&#10;else&#10;    echo -e &quot;${YELLOW}⚠ WARN${NC} (gzip not detected, may be disabled for small responses)&quot;&#10;fi&#10;echo &quot;&quot;&#10;&#10;# Summary&#10;echo &quot;==========================================&quot;&#10;echo &quot;Test Summary&quot;&#10;echo &quot;==========================================&quot;&#10;echo &quot;Nginx reverse proxy is configured and running.&quot;&#10;echo &quot;All API requests should go through Nginx (port 80) in production.&quot;&#10;echo &quot;&quot;&#10;echo &quot;Direct access ports (for development/debugging):&quot;&#10;echo &quot;  - API Gateway: http://localhost:9000&quot;&#10;echo &quot;  - Auth-User: http://localhost:9001&quot;&#10;echo &quot;  - Station: http://localhost:9002&quot;&#10;echo &quot;  - Booking: http://localhost:9003&quot;&#10;echo &quot;  - Billing: http://localhost:9004&quot;&#10;echo &quot;&quot;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/notification/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/notification/Dockerfile" />
              <option name="originalContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]&#10;" />
              <option name="updatedContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./notification/target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/notification/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/notification/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.6&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/notification/src/main/resources/application.properties">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/notification/src/main/resources/application.properties" />
              <option name="originalContent" value="spring.application.name=code&#10;" />
              <option name="updatedContent" value="spring.application.name=notification-service&#10;&#10;# Server port&#10;server.port=8085&#10;&#10;# Database Configuration&#10;spring.datasource.url=jdbc:mysql://localhost:3306/ev_battery_swapstation_ms_notification_db?createDatabaseIfNotExist=true&amp;useSSL=false&amp;serverTimezone=UTC&#10;spring.datasource.username=root&#10;spring.datasource.password=&#10;spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver&#10;&#10;# JPA/Hibernate&#10;spring.jpa.hibernate.ddl-auto=update&#10;spring.jpa.show-sql=true&#10;spring.jpa.properties.hibernate.format_sql=true&#10;spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect&#10;&#10;# Eureka Client Configuration&#10;eureka.client.service-url.defaultZone=http://localhost:8761/eureka/&#10;eureka.client.register-with-eureka=true&#10;eureka.client.fetch-registry=true&#10;eureka.instance.prefer-ip-address=true&#10;&#10;# Actuator&#10;management.endpoints.web.exposure.include=*&#10;management.endpoint.health.show-details=always&#10;&#10;# Logging&#10;logging.level.com.notification=DEBUG&#10;logging.level.org.springframework.web=INFO&#10;logging.level.org.hibernate=ERROR" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>
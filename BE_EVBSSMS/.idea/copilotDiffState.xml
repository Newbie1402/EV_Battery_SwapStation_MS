<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/DEBUG_JWT_ENDPOINTS.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/DEBUG_JWT_ENDPOINTS.md" />
              <option name="updatedContent" value="#  Debug JWT Secret - Hướng dẫn sử dụng&#10;&#10;## Mục đích&#10;Kiểm tra JWT secret có giống nhau giữa `auth-user` và `api-gateway` hay không.&#10;&#10;## Debug Endpoints (CHỈ DÙNG TRONG DEV)&#10;&#10;### 1. Kiểm tra JWT secret trong auth-user&#10;```bash&#10;curl http://localhost:9001/debug/jwt-info&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;service&quot;: &quot;auth-user&quot;,&#10;  &quot;secretLength&quot;: 57,&#10;  &quot;secretFirst10Chars&quot;: &quot;yourSecret&quot;,&#10;  &quot;secretLast10Chars&quot;: &quot;Algorithm&quot;,&#10;  &quot;secretHashCode&quot;: 1234567890&#10;}&#10;```&#10;&#10;### 2. Kiểm tra JWT secret trong api-gateway&#10;```bash&#10;curl http://localhost:9000/debug/jwt-info&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;secretLength&quot;: 57,&#10;  &quot;secretFirst10Chars&quot;: &quot;yourSecret&quot;,&#10;  &quot;secretLast10Chars&quot;: &quot;Algorithm&quot;,&#10;  &quot;secretHashCode&quot;: 1234567890&#10;}&#10;```&#10;&#10;## So sánh kết quả&#10;&#10;CẢ HAI response phải GIỐNG NHAU:&#10;- ✅ `secretLength` phải bằng nhau&#10;- ✅ `secretFirst10Chars` phải giống nhau&#10;- ✅ `secretLast10Chars` phải giống nhau&#10;- ✅ `secretHashCode` phải bằng nhau&#10;&#10;## Ví dụ&#10;&#10;### ✅ Trường hợp ĐÚNG (JWT secret giống nhau)&#10;&#10;**Auth-user:**&#10;```json&#10;{&#10;  &quot;service&quot;: &quot;auth-user&quot;,&#10;  &quot;secretLength&quot;: 57,&#10;  &quot;secretFirst10Chars&quot;: &quot;yourSecret&quot;,&#10;  &quot;secretLast10Chars&quot;: &quot;Algorithm&quot;,&#10;  &quot;secretHashCode&quot;: -123456789&#10;}&#10;```&#10;&#10;**API Gateway:**&#10;```json&#10;{&#10;  &quot;secretLength&quot;: 57,&#10;  &quot;secretFirst10Chars&quot;: &quot;yourSecret&quot;,&#10;  &quot;secretLast10Chars&quot;: &quot;Algorithm&quot;,&#10;  &quot;secretHashCode&quot;: -123456789&#10;}&#10;```&#10;&#10;→ **OK!** JWT secret giống nhau. Token sẽ hoạt động.&#10;&#10;### ❌ Trường hợp SAI (JWT secret khác nhau)&#10;&#10;**Auth-user:**&#10;```json&#10;{&#10;  &quot;service&quot;: &quot;auth-user&quot;,&#10;  &quot;secretLength&quot;: 57,&#10;  &quot;secretFirst10Chars&quot;: &quot;yourSecret&quot;,&#10;  &quot;secretLast10Chars&quot;: &quot;Algorithm&quot;,&#10;  &quot;secretHashCode&quot;: -123456789&#10;}&#10;```&#10;&#10;**API Gateway:**&#10;```json&#10;{&#10;  &quot;secretLength&quot;: 64,&#10;  &quot;secretFirst10Chars&quot;: &quot;your-secre&quot;,&#10;  &quot;secretLast10Chars&quot;: &quot;-purposes&quot;,&#10;  &quot;secretHashCode&quot;: 987654321&#10;}&#10;```&#10;&#10;→ **LỖI!** JWT secret KHÁC NHAU. Cần đồng bộ lại.&#10;&#10;## Khắc phục khi JWT secret khác nhau&#10;&#10;### Bước 1: Xác định secret nào đúng&#10;Thường nên dùng secret của auth-user làm chuẩn (vì auth-user tạo token).&#10;&#10;### Bước 2: Cập nhật api-gateway config&#10;File: `api-gateway/src/main/resources/application-dev.yml`&#10;```yaml&#10;jwt:&#10;  secret: ${JWT_SECRET:yourSecretKeyMustBeAtLeast256BitsLongForHS256Algorithm}&#10;```&#10;&#10;### Bước 3: Restart api-gateway&#10;```bash&#10;# Stop api-gateway&#10;# Start lại&#10;cd api-gateway&#10;mvn spring-boot:run -Dspring-boot.run.profiles=dev&#10;```&#10;&#10;### Bước 4: Kiểm tra lại&#10;```bash&#10;# Kiểm tra api-gateway sau khi restart&#10;curl http://localhost:9000/debug/jwt-info&#10;&#10;# So sánh với auth-user&#10;curl http://localhost:9001/debug/jwt-info&#10;```&#10;&#10;### Bước 5: Login lại để lấy token mới&#10;```bash&#10;curl -X POST http://localhost:9001/api/auth/oauth2/google/login \&#10;  -H &quot;Content-Type: application/json&quot; \&#10;  -d '{&quot;email&quot;: &quot;user@example.com&quot;, &quot;password&quot;: &quot;password&quot;}'&#10;```&#10;&#10;### Bước 6: Test với token mới&#10;```bash&#10;curl http://localhost:9000/auth-user/api/driver/vehicles \&#10;  -H &quot;Authorization: Bearer &lt;NEW_TOKEN&gt;&quot;&#10;```&#10;&#10;## ⚠️ Security Warning&#10;&#10;**DEBUG ENDPOINTS CHỈ DÙNG TRONG DEVELOPMENT!**&#10;&#10;Trước khi deploy production:&#10;1. Xóa file `DebugController.java` trong cả 2 service&#10;2. Hoặc disable debug endpoints bằng cách thêm `@Profile(&quot;dev&quot;)`:&#10;&#10;```java&#10;@RestController&#10;@RequestMapping(&quot;/debug&quot;)&#10;@Slf4j&#10;@Profile(&quot;dev&quot;)  // CHỈ chạy trong profile dev&#10;public class DebugController {&#10;    // ...&#10;}&#10;```&#10;&#10;## Troubleshooting&#10;&#10;### Lỗi: Cannot connect to service&#10;```bash&#10;curl: (7) Failed to connect to localhost port 9001&#10;```&#10;&#10;**Giải pháp:** Service chưa start. Hãy start service trước.&#10;&#10;### Lỗi: 404 Not Found&#10;```bash&#10;{&#10;  &quot;timestamp&quot;: &quot;2025-11-15T20:51:10&quot;,&#10;  &quot;status&quot;: 404,&#10;  &quot;error&quot;: &quot;Not Found&quot;,&#10;  &quot;path&quot;: &quot;/debug/jwt-info&quot;&#10;}&#10;```&#10;&#10;**Giải pháp:** &#10;1. Kiểm tra `DebugController.java` đã được tạo chưa&#10;2. Restart service&#10;3. Kiểm tra package name đúng chưa&#10;&#10;### HashCode khác nhau nhưng string giống nhau?&#10;Có thể do:&#10;- Khoảng trắng thừa ở đầu/cuối&#10;- Ký tự ẩn (newline, tab)&#10;&#10;**Kiểm tra:**&#10;```bash&#10;# In ra độ dài byte array&#10;# secretLength phải bằng nhau CHÍNH XÁC&#10;```&#10;&#10;## Script tự động so sánh&#10;&#10;Tạo file `compare-jwt-secrets.bat`:&#10;```bat&#10;@echo off&#10;echo Checking auth-user JWT secret...&#10;curl -s http://localhost:9001/debug/jwt-info &gt; auth-user-jwt.json&#10;type auth-user-jwt.json&#10;echo.&#10;echo.&#10;&#10;echo Checking api-gateway JWT secret...&#10;curl -s http://localhost:9000/debug/jwt-info &gt; api-gateway-jwt.json&#10;type api-gateway-jwt.json&#10;echo.&#10;echo.&#10;&#10;echo Comparing...&#10;fc auth-user-jwt.json api-gateway-jwt.json&#10;&#10;del auth-user-jwt.json&#10;del api-gateway-jwt.json&#10;pause&#10;```&#10;&#10;Chạy:&#10;```bash&#10;compare-jwt-secrets.bat&#10;```&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/DEV_GUIDE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/DEV_GUIDE.md" />
              <option name="updatedContent" value="#  Hướng dẫn Development - EV Battery Swap Station MS&#10;&#10;##  Kiến trúc 5 Service chính&#10;&#10;| Service | Port IDE | Port Docker | Database Port | Chức năng |&#10;|---------|----------|-------------|---------------|-----------|&#10;| **Eureka Server** | 8762 | 8761 | - | Service Discovery |&#10;| **API Gateway** | 8080 | 9000 | - | API Gateway, Routing |&#10;| **Auth-User** | 8081 | 9001 | 5433 | Xác thực, Profile, Phân quyền |&#10;| **Station** | 8082 | 9002 | 5434 | Quản lý trạm, Pin, Geo |&#10;| **Booking** | 8083 | 9003 | 5435 | Đặt lịch, Đổi pin, Notification |&#10;| **Billing** | 8084 | 9004 | 5436 | Thanh toán, Báo cáo, Analytics |&#10;&#10;---&#10;&#10;## ️ Setup cho Development&#10;&#10;### 1. Khởi động Infrastructure (chỉ cần chạy 1 lần)&#10;&#10;```cmd&#10;docker-compose -f docker-compose.base.yml up -d&#10;```&#10;&#10;**Infrastructure bao gồm:**&#10;- ✅ Eureka Server (port 8761)&#10;- ✅ 4 PostgreSQL databases&#10;- ✅ Kafka + Zookeeper&#10;- ✅ MailHog (SMTP testing)&#10;&#10;**Kiểm tra trạng thái:**&#10;```cmd&#10;docker-compose -f docker-compose.base.yml ps&#10;```&#10;&#10;### 2. Chạy Service trong IDE (IntelliJ IDEA)&#10;&#10;#### Option A: Sử dụng Eureka từ Docker (Khuyến nghị ⭐)&#10;&#10;Chỉ cần chạy service của bạn trong IDE, nó sẽ tự động kết nối đến Eureka trong Docker (port 8761).&#10;&#10;**Ví dụ: Chạy Auth-User Service**&#10;1. Mở class `AuthUserApplication.java`&#10;2. Click nút Run&#10;3. Service sẽ chạy trên port `8081` và register với Eureka tại `localhost:8761`&#10;&#10;#### Option B: Chạy Eureka trong IDE (nếu cần debug Eureka)&#10;&#10;**Bước 1:** Stop Eureka trong Docker&#10;```cmd&#10;docker stop base-eureka-server&#10;```&#10;&#10;**Bước 2:** Chạy Eureka trong IDE với profile `ide`&#10;- Mở `EurekaServerApplication.java`&#10;- Edit Configuration → VM options: `-Dspring.profiles.active=ide`&#10;- Run → Eureka sẽ chạy trên port `8762`&#10;&#10;**Bước 3:** Cập nhật biến môi trường cho các service khác:&#10;```&#10;EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://localhost:8762/eureka/&#10;```&#10;&#10;---&#10;&#10;##  Test và Debug&#10;&#10;### Chạy từng service:&#10;&#10;```cmd&#10;# Chỉ chạy service bạn đang phát triển&#10;# Ví dụ: Auth-User Service&#10;cd auth-user&#10;./mvnw spring-boot:run&#10;&#10;# Hoặc trong IDE: Run AuthUserApplication.java&#10;```&#10;&#10;### Access URLs:&#10;&#10;- **Eureka Dashboard (Docker):** http://localhost:8761&#10;- **Eureka Dashboard (IDE):** http://localhost:8762&#10;- **MailHog UI:** http://localhost:8025&#10;- **API Gateway:** http://localhost:8080&#10;- **Auth Service:** http://localhost:8081&#10;- **Station Service:** http://localhost:8082&#10;- **Booking Service:** http://localhost:8083&#10;- **Billing Service:** http://localhost:8084&#10;&#10;---&#10;&#10;##  Deploy Full System với Docker&#10;&#10;```cmd&#10;# Build tất cả services&#10;./build-all.bat   # Windows&#10;./build-all.sh    # Linux/Mac&#10;&#10;# Chạy toàn bộ hệ thống&#10;docker-compose up -d&#10;&#10;# Kiểm tra logs&#10;docker-compose logs -f [service-name]&#10;&#10;# Stop toàn bộ&#10;docker-compose down&#10;```&#10;&#10;---&#10;&#10;##  Troubleshooting&#10;&#10;### Lỗi: Port already in use&#10;&#10;**Nguyên nhân:** Service đang chạy trong Docker conflict với IDE&#10;&#10;**Giải pháp:**&#10;```cmd&#10;# Stop service đang chạy trong Docker&#10;docker stop [container-name]&#10;&#10;# Hoặc stop toàn bộ&#10;docker-compose down&#10;```&#10;&#10;### Lỗi: Cannot connect to Database&#10;&#10;**Kiểm tra database đang chạy:**&#10;```cmd&#10;docker-compose -f docker-compose.base.yml ps&#10;```&#10;&#10;**Restart database:**&#10;```cmd&#10;docker-compose -f docker-compose.base.yml restart [db-name]&#10;```&#10;&#10;### Lỗi: Service không register với Eureka&#10;&#10;**Kiểm tra:**&#10;1. Eureka Server có đang chạy? → http://localhost:8761&#10;2. Biến môi trường `EUREKA_CLIENT_SERVICEURL_DEFAULTZONE` có đúng không?&#10;3. Network có kết nối được không?&#10;&#10;---&#10;&#10;##  Development Workflow&#10;&#10;### Workflow A: Chạy tất cả trong Docker&#10;```cmd&#10;docker-compose up -d&#10;# Phù hợp cho: Test integration, Demo&#10;```&#10;&#10;### Workflow B: Development với IDE (Khuyến nghị)&#10;```cmd&#10;# 1. Chạy infrastructure&#10;docker-compose -f docker-compose.base.yml up -d&#10;&#10;# 2. Chạy service của bạn trong IDE&#10;# - Build nhanh&#10;# - Debug dễ dàng&#10;# - Hot reload&#10;&#10;# 3. Test với Postman/curl&#10;curl http://localhost:8081/api/users&#10;```&#10;&#10;### Workflow C: Hybrid (một số service Docker, một số IDE)&#10;```cmd&#10;# 1. Chạy infrastructure&#10;docker-compose -f docker-compose.base.yml up -d&#10;&#10;# 2. Chạy các service khác trong Docker&#10;docker-compose up -d auth-user station booking&#10;&#10;# 3. Chỉ chạy service đang phát triển trong IDE (ví dụ: billing)&#10;# Run BillingApplication.java trong IDE&#10;```&#10;&#10;---&#10;&#10;##  Clean Up&#10;&#10;```cmd&#10;# Stop và xóa containers&#10;docker-compose down&#10;&#10;# Stop và xóa containers + volumes (xóa data)&#10;docker-compose down -v&#10;&#10;# Xóa tất cả images&#10;docker rmi $(docker images -q &quot;be_evbssms*&quot;)&#10;&#10;# Clean build artifacts&#10;./mvnw clean   # trong từng service folder&#10;```&#10;&#10;---&#10;&#10;##  Tài liệu tham khảo&#10;&#10;- [Spring Boot Documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/)&#10;- [Spring Cloud Netflix](https://spring.io/projects/spring-cloud-netflix)&#10;- [Docker Compose](https://docs.docker.com/compose/)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/MAIL_CONFIG_GUIDE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/MAIL_CONFIG_GUIDE.md" />
              <option name="updatedContent" value="# Hướng dẫn Cấu hình Gmail SMTP cho Hệ thống&#10;&#10;## Bước 1: Tạo App Password cho Gmail&#10;&#10;1. Đăng nhập vào Gmail account của bạn&#10;2. Truy cập: https://myaccount.google.com/security&#10;3. Bật **2-Step Verification** (nếu chưa bật)&#10;4. Sau khi bật 2FA, vào: https://myaccount.google.com/apppasswords&#10;5. Chọn:&#10;   - App: **Mail**&#10;   - Device: **Other (Custom name)** → Nhập: &quot;EV Battery System&quot;&#10;6. Click **Generate**&#10;7. Copy mã 16 ký tự (dạng: `abcd efgh ijkl mnop`)&#10;&#10;## Bước 2: Cấu hình File .env&#10;&#10;Mở file `.env` ở thư mục root project và cập nhật:&#10;&#10;```env&#10;# Mail Configuration&#10;MAIL_USERNAME=your-email@gmail.com&#10;MAIL_PASSWORD=abcd efgh ijkl mnop&#10;```&#10;&#10;**Lưu ý:**&#10;- Thay `your-email@gmail.com` bằng email của bạn&#10;- Thay `abcd efgh ijkl mnop` bằng App Password vừa tạo (giữ nguyên khoảng trắng)&#10;- KHÔNG dùng password Gmail thông thường&#10;&#10;## Bước 3: Load Environment Variables&#10;&#10;### Cho Development (chạy bằng IDE):&#10;&#10;1. **IntelliJ IDEA:**&#10;   - Mở Run Configuration&#10;   - Chọn tab **Environment variables**&#10;   - Click **Load from file** → Chọn file `.env`&#10;   - Hoặc thêm từng cặp key-value thủ công&#10;&#10;2. **VS Code:**&#10;   - Cài extension: **DotENV**&#10;   - File `.env` sẽ được tự động load&#10;&#10;### Cho Production (chạy bằng Docker):&#10;&#10;Docker Compose sẽ tự động load file `.env`:&#10;&#10;```bash&#10;docker-compose -f docker-compose.prod.yml up -d&#10;```&#10;&#10;## Bước 4: Kiểm tra&#10;&#10;Sau khi start service, kiểm tra log:&#10;&#10;```bash&#10;# Nếu thành công, sẽ thấy:&#10;INFO  c.b.auth.service.EmailService - JavaMailSender initialized successfully&#10;&#10;# Nếu lỗi, sẽ thấy:&#10;ERROR o.s.b.d.LoggingFailureAnalysisReporter - Parameter 0 of constructor in com.boilerplate.auth.service.EmailService required a bean of type 'org.springframework.mail.javamail.JavaMailSender'&#10;```&#10;&#10;## Troubleshooting&#10;&#10;### Lỗi: &quot;Username and Password not accepted&quot;&#10;&#10;- Kiểm tra lại email và App Password&#10;- Đảm bảo đã bật 2-Step Verification&#10;- Thử tạo lại App Password mới&#10;&#10;### Lỗi: &quot;Could not connect to SMTP host&quot;&#10;&#10;- Kiểm tra kết nối internet&#10;- Port 587 có thể bị firewall chặn&#10;- Thử đổi sang port 465 (SSL) trong `application.yml`&#10;&#10;### Lỗi: &quot;JavaMailSender bean not found&quot;&#10;&#10;- Kiểm tra file `pom.xml` có dependency `spring-boot-starter-mail`&#10;- Kiểm tra file `application-dev.yml` và `application-prod.yml` có cấu hình `spring.mail`&#10;- Rebuild project: `mvn clean install`&#10;&#10;## Cấu trúc Mail trong Project&#10;&#10;```&#10;auth-user/&#10;  ├── src/main/resources/&#10;  │   ├── application.yml           # Cấu hình base&#10;  │   ├── application-dev.yml       # Dev: Gmail SMTP&#10;  │   ├── application-prod.yml      # Prod: Gmail SMTP&#10;  │   └── templates/email/          # Email templates&#10;  └── pom.xml                       # Có spring-boot-starter-mail&#10;```&#10;&#10;## Lưu ý Bảo mật&#10;&#10;1. **KHÔNG COMMIT file .env vào Git**&#10;   - File `.gitignore` đã được cấu hình ignore `.env`&#10;   &#10;2. **Cho Production Server:**&#10;   - Sử dụng Secret Manager (AWS Secrets, Azure Key Vault)&#10;   - Hoặc set environment variables trực tiếp trên server&#10;&#10;3. **Giới hạn rate limit:**&#10;   - Gmail free: 500 emails/day&#10;   - Nếu cần nhiều hơn, dùng SendGrid, AWS SES, hoặc dịch vụ khác&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/QUICK_FIX_GUIDE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/QUICK_FIX_GUIDE.md" />
              <option name="updatedContent" value="# Hướng dẫn khắc phục lỗi JWT signature mismatch&#10;&#10;## Bước 1: Kiểm tra JWT secret có giống nhau không&#10;&#10;### Cách 1: Dùng PowerShell script (Recommended)&#10;```powershell&#10;cd D:\Code\SpringBoot3\EV_Battery_SwapStation_MS\BE_EVBSSMS&#10;.\compare-jwt-secrets.ps1&#10;```&#10;&#10;### Cách 2: Kiểm tra thủ công&#10;```powershell&#10;# API Gateway&#10;Invoke-RestMethod http://localhost:9000/debug/jwt-info&#10;&#10;# Auth-User (sau khi restart)&#10;Invoke-RestMethod http://localhost:9001/debug/jwt-info&#10;```&#10;&#10;## Bước 2: Nếu JWT secret khác nhau&#10;&#10;### Cập nhật application-dev.yml&#10;Đảm bảo cả 2 file có cùng giá trị:&#10;&#10;**auth-user/src/main/resources/application.yml:**&#10;```yaml&#10;jwt:&#10;  secret: ${JWT_SECRET:yourSecretKeyMustBeAtLeast256BitsLongForHS256Algorithm}&#10;```&#10;&#10;**api-gateway/src/main/resources/application-dev.yml:**&#10;```yaml&#10;jwt:&#10;  secret: ${JWT_SECRET:yourSecretKeyMustBeAtLeast256BitsLongForHS256Algorithm}&#10;```&#10;&#10;### Restart cả 2 service&#10;```bash&#10;# Stop both services&#10;# Then start auth-user first&#10;cd auth-user&#10;mvn spring-boot:run -Dspring-boot.run.profiles=dev&#10;&#10;# Then start api-gateway&#10;cd api-gateway&#10;mvn spring-boot:run -Dspring-boot.run.profiles=dev&#10;```&#10;&#10;## Bước 3: Kiểm tra lại với script&#10;```powershell&#10;.\compare-jwt-secrets.ps1&#10;```&#10;&#10;Kết quả phải là:&#10;```&#10;✓ Secret Length: MATCH (57)&#10;✓ First 10 Chars: MATCH (yourSecret)&#10;✓ Last 10 Chars: MATCH (Algorithm)&#10;✓ Hash Code: MATCH (-1234567890)&#10;&#10;✓✓✓ JWT SECRETS MATCH! ✓✓✓&#10;```&#10;&#10;## Bước 4: Login lại để lấy token mới&#10;```powershell&#10;$loginResponse = Invoke-RestMethod -Uri &quot;http://localhost:9001/api/auth/oauth2/google/login&quot; `&#10;  -Method Post `&#10;  -ContentType &quot;application/json&quot; `&#10;  -Body '{&quot;email&quot;: &quot;your-email@example.com&quot;, &quot;password&quot;: &quot;your-password&quot;}'&#10;&#10;$token = $loginResponse.data.accessToken&#10;Write-Host &quot;Token: $token&quot;&#10;```&#10;&#10;## Bước 5: Test với token mới qua Gateway&#10;```powershell&#10;$headers = @{&#10;    &quot;Authorization&quot; = &quot;Bearer $token&quot;&#10;}&#10;&#10;Invoke-RestMethod -Uri &quot;http://localhost:9000/auth-user/api/driver/vehicles&quot; -Headers $headers&#10;```&#10;&#10;## Lưu ý quan trọng&#10;&#10;1. **Auth-User service cần restart** sau khi thêm debug endpoint vào SecurityConfig&#10;2. **Token cũ không còn hợp lệ** sau khi thay đổi JWT secret&#10;3. **JWT secret phải GIỐNG NHAU CHÍNH XÁC** (không có khoảng trắng thừa, không có ký tự ẩn)&#10;4. **Xóa debug endpoints** trước khi deploy production&#10;&#10;## Troubleshooting&#10;&#10;### Lỗi: Auth-User trả về 403 khi gọi /debug/jwt-info&#10;**Nguyên nhân:** Endpoint bị chặn bởi Spring Security&#10;&#10;**Giải pháp:** &#10;1. Đã thêm `/debug/**` vào SecurityConfig&#10;2. Cần restart auth-user service&#10;3. Chạy lại request&#10;&#10;### Lỗi: PowerShell script không chạy&#10;**Nguyên nhân:** ExecutionPolicy bị restrict&#10;&#10;**Giải pháp:**&#10;```powershell&#10;Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass&#10;.\compare-jwt-secrets.ps1&#10;```&#10;&#10;### Vẫn lỗi 401 sau khi JWT secret đã giống nhau&#10;**Nguyên nhân:** Dùng token cũ&#10;&#10;**Giải pháp:**&#10;1. Login lại để lấy token mới&#10;2. Copy token mới&#10;3. Test lại với token mới&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/SWAGGER_GATEWAY_SETUP.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/SWAGGER_GATEWAY_SETUP.md" />
              <option name="updatedContent" value="#  Hướng dẫn khởi động Swagger UI qua Gateway (Port 8080)&#10;&#10;## ✅ Cấu hình hiện tại (đã setup sẵn)&#10;&#10;### Gateway Routes:&#10;- Auth-User Swagger: `http://localhost:8080/auth-user/swagger-ui.html`&#10;- Station Swagger: `http://localhost:8080/station/swagger-ui.html`&#10;- Booking Swagger: `http://localhost:8080/booking/swagger-ui.html`&#10;- Billing Swagger: `http://localhost:8080/billing/swagger-ui.html`&#10;&#10;### Cơ chế hoạt động:&#10;1. Gateway nhận request: `/auth-user/swagger-ui.html`&#10;2. StripPrefix filter loại bỏ `/auth-user`&#10;3. Forward đến auth-user service: `/swagger-ui.html`&#10;4. Service trả về Swagger UI ✅&#10;&#10;##  Các bước khởi động (QUAN TRỌNG)&#10;&#10;### Bước 1: Khởi động Eureka Server&#10;```bash&#10;cd eureka-server&#10;mvn spring-boot:run&#10;```&#10;Đợi xuất hiện: `Started Eureka Server`&#10;&#10;### Bước 2: Khởi động Auth-User Service&#10;```bash&#10;cd auth-user&#10;mvn spring-boot:run&#10;```&#10;Đợi xuất hiện: `Started AuthUserApplication`&#10;&#10;### Bước 3: Kiểm tra Eureka Dashboard&#10;- Mở: http://localhost:8761&#10;- Xác nhận `AUTH-USER` xuất hiện trong &quot;Instances currently registered with Eureka&quot;&#10;&#10;### Bước 4: Khởi động API Gateway&#10;```bash&#10;cd api-gateway&#10;mvn spring-boot:run&#10;```&#10;Đợi xuất hiện: `Started GatewayApplication`&#10;&#10;### Bước 5: Test Swagger UI&#10;```bash&#10;# Test service trực tiếp (phải hoạt động)&#10;http://localhost:8081/swagger-ui/index.html&#10;&#10;# Test qua gateway&#10;http://localhost:8080/auth-user/swagger-ui.html&#10;```&#10;&#10;##  Troubleshooting&#10;&#10;### Lỗi 404: No static resource swagger-ui/index.html&#10;&#10;**Nguyên nhân:**&#10;- Service chưa khởi động&#10;- Service chưa đăng ký với Eureka&#10;- Gateway chưa fetch registry từ Eureka&#10;&#10;**Giải pháp:**&#10;1. Restart tất cả services theo đúng thứ tự trên&#10;2. Đợi 30 giây sau mỗi lần start service&#10;3. Xóa cache browser (Ctrl+Shift+Delete)&#10;4. Test lại&#10;&#10;### Kiểm tra logs&#10;&#10;**Gateway logs:**&#10;```&#10;# Nên thấy:&#10;- &quot;Mapped [GET] [/auth-user/swagger-ui.html]&quot;&#10;- &quot;Route matched: auth-user-swagger-ui&quot;&#10;```&#10;&#10;**Auth-user logs:**&#10;```&#10;# Nên thấy:&#10;- &quot;DiscoveryClient registered with Eureka&quot;&#10;- &quot;Fetched config from server at http://localhost:8761/eureka/&quot;&#10;```&#10;&#10;##  Nếu vẫn lỗi - Dùng URL trực tiếp&#10;&#10;Sửa tạm thời gateway config (file: `api-gateway/src/main/resources/application.yml`):&#10;&#10;```yaml&#10;# Auth-User Swagger - DÙNG URL TRỰC TIẾP&#10;- id: auth-user-swagger-ui&#10;  uri: http://localhost:8081  # Thay vì lb://auth-user&#10;  predicates:&#10;    - Path=/auth-user/swagger-ui.html,/auth-user/swagger-ui/**,/auth-user/v3/api-docs/**,/auth-user/webjars/**&#10;  filters:&#10;    - StripPrefix=1&#10;```&#10;&#10;Sau đó restart gateway và test lại.&#10;&#10;##  Ghi chú&#10;&#10;- Service độc lập vẫn hoạt động bình thường: `http://localhost:8081/swagger-ui/index.html`&#10;- Gateway chỉ là proxy, route requests đến service&#10;- StripPrefix=1 loại bỏ segment đầu tiên (/auth-user) trước khi forward&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/admin/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/admin/Dockerfile" />
              <option name="originalContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]&#10;" />
              <option name="updatedContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./admin/target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/admin/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/admin/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.6&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/analytics/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/analytics/Dockerfile" />
              <option name="originalContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]&#10;" />
              <option name="updatedContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./analytics/target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/analytics/docker-compose.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/analytics/docker-compose.yml" />
              <option name="originalContent" value="analytics:&#10;  build:&#10;    context: ./analytics&#10;  command: [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]&#10;  ports:&#10;    - &quot;9007:8080&quot;&#10;  env_file:&#10;    - .env&#10;  depends_on:&#10;    - analytics-db&#10;    - eureka-server&#10;  networks: [evnet]&#10;  environment:&#10;analytics-db:&#10;  image: postgres:16-alpine&#10;  environment:&#10;    - POSTGRES_DB=analyticsdb&#10;    - POSTGRES_USER=ev&#10;    - POSTGRES_PASSWORD=evpass&#10;  ports:&#10;    - &quot;5439:5432&quot;&#10;  networks: [evnet]&#10;" />
              <option name="updatedContent" value="version: &quot;3.8&quot;&#10;services:&#10;  analytics:&#10;    build:&#10;      context: ./analytics&#10;    command: [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]&#10;    ports:&#10;      - &quot;9007:8080&quot;&#10;    env_file:&#10;      - .env&#10;    depends_on:&#10;      - analytics-db&#10;      - eureka-server&#10;    networks:&#10;      - evnet&#10;&#10;  analytics-db:&#10;    image: postgres:16-alpine&#10;    environment:&#10;      - POSTGRES_DB=analyticsdb&#10;      - POSTGRES_USER=ev&#10;      - POSTGRES_PASSWORD=evpass&#10;    ports:&#10;      - &quot;5439:5432&quot;&#10;    networks:&#10;      - evnet&#10;&#10;  eureka-server:&#10;    image: eurekaserver:latest&#10;    ports:&#10;      - &quot;8761:8761&quot;&#10;    networks:&#10;      - evnet&#10;&#10;networks:&#10;  evnet:&#10;    driver: bridge" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/analytics/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/analytics/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.6&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/api-gateway/FIX_JWT_SECRET_MISMATCH.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/api-gateway/FIX_JWT_SECRET_MISMATCH.md" />
              <option name="updatedContent" value="#  KHẮC PHỤC LỖI JWT SIGNATURE MISMATCH&#10;&#10;##  Nguyên nhân đã xác định&#10;&#10;**Auth-User service** đang đọc JWT_SECRET từ file `.env`:&#10;```&#10;JWT_SECRET=uG4k9pJXv2fZbR1eT6wLq3nH7sM8yP0cV5dE9xF2rA1jK4tG (48 chars)&#10;```&#10;&#10;**API Gateway** KHÔNG đọc JWT_SECRET, nên dùng default value:&#10;```&#10;JWT_SECRET=yourSecretKeyMustBeAtLeast256BitsLongForHS256Algorithm (54 chars)&#10;```&#10;&#10;→ **JWT signature không khớp!**&#10;&#10;## ✅ GIẢI PHÁP&#10;&#10;### Bước 1: Load biến môi trường từ .env&#10;&#10;Mở PowerShell và chạy:&#10;&#10;```powershell&#10;cd D:\Code\SpringBoot3\EV_Battery_SwapStation_MS\BE_EVBSSMS&#10;.\load-env.ps1&#10;```&#10;&#10;Script này sẽ:&#10;- Load tất cả biến từ file `.env`&#10;- Set chúng vào environment variables của PowerShell session&#10;- Hiển thị JWT_SECRET info&#10;&#10;**Output mong đợi:**&#10;```&#10;Loading .env file...&#10;  SPRING_PROFILES_ACTIVE = dev&#10;  EUREKA_SERVER = http://localhost:8761/eureka/&#10;  ...&#10;  JWT_SECRET = ********&#10;&#10;.env file loaded successfully!&#10;&#10;JWT_SECRET info:&#10;  Length: 48&#10;  First 10 chars: uG4k9pJXv2&#10;  Last 10 chars: F2rA1jK4tG&#10;```&#10;&#10;### Bước 2: Restart API Gateway trong CÙNG PowerShell session&#10;&#10;**QUAN TRỌNG:** Phải restart trong cùng PowerShell window vừa chạy `load-env.ps1`&#10;&#10;```powershell&#10;# Trong PowerShell window vừa chạy load-env.ps1&#10;cd api-gateway&#10;&#10;# Stop api-gateway nếu đang chạy (Ctrl+C)&#10;&#10;# Start lại&#10;mvn spring-boot:run -Dspring-boot.run.profiles=dev&#10;```&#10;&#10;### Bước 3: Kiểm tra JWT secret đã khớp chưa&#10;&#10;```powershell&#10;# Test API Gateway&#10;curl http://localhost:9000/debug/jwt-info&#10;&#10;# Expected output:&#10;# {&#10;#   &quot;secretLength&quot;: 48,&#10;#   &quot;secretHashCode&quot;: 1821191413,&#10;#   &quot;secretFirst10Chars&quot;: &quot;uG4k9pJXv2&quot;,&#10;#   &quot;secretLast10Chars&quot;: &quot;F2rA1jK4tG&quot;&#10;# }&#10;```&#10;&#10;So sánh với auth-user:&#10;```powershell&#10;curl http://localhost:9001/debug/jwt-info&#10;&#10;# Should be IDENTICAL to Gateway's output&#10;```&#10;&#10;### Bước 4: Login lại để lấy token mới&#10;&#10;Token cũ **KHÔNG còn hợp lệ** sau khi đồng bộ JWT secret.&#10;&#10;```powershell&#10;# Login qua auth-user&#10;curl -X POST http://localhost:9001/api/auth/oauth2/google/login `&#10;  -H &quot;Content-Type: application/json&quot; `&#10;  -d '{&quot;email&quot;: &quot;your-email@example.com&quot;, &quot;password&quot;: &quot;your-password&quot;}'&#10;```&#10;&#10;### Bước 5: Test với token mới qua Gateway&#10;&#10;```powershell&#10;# Copy token mới từ response&#10;$token = &quot;eyJhbGci...&quot;&#10;&#10;# Test endpoint qua Gateway&#10;curl http://localhost:9000/auth-user/api/driver/vehicles `&#10;  -H &quot;Authorization: Bearer $token&quot;&#10;&#10;# Expected: 200 OK with data&#10;```&#10;&#10;##  GIẢI PHÁP NHANH (One-liner)&#10;&#10;```powershell&#10;# Load .env, set JWT_SECRET và start gateway&#10;cd D:\Code\SpringBoot3\EV_Battery_SwapStation_MS\BE_EVBSSMS; .\load-env.ps1; cd api-gateway; mvn spring-boot:run -Dspring-boot.run.profiles=dev&#10;```&#10;&#10;##  GIẢI PHÁP DÀI HẠN&#10;&#10;### Option 1: Dùng Spring Boot .env loader&#10;&#10;Thêm vào `pom.xml` của api-gateway:&#10;&#10;```xml&#10;&lt;dependency&gt;&#10;    &lt;groupId&gt;me.paulschwarz&lt;/groupId&gt;&#10;    &lt;artifactId&gt;spring-dotenv&lt;/artifactId&gt;&#10;    &lt;version&gt;4.0.0&lt;/version&gt;&#10;&lt;/dependency&gt;&#10;```&#10;&#10;### Option 2: Dùng IntelliJ IDEA EnvFile Plugin&#10;&#10;1. Install plugin &quot;EnvFile&quot;&#10;2. Edit Run Configuration của api-gateway&#10;3. Chọn tab &quot;EnvFile&quot;&#10;4. Add `.env` file&#10;5. Run&#10;&#10;### Option 3: Set trong Run Configuration&#10;&#10;IntelliJ IDEA → Edit Configurations → api-gateway:&#10;- Environment variables: `JWT_SECRET=uG4k9pJXv2fZbR1eT6wLq3nH7sM8yP0cV5dE9xF2rA1jK4tG`&#10;&#10;## ⚠️ LƯU Ý QUAN TRỌNG&#10;&#10;### 1. Environment variables chỉ tồn tại trong PowerShell session&#10;Nếu bạn mở PowerShell window mới, phải chạy lại `load-env.ps1`&#10;&#10;### 2. IDE có thể cache environment variables&#10;Nếu start từ IDE:&#10;- Restart IDE sau khi set biến môi trường&#10;- Hoặc dùng EnvFile plugin&#10;&#10;### 3. Docker sẽ tự động load .env&#10;Khi chạy bằng docker-compose, nó tự động đọc `.env` file.&#10;&#10;##  KIỂM TRA NHANH&#10;&#10;Chạy script so sánh:&#10;```powershell&#10;.\compare-jwt-secrets.ps1&#10;```&#10;&#10;**Kết quả mong đợi:**&#10;```&#10;[OK] Secret Length: MATCH (48)&#10;[OK] First 10 Chars: MATCH (uG4k9pJXv2)&#10;[OK] Last 10 Chars: MATCH (F2rA1jK4tG)&#10;[OK] Hash Code: MATCH (1821191413)&#10;&#10;*** JWT SECRETS MATCH! ***&#10;```&#10;&#10;##  CHECKLIST&#10;&#10;- [ ] Chạy `load-env.ps1` để load biến môi trường&#10;- [ ] Restart API Gateway trong CÙNG PowerShell window&#10;- [ ] Kiểm tra `curl http://localhost:9000/debug/jwt-info`&#10;- [ ] Verify secretLength = 48 và first 10 chars = &quot;uG4k9pJXv2&quot;&#10;- [ ] Login lại để lấy token mới&#10;- [ ] Test endpoint qua Gateway với token mới&#10;- [ ] Nhận được 200 OK thay vì 401 Unauthorized&#10;&#10;##  TÓM TẮT&#10;&#10;**Vấn đề:** API Gateway không đọc JWT_SECRET từ .env file&#10;&#10;**Giải pháp:** Load .env vào environment variables trước khi start Gateway&#10;&#10;**Câu lệnh:**&#10;```powershell&#10;# Terminal 1: Load env và start Gateway&#10;cd D:\Code\SpringBoot3\EV_Battery_SwapStation_MS\BE_EVBSSMS&#10;.\load-env.ps1&#10;cd api-gateway&#10;mvn spring-boot:run -Dspring-boot.run.profiles=dev&#10;&#10;# Terminal 2: Verify&#10;curl http://localhost:9000/debug/jwt-info&#10;.\compare-jwt-secrets.ps1&#10;```&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/api-gateway/SECURITY.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/api-gateway/SECURITY.md" />
              <option name="updatedContent" value="# API Gateway - EV Battery Swap Station Management System&#10;&#10;## Tổng quan&#10;&#10;API Gateway là điểm vào duy nhất cho tất cả các request từ client đến hệ thống microservices. Gateway xử lý:&#10;- Authentication (JWT)&#10;- Authorization (Role-based)&#10;- Request routing&#10;- Logging và monitoring&#10;- CORS configuration&#10;&#10;## Cơ chế bảo mật&#10;&#10;### 1. JWT Authentication Filter&#10;**Chức năng:**&#10;- Verify JWT token từ header `Authorization: Bearer &lt;token&gt;`&#10;- Extract thông tin user từ token (username, role, email, fullName)&#10;- Inject thông tin vào header cho downstream services&#10;- Trả về 401 nếu token không hợp lệ hoặc hết hạn&#10;&#10;**Public endpoints (không cần token):**&#10;- `/oauth2/**` - OAuth2 login&#10;- `/api/auth/**` - Authentication endpoints (login, register, verify-otp)&#10;- `/api/stations/public` - Public station listing&#10;- `/swagger-ui/**` - API documentation&#10;- `/actuator/health` - Health check&#10;&#10;### 2. Role Authorization Filter&#10;**Chức năng:**&#10;- Kiểm tra quyền truy cập dựa trên role của user&#10;- Trả về 403 nếu user không có quyền&#10;&#10;**Role mapping:**&#10;```&#10;Admin endpoints:        /api/admin/**          → ADMIN only&#10;Staff endpoints:        /api/staff/**          → BSS_STAFF, ADMIN&#10;Station management:     /api/stations/manage/** → BSS_STAFF, ADMIN&#10;Booking/Swap:          /api/bookings/**       → DRIVER, BSS_STAFF, ADMIN&#10;Payment:               /api/payments/**       → DRIVER, ADMIN&#10;Reports/Analytics:     /api/reports/**        → ADMIN only&#10;```&#10;&#10;### 3. Logging Filter&#10;**Chức năng:**&#10;- Log tất cả request và response&#10;- Theo dõi thời gian xử lý request&#10;- Cảnh báo nếu request chậm (&gt;3s)&#10;- Log client IP address&#10;&#10;### 4. CORS Configuration&#10;**Cho phép:**&#10;- Origins: localhost:3000, localhost:5173, vercel.app, netlify.app&#10;- Methods: GET, POST, PUT, DELETE, PATCH, OPTIONS&#10;- Headers: Authorization, Content-Type, Accept&#10;- Credentials: true&#10;&#10;## Cấu hình&#10;&#10;### JWT Secret&#10;**Development (application-dev.yml):**&#10;```yaml&#10;jwt:&#10;  secret: your-secret-key-must-be-at-least-256-bits-long-for-HS256-algorithm-security-purposes&#10;```&#10;&#10;**Production (application-prod.yml):**&#10;```yaml&#10;jwt:&#10;  secret: ${JWT_SECRET}  # Đọc từ biến môi trường&#10;```&#10;&#10;**Lưu ý:** JWT secret phải giống với auth-user service để verify token&#10;&#10;## Luồng xử lý request&#10;&#10;```&#10;Client&#10;  ↓ (Authorization: Bearer &lt;token&gt;)&#10;Nginx (:80)&#10;  ↓&#10;API Gateway (:9000)&#10;  ├─ LoggingFilter (log request)&#10;  ├─ JwtAuthenticationFilter (verify token)&#10;  │   ├─ Extract token từ header&#10;  │   ├─ Validate token&#10;  │   ├─ Extract user info (username, role, email)&#10;  │   └─ Inject vào header: X-User-Name, X-User-Role, X-User-Email&#10;  ├─ RoleAuthorizationFilter (check permission)&#10;  │   ├─ Lấy role từ header X-User-Role&#10;  │   └─ Kiểm tra quyền truy cập endpoint&#10;  └─ Route đến microservice&#10;       ↓&#10;Microservice (auth-user, station, booking, billing)&#10;  ├─ Đọc thông tin user từ header&#10;  └─ Xử lý business logic&#10;```&#10;&#10;## Headers được inject vào downstream services&#10;&#10;Gateway tự động inject các header sau cho microservices:&#10;&#10;```&#10;X-User-Name: john.doe&#10;X-User-Role: DRIVER&#10;X-User-Email: john.doe@example.com&#10;X-User-FullName: John Doe&#10;```&#10;&#10;Microservices có thể đọc thông tin này mà không cần verify JWT lại:&#10;&#10;```java&#10;@RestController&#10;public class StationController {&#10;    &#10;    @GetMapping(&quot;/api/stations/nearby&quot;)&#10;    public ResponseEntity&lt;?&gt; findNearby(&#10;        @RequestHeader(&quot;X-User-Name&quot;) String username,&#10;        @RequestHeader(&quot;X-User-Role&quot;) String role&#10;    ) {&#10;        // Sử dụng username và role đã được Gateway verify&#10;    }&#10;}&#10;```&#10;&#10;## Error Response Format&#10;&#10;**401 Unauthorized:**&#10;```json&#10;{&#10;  &quot;timestamp&quot;: &quot;2025-11-15 10:30:00&quot;,&#10;  &quot;statusCode&quot;: 401,&#10;  &quot;message&quot;: &quot;Token không tồn tại&quot;&#10;}&#10;```&#10;&#10;**403 Forbidden:**&#10;```json&#10;{&#10;  &quot;timestamp&quot;: &quot;2025-11-15 10:30:00&quot;,&#10;  &quot;statusCode&quot;: 403,&#10;  &quot;message&quot;: &quot;Bạn không có quyền truy cập tài nguyên này&quot;&#10;}&#10;```&#10;&#10;## Testing&#10;&#10;### 1. Test public endpoint (không cần token)&#10;```bash&#10;curl http://localhost:9000/api/stations/public&#10;```&#10;&#10;### 2. Test protected endpoint với token&#10;```bash&#10;# Login để lấy token&#10;curl -X POST http://localhost:9000/api/auth/oauth2/google/login \&#10;  -H &quot;Content-Type: application/json&quot; \&#10;  -d '{&quot;email&quot;: &quot;user@example.com&quot;, &quot;password&quot;: &quot;password123&quot;}'&#10;&#10;# Sử dụng token&#10;curl http://localhost:9000/api/stations/nearby?lat=10.762622&amp;lon=106.660172 \&#10;  -H &quot;Authorization: Bearer &lt;your-token&gt;&quot;&#10;```&#10;&#10;### 3. Test role authorization&#10;```bash&#10;# User với role DRIVER cố truy cập admin endpoint&#10;curl http://localhost:9000/api/admin/users \&#10;  -H &quot;Authorization: Bearer &lt;driver-token&gt;&quot;&#10;# → 403 Forbidden&#10;```&#10;&#10;## Monitoring&#10;&#10;### Health Check&#10;```bash&#10;curl http://localhost:9000/actuator/health&#10;```&#10;&#10;### Logs&#10;Kiểm tra logs trong console hoặc file:&#10;```&#10;→ Request [abc-123] GET /api/stations/nearby from 127.0.0.1&#10;Authenticated user: john.doe - Role: DRIVER&#10;Access granted for user with role DRIVER to path /api/stations/nearby&#10;← Response [abc-123] /api/stations/nearby - Status: 200 - Duration: 145ms&#10;```&#10;&#10;## Chạy Gateway&#10;&#10;### Development&#10;```bash&#10;cd api-gateway&#10;mvn spring-boot:run -Dspring-boot.run.profiles=dev&#10;```&#10;&#10;### Production (Docker)&#10;```bash&#10;docker-compose -f docker-compose.prod.yml up -d api-gateway&#10;```&#10;&#10;## Thêm endpoint cần bảo vệ&#10;&#10;Chỉnh sửa `RoleAuthorizationFilter.java`:&#10;&#10;```java&#10;private final Map&lt;String, List&lt;String&gt;&gt; endpointRoles = new HashMap&lt;&gt;() {{&#10;    // Thêm rule mới&#10;    put(&quot;/api/new-endpoint/**&quot;, Arrays.asList(&quot;REQUIRED_ROLE&quot;));&#10;}};&#10;```&#10;&#10;## Troubleshooting&#10;&#10;### Token bị reject dù hợp lệ&#10;- Kiểm tra JWT secret giống nhau giữa auth-user và gateway&#10;- Kiểm tra token chưa hết hạn&#10;- Kiểm tra format header: `Authorization: Bearer &lt;token&gt;`&#10;&#10;### CORS errors&#10;- Thêm origin vào `CorsConfig.java`&#10;- Kiểm tra frontend gửi credentials: `credentials: 'include'`&#10;&#10;### 403 Forbidden khi có token hợp lệ&#10;- Kiểm tra role mapping trong `RoleAuthorizationFilter`&#10;- Kiểm tra role trong token có đúng không&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/api-gateway/src/main/java/com/boilerplate/gateway/controller/DebugController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/api-gateway/src/main/java/com/boilerplate/gateway/controller/DebugController.java" />
              <option name="updatedContent" value="package com.boilerplate.gateway.controller;&#10;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.springframework.beans.factory.annotation.Value;&#10;import org.springframework.web.bind.annotation.GetMapping;&#10;import org.springframework.web.bind.annotation.RequestMapping;&#10;import org.springframework.web.bind.annotation.RestController;&#10;import reactor.core.publisher.Mono;&#10;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Controller để debug JWT configuration&#10; * CHỈ DÙNG CHO DEVELOPMENT - XÓA TRONG PRODUCTION&#10; */&#10;@RestController&#10;@RequestMapping(&quot;/debug&quot;)&#10;@Slf4j&#10;public class DebugController {&#10;&#10;    @Value(&quot;${jwt.secret}&quot;)&#10;    private String jwtSecret;&#10;&#10;    /**&#10;     * Endpoint để kiểm tra JWT secret info (KHÔNG trả về giá trị thực)&#10;     * CHỈ DÙNG TRONG DEV - PHẢI XÓA KHI PRODUCTION&#10;     */&#10;    @GetMapping(&quot;/jwt-info&quot;)&#10;    public Mono&lt;Map&lt;String, Object&gt;&gt; getJwtInfo() {&#10;        log.warn(&quot;DEBUG: JWT info endpoint được gọi - CHỈ DÙNG TRONG DEV&quot;);&#10;        &#10;        Map&lt;String, Object&gt; info = new HashMap&lt;&gt;();&#10;        info.put(&quot;secretLength&quot;, jwtSecret.length());&#10;        info.put(&quot;secretFirst10Chars&quot;, jwtSecret.substring(0, Math.min(10, jwtSecret.length())));&#10;        info.put(&quot;secretLast10Chars&quot;, jwtSecret.substring(Math.max(0, jwtSecret.length() - 10)));&#10;        info.put(&quot;secretHashCode&quot;, jwtSecret.hashCode());&#10;        &#10;        return Mono.just(info);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/API_SUPPORT_TICKET_GUIDE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/API_SUPPORT_TICKET_GUIDE.md" />
              <option name="updatedContent" value="## Hướng dẫn test API cập nhật trạng thái Support Ticket&#10;&#10;### 1. Tạo Support Ticket (DRIVER)&#10;```bash&#10;POST http://localhost:9001/api/support-tickets&#10;Authorization: Bearer &lt;DRIVER_TOKEN&gt;&#10;Content-Type: multipart/form-data&#10;&#10;- title: Pin không sạc&#10;- description: Cắm mãi không vào&#10;- ticketType: BATTERY_ISSUE&#10;- priority: HIGH&#10;- vehicleId: EV31141125VF5&#10;- location: Trạm Láng Hạ&#10;- attachments: [file1.jpg, file2.png]&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 201,&#10;  &quot;message&quot;: &quot;Gửi support ticket event thành công&quot;,&#10;  &quot;data&quot;: {&#10;    &quot;ticketId&quot;: &quot;TKT-1731648000000-a1b2c3d4&quot;,&#10;    &quot;status&quot;: &quot;SENT&quot;,&#10;    &quot;message&quot;: &quot;Ticket ưu tiên cao đã gửi. Xử lý trong 2 giờ.&quot;&#10;  }&#10;}&#10;```&#10;&#10;---&#10;&#10;### 2. Cập nhật trạng thái (STAFF/ADMIN)&#10;**Lưu ý**: `resolvedBy` tự động lấy từ `employeeId` trong token, không cần truyền!&#10;&#10;```bash&#10;PATCH http://localhost:9001/api/support-tickets/TKT-1731648000000-a1b2c3d4/status&#10;Authorization: Bearer &lt;STAFF_TOKEN&gt;&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;status&quot;: &quot;IN_PROGRESS&quot;,&#10;  &quot;notes&quot;: &quot;Đã liên hệ với khách hàng, đang kiểm tra pin&quot;&#10;}&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 200,&#10;  &quot;message&quot;: &quot;Cập nhật trạng thái thành công&quot;,&#10;  &quot;data&quot;: {&#10;    &quot;ticketId&quot;: &quot;TKT-1731648000000-a1b2c3d4&quot;,&#10;    &quot;status&quot;: &quot;IN_PROGRESS&quot;,&#10;    &quot;updatedAt&quot;: &quot;2025-11-15T10:30:00Z&quot;,&#10;    &quot;message&quot;: &quot;Cập nhật trạng thái thành công&quot;&#10;  }&#10;}&#10;```&#10;&#10;---&#10;&#10;### 3. Đánh dấu đã giải quyết (STAFF/ADMIN)&#10;```bash&#10;PATCH http://localhost:9001/api/support-tickets/TKT-1731648000000-a1b2c3d4/status&#10;Authorization: Bearer &lt;STAFF_TOKEN&gt;&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;status&quot;: &quot;RESOLVED&quot;,&#10;  &quot;notes&quot;: &quot;Đã thay pin mới, test hoạt động ổn định&quot;&#10;}&#10;```&#10;&#10;**Kết quả trong DB:**&#10;- `status`: RESOLVED&#10;- `resolvedBy`: STAFF001 (từ employeeId trong token)&#10;- `resolvedAt`: 2025-11-15T11:00:00Z&#10;- `resolutionNotes`: &#10;  ```&#10;  [2025-11-15T10:30:00Z - STAFF001]: Đã liên hệ với khách hàng, đang kiểm tra pin&#10;  [2025-11-15T11:00:00Z - STAFF001]: Đã thay pin mới, test hoạt động ổn định&#10;  ```&#10;&#10;---&#10;&#10;### 4. Đóng ticket (STAFF/ADMIN)&#10;```bash&#10;PATCH http://localhost:9001/api/support-tickets/TKT-1731648000000-a1b2c3d4/status&#10;Authorization: Bearer &lt;STAFF_TOKEN&gt;&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;status&quot;: &quot;CLOSED&quot;,&#10;  &quot;notes&quot;: &quot;Khách hàng xác nhận hài lòng&quot;&#10;}&#10;```&#10;&#10;---&#10;&#10;### 5. Xem chi tiết ticket (ALL ROLES)&#10;```bash&#10;GET http://localhost:9001/api/support-tickets/TKT-1731648000000-a1b2c3d4&#10;Authorization: Bearer &lt;TOKEN&gt;&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 200,&#10;  &quot;message&quot;: &quot;Lấy thông tin ticket thành công&quot;,&#10;  &quot;data&quot;: {&#10;    &quot;id&quot;: 1,&#10;    &quot;ticketId&quot;: &quot;TKT-1731648000000-a1b2c3d4&quot;,&#10;    &quot;user&quot;: { ... },&#10;    &quot;vehicle&quot;: { ... },&#10;    &quot;location&quot;: &quot;Trạm Láng Hạ&quot;,&#10;    &quot;ticketType&quot;: &quot;BATTERY_ISSUE&quot;,&#10;    &quot;priority&quot;: &quot;HIGH&quot;,&#10;    &quot;status&quot;: &quot;CLOSED&quot;,&#10;    &quot;title&quot;: &quot;Pin không sạc&quot;,&#10;    &quot;description&quot;: &quot;Cắm mãi không vào&quot;,&#10;    &quot;attachments&quot;: [&#10;      &quot;https://bucket.s3.region.amazonaws.com/file1.jpg&quot;,&#10;      &quot;https://bucket.s3.region.amazonaws.com/file2.png&quot;&#10;    ],&#10;    &quot;incidentTime&quot;: &quot;2025-11-15T09:00:00Z&quot;,&#10;    &quot;resolvedAt&quot;: &quot;2025-11-15T11:00:00Z&quot;,&#10;    &quot;resolvedBy&quot;: &quot;STAFF001&quot;,&#10;    &quot;resolutionNotes&quot;: &quot;[2025-11-15T10:30:00Z - STAFF001]: Đã liên hệ với khách hàng...\n[2025-11-15T11:00:00Z - STAFF001]: Đã thay pin mới...\n[2025-11-15T11:15:00Z - STAFF001]: Khách hàng xác nhận hài lòng&quot;,&#10;    &quot;createdAt&quot;: &quot;2025-11-15T09:05:00Z&quot;,&#10;    &quot;updatedAt&quot;: &quot;2025-11-15T11:15:00Z&quot;&#10;  }&#10;}&#10;```&#10;&#10;---&#10;&#10;## Các trường hợp lỗi&#10;&#10;### 1. Không có quyền cập nhật (DRIVER)&#10;```bash&#10;PATCH /api/support-tickets/{ticketId}/status&#10;Authorization: Bearer &lt;DRIVER_TOKEN&gt;&#10;```&#10;**Response:** 403 Forbidden&#10;&#10;### 2. Ticket không tồn tại&#10;```bash&#10;PATCH /api/support-tickets/INVALID_ID/status&#10;```&#10;**Response:** &#10;```json&#10;{&#10;  &quot;statusCode&quot;: 404,&#10;  &quot;message&quot;: &quot;Không tìm thấy support ticket: INVALID_ID&quot;&#10;}&#10;```&#10;&#10;### 3. Status không hợp lệ&#10;```bash&#10;{&#10;  &quot;status&quot;: &quot;INVALID_STATUS&quot;&#10;}&#10;```&#10;**Response:** 400 Bad Request&#10;&#10;---&#10;&#10;## Ưu điểm của thiết kế này&#10;&#10;✅ **Bảo mật**: `resolvedBy` tự động lấy từ token, không thể giả mạo&#10;✅ **Audit trail**: Mỗi lần cập nhật đều ghi log với timestamp và employeeId&#10;✅ **Truy vết**: Biết chính xác ai đã xử lý ticket, khi nào&#10;✅ **Đơn giản**: API không cần truyền `resolvedBy`, giảm phức tạp&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/FIX_STATUS_CONSTRAINT.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/FIX_STATUS_CONSTRAINT.md" />
              <option name="updatedContent" value="#  Hướng dẫn khắc phục lỗi &quot;chk_status constraint&quot;&#10;&#10;## ❌ Vấn đề&#10;```&#10;ERROR: new row for relation &quot;users&quot; violates check constraint &quot;chk_status&quot;&#10;Detail: Failing row contains (..., PENDING_VERIFICATION, ...)&#10;```&#10;&#10;##  Nguyên nhân&#10;Có sự **không khớp giữa database constraint và Java enum**:&#10;&#10;### Database (V1__init_schema.sql) - CHỈ cho phép 4 giá trị:&#10;```sql&#10;CONSTRAINT chk_status CHECK (status IN ('PENDING_APPROVAL', 'ACTIVE', 'INACTIVE', 'REJECTED'))&#10;```&#10;&#10;### Java enum (UserStatus.java) - Có 6 giá trị:&#10;```java&#10;public enum UserStatus {&#10;    PENDING_APPROVAL,&#10;    REJECTED,&#10;    PENDING_VERIFICATION,  // ❌ Không có trong DB constraint&#10;    ACTIVE,&#10;    INACTIVE,&#10;    BANNED                 // ❌ Không có trong DB constraint&#10;}&#10;```&#10;&#10;Khi admin phê duyệt đơn đăng ký, hệ thống set `status = PENDING_VERIFICATION`, nhưng database không chấp nhận giá trị này → **Lỗi constraint violation!**&#10;&#10;## ✅ Giải pháp đã áp dụng&#10;&#10;### Bước 1: Tạo migration V2&#10;Đã tạo file `V2__update_user_status_constraint.sql` để cập nhật constraint:&#10;&#10;```sql&#10;-- Xóa constraint cũ&#10;ALTER TABLE users DROP CONSTRAINT IF EXISTS chk_status;&#10;&#10;-- Thêm constraint mới với đầy đủ 6 giá trị&#10;ALTER TABLE users ADD CONSTRAINT chk_status &#10;    CHECK (status IN ('PENDING_APPROVAL', 'REJECTED', 'PENDING_VERIFICATION', 'ACTIVE', 'INACTIVE', 'BANNED'));&#10;```&#10;&#10;### Bước 2: Rebuild service&#10;```bash&#10;cd auth-user&#10;mvn clean compile&#10;```&#10;&#10;✅ File migration V2 đã được copy vào `target/classes/db/migration/`&#10;&#10;### Bước 3: Restart service để Flyway chạy migration&#10;Khi restart, Flyway sẽ:&#10;1. Phát hiện migration mới `V2__update_user_status_constraint.sql`&#10;2. Tự động chạy migration này&#10;3. Cập nhật constraint trong database&#10;4. Ghi log vào bảng `flyway_schema_history`&#10;&#10;##  Cách restart service&#10;&#10;### Option 1: Restart từ IDE&#10;- Stop service hiện tại (Ctrl+C)&#10;- Run lại: `mvn spring-boot:run`&#10;&#10;### Option 2: Restart bằng script&#10;```bash&#10;.\run-dev.bat&#10;```&#10;&#10;### Option 3: Restart bằng Maven&#10;```bash&#10;cd D:\Code\SpringBoot3\EV_Battery_SwapStation_MS\BE_EVBSSMS\auth-user&#10;mvn spring-boot:run&#10;```&#10;&#10;##  Kiểm tra sau khi restart&#10;&#10;### 1. Kiểm tra log Flyway&#10;Khi service khởi động, bạn sẽ thấy log:&#10;```&#10;INFO [o.f.c.i.s.JdbcTableSchemaHistory] - Creating Schema History table &quot;public&quot;.&quot;flyway_schema_history&quot; ...&#10;INFO [o.f.core.internal.command.DbMigrate] - Migrating schema &quot;public&quot; to version &quot;2 - update user status constraint&quot;&#10;INFO [o.f.core.internal.command.DbMigrate] - Successfully applied 1 migration to schema &quot;public&quot; (execution time 00:00.123s)&#10;```&#10;&#10;### 2. Kiểm tra database&#10;Kết nối vào PostgreSQL và chạy:&#10;```sql&#10;-- Kiểm tra constraint mới&#10;SELECT conname, pg_get_constraintdef(oid) &#10;FROM pg_constraint &#10;WHERE conname = 'chk_status';&#10;&#10;-- Kết quả mong đợi:&#10;-- chk_status | CHECK (status::text = ANY (ARRAY['PENDING_APPROVAL'::character varying, 'REJECTED'::character varying, 'PENDING_VERIFICATION'::character varying, 'ACTIVE'::character varying, 'INACTIVE'::character varying, 'BANNED'::character varying]::text[]))&#10;&#10;-- Kiểm tra lịch sử migration&#10;SELECT * FROM flyway_schema_history ORDER BY installed_rank;&#10;&#10;-- Kết quả mong đợi:&#10;-- installed_rank | version | description                      | type | script                                     | success&#10;-- ---------------+---------+----------------------------------+------+--------------------------------------------+---------&#10;-- 1              | 1       | init schema                      | SQL  | V1__init_schema.sql                        | t&#10;-- 2              | 2       | update user status constraint    | SQL  | V2__update_user_status_constraint.sql      | t&#10;```&#10;&#10;### 3. Test lại luồng đăng ký → phê duyệt&#10;```bash&#10;# 1. Đăng ký tài khoản mới&#10;POST /api/auth/oauth2/google/register&#10;→ status = PENDING_APPROVAL ✅&#10;&#10;# 2. Admin phê duyệt&#10;POST /api/admin/approve-registration&#10;→ status = PENDING_VERIFICATION ✅ (Không còn lỗi constraint!)&#10;&#10;# 3. User verify OTP&#10;POST /api/auth/verify-otp&#10;→ status = ACTIVE ✅&#10;```&#10;&#10;##  Troubleshooting&#10;&#10;### ❌ Lỗi: &quot;Flyway failed to initialize&quot;&#10;**Nguyên nhân:** Database connection bị lỗi hoặc schema không tồn tại.&#10;&#10;**Giải pháp:**&#10;```bash&#10;# Kiểm tra database đã chạy chưa&#10;docker ps | grep postgres&#10;&#10;# Nếu chưa chạy&#10;docker start auth-user-db&#10;```&#10;&#10;### ❌ Lỗi: &quot;Migration checksum mismatch&quot;&#10;**Nguyên nhân:** File migration V1 đã bị thay đổi sau khi đã chạy.&#10;&#10;**Giải pháp:**&#10;```sql&#10;-- Xóa lịch sử migration cũ (CHỈ dùng trong development!)&#10;DELETE FROM flyway_schema_history WHERE version = '2';&#10;&#10;-- Sau đó restart service&#10;```&#10;&#10;### ❌ Vẫn còn lỗi constraint sau khi restart&#10;**Nguyên nhân:** Migration chưa được chạy hoặc bị lỗi.&#10;&#10;**Giải pháp:**&#10;```bash&#10;# 1. Kiểm tra log&#10;docker logs -f auth-user-service&#10;&#10;# 2. Kiểm tra Flyway history&#10;SELECT * FROM flyway_schema_history;&#10;&#10;# 3. Nếu migration V2 chưa có, chạy thủ công:&#10;psql -U ev -d authdb -f src/main/resources/db/migration/V2__update_user_status_constraint.sql&#10;```&#10;&#10;##  Tài liệu tham khảo&#10;&#10;- [Flyway Documentation](https://flywaydb.org/documentation/)&#10;- [PostgreSQL CHECK Constraint](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-CHECK-CONSTRAINTS)&#10;- [Spring Boot Flyway Integration](https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.data-initialization.migration-tool.flyway)&#10;&#10;##  Lưu ý quan trọng&#10;&#10;1. **Không sửa migration đã chạy**: Migration V1 đã được apply, không nên sửa file này nữa&#10;2. **Luôn tạo migration mới**: Khi cần thay đổi schema, tạo migration mới (V2, V3, ...)&#10;3. **Kiểm tra enum và constraint**: Đảm bảo Java enum và database constraint luôn khớp nhau&#10;4. **Test sau mỗi migration**: Luôn test lại các luồng nghiệp vụ sau khi chạy migration mới&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/MAILHOG_SETUP.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/MAILHOG_SETUP.md" />
              <option name="updatedContent" value="#  Hướng dẫn sử dụng MailHog để test email&#10;&#10;##  Mục đích&#10;MailHog là một SMTP server dùng để test email trong môi trường development. Tất cả email được gửi từ ứng dụng sẽ bị &quot;chặn&quot; bởi MailHog thay vì gửi đến địa chỉ email thật.&#10;&#10;## ✅ Cấu hình đã được thiết lập&#10;&#10;### 1. File `application.yml`&#10;```yaml&#10;mail:&#10;  host: ${MAIL_HOST:localhost}&#10;  port: ${MAIL_PORT:1025}&#10;  username: ${MAIL_USERNAME:}&#10;  password: ${MAIL_PASSWORD:}&#10;  properties:&#10;    mail:&#10;      smtp:&#10;        auth: ${MAIL_SMTP_AUTH:false}&#10;        starttls:&#10;          enable: ${MAIL_SMTP_STARTTLS:false}&#10;          required: ${MAIL_SMTP_STARTTLS:false}&#10;```&#10;&#10;### 2. File `.env`&#10;```bash&#10;MAIL_HOST=localhost&#10;MAIL_PORT=1025&#10;MAIL_USERNAME=&#10;MAIL_PASSWORD=&#10;MAIL_FROM=noreply@evbss.com&#10;MAIL_SMTP_AUTH=false&#10;MAIL_SMTP_STARTTLS=false&#10;```&#10;&#10;##  Cách sử dụng&#10;&#10;### 1️⃣ Khởi động MailHog (đã chạy rồi)&#10;```bash&#10;# Kiểm tra MailHog đã chạy chưa&#10;docker ps | grep mailhog&#10;&#10;# Nếu chưa chạy, start MailHog&#10;docker start base-mailhog&#10;```&#10;&#10;### 2️⃣ Truy cập MailHog Web UI&#10;Mở browser và truy cập: **http://localhost:8025**&#10;&#10;Bạn sẽ thấy giao diện như sau:&#10;- **Inbox**: Danh sách email đã nhận&#10;- **Search**: Tìm kiếm email&#10;- **Delete**: Xóa email&#10;&#10;### 3️⃣ Test gửi email OTP&#10;&#10;#### Bước 1: Đăng ký tài khoản mới&#10;```bash&#10;POST http://localhost:8080/api/auth/oauth2/google/register&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;idToken&quot;: &quot;eyJhbGc...&quot;,&#10;  &quot;phone&quot;: &quot;+84987654321&quot;,&#10;  &quot;birthday&quot;: &quot;1990-01-15&quot;,&#10;  &quot;role&quot;: &quot;DRIVER&quot;,&#10;  &quot;address&quot;: &quot;123 Đường ABC, Quận 1, TP.HCM&quot;,&#10;  &quot;identityCard&quot;: &quot;123456789012&quot;,&#10;  &quot;vehicles&quot;: [&#10;    {&#10;      &quot;vin&quot;: &quot;VIN123456789&quot;,&#10;      &quot;model&quot;: &quot;VF 8&quot;,&#10;      &quot;licensePlate&quot;: &quot;51A-12345&quot;,&#10;      &quot;batteryType&quot;: &quot;Lithium-ion&quot;,&#10;      &quot;batteryCapacity&quot;: 87.7&#10;    }&#10;  ]&#10;}&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 201,&#10;  &quot;message&quot;: &quot;Đăng ký thành công! Đơn của bạn đang chờ Admin phê duyệt. Bạn sẽ nhận được email khi đơn được duyệt.&quot;,&#10;  &quot;user&quot;: { ... }&#10;}&#10;```&#10;&#10;**Email 1 được gửi:** &quot;Đơn đăng ký của bạn đang được xử lý&quot;&#10;&#10;#### Bước 2: Admin phê duyệt đơn đăng ký&#10;```bash&#10;POST http://localhost:8080/api/admin/approve-registration&#10;Authorization: Bearer &lt;ADMIN_JWT_TOKEN&gt;&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;userId&quot;: 1,&#10;  &quot;approved&quot;: true&#10;}&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 200,&#10;  &quot;message&quot;: &quot;Đã phê duyệt đơn đăng ký thành công. OTP đã được gửi đến email của người dùng.&quot;&#10;}&#10;```&#10;&#10;**Email 2 được gửi:** &#10;1. Email thông báo được chấp nhận&#10;2. Email chứa mã OTP (6 chữ số)&#10;&#10;#### Bước 3: Kiểm tra email trong MailHog&#10;1. Mở **http://localhost:8025**&#10;2. Bạn sẽ thấy 2 email mới:&#10;   - **Email 1**: &quot;Đơn đăng ký của bạn đang được xử lý&quot;&#10;   - **Email 2**: &quot;Đơn đăng ký được chấp nhận&quot;&#10;   - **Email 3**: &quot;Mã OTP xác thực tài khoản&quot; (ví dụ: `123456`)&#10;&#10;#### Bước 4: Verify OTP&#10;```bash&#10;POST http://localhost:8080/api/auth/verify-otp&#10;Content-Type: application/json&#10;&#10;{&#10;  &quot;email&quot;: &quot;user@example.com&quot;,&#10;  &quot;otpCode&quot;: &quot;123456&quot;&#10;}&#10;```&#10;&#10;**Response:**&#10;```json&#10;{&#10;  &quot;statusCode&quot;: 200,&#10;  &quot;message&quot;: &quot;Xác thực OTP thành công!&quot;,&#10;  &quot;accessToken&quot;: &quot;eyJhbGc...&quot;,&#10;  &quot;refreshToken&quot;: &quot;eyJhbGc...&quot;,&#10;  &quot;user&quot;: { ... }&#10;}&#10;```&#10;&#10;##  Các loại email được gửi trong hệ thống&#10;&#10;| Sự kiện | Tiêu đề email | Thời điểm |&#10;|---------|---------------|-----------|&#10;| Đăng ký tài khoản | &quot;Đơn đăng ký của bạn đang được xử lý&quot; | Ngay sau khi đăng ký |&#10;| Admin chấp nhận | &quot;Đơn đăng ký được chấp nhận&quot; | Khi admin approve |&#10;| Gửi OTP | &quot;Mã OTP xác thực tài khoản&quot; | Khi admin approve |&#10;| Admin từ chối | &quot;Đơn đăng ký bị từ chối&quot; | Khi admin reject |&#10;| Tài khoản đã active | &quot;Chào mừng đến với EV Battery Swap Station&quot; | Sau khi verify OTP thành công |&#10;&#10;##  Troubleshooting&#10;&#10;### ❌ Lỗi: &quot;STARTTLS is required but host does not support STARTTLS&quot;&#10;**Nguyên nhân:** Cấu hình email đang yêu cầu STARTTLS nhưng MailHog không hỗ trợ.&#10;&#10;**Giải pháp:** Đã được sửa trong `application.yml`:&#10;```yaml&#10;starttls:&#10;  enable: false&#10;  required: false&#10;```&#10;&#10;### ❌ Lỗi: &quot;Connection refused&quot; khi gửi email&#10;**Nguyên nhân:** MailHog chưa chạy hoặc port bị chiếm.&#10;&#10;**Giải pháp:**&#10;```bash&#10;# Kiểm tra MailHog đã chạy chưa&#10;docker ps | grep mailhog&#10;&#10;# Restart MailHog&#10;docker restart base-mailhog&#10;&#10;# Kiểm tra log&#10;docker logs base-mailhog&#10;```&#10;&#10;### ❌ Không thấy email trong MailHog&#10;**Nguyên nhân:** &#10;1. Kafka chưa chạy&#10;2. Consumer chưa lắng nghe&#10;3. Cấu hình email sai&#10;&#10;**Giải pháp:**&#10;```bash&#10;# 1. Kiểm tra Kafka&#10;docker ps | grep kafka&#10;&#10;# 2. Kiểm tra log của auth-user service&#10;docker logs -f auth-user-service&#10;&#10;# Tìm dòng log:&#10;# ✅ &quot;Đã tạo và gửi OTP cho user: xxx@gmail.com&quot;&#10;# ✅ &quot;Đã gửi email event lên Kafka: xxx@gmail.com&quot;&#10;# ✅ &quot;Đã gửi email thành công đến: xxx@gmail.com&quot;&#10;```&#10;&#10;##  Giao diện MailHog&#10;&#10;Khi truy cập **http://localhost:8025**, bạn sẽ thấy:&#10;&#10;```&#10;┌─────────────────────────────────────────────┐&#10;│  MailHog                                    │&#10;├─────────────────────────────────────────────┤&#10;│   Messages (3)                            │&#10;│  ┌─────────────────────────────────────┐   │&#10;│  │ From: noreply@evbss.com             │   │&#10;│  │ To: user@example.com                │   │&#10;│  │ Subject: Mã OTP xác thực tài khoản  │   │&#10;│  │ Time: 2025-10-11 10:30:00           │   │&#10;│  └─────────────────────────────────────┘   │&#10;│  ┌─────────────────────────────────────┐   │&#10;│  │ From: noreply@evbss.com             │   │&#10;│  │ To: user@example.com                │   │&#10;│  │ Subject: Đơn đăng ký được chấp nhận │   │&#10;│  │ Time: 2025-10-11 10:29:50           │   │&#10;│  └─────────────────────────────────────┘   │&#10;└─────────────────────────────────────────────┘&#10;```&#10;&#10;##  Lưu ý quan trọng&#10;&#10;1. **MailHog chỉ dùng cho Development**: Không dùng MailHog trong Production&#10;2. **Email không được gửi ra ngoài**: Tất cả email đều bị chặn bởi MailHog&#10;3. **Không cần username/password**: MailHog không yêu cầu xác thực SMTP&#10;4. **Email được giữ trong memory**: Restart MailHog sẽ mất tất cả email&#10;5. **Port 1025**: SMTP port của MailHog (khác với Gmail là 587)&#10;6. **Port 8025**: Web UI của MailHog&#10;&#10;##  Tham khảo&#10;&#10;- [MailHog Official GitHub](https://github.com/mailhog/MailHog)&#10;- [Spring Boot Mail Documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/io.html#io.email)&#10;- [Kafka Documentation](https://kafka.apache.org/documentation/)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/VERIFICATION_TOKEN_MIGRATION.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/VERIFICATION_TOKEN_MIGRATION.md" />
              <option name="updatedContent" value="# Thay đổi luồng xác nhận đăng ký: OTP 5 phút → Verification Token 48 giờ&#10;&#10;## Tổng quan thay đổi&#10;&#10;### Luồng cũ (DEPRECATED)&#10;1. User đăng ký → trạng thái `PENDING_APPROVAL`&#10;2. Admin phê duyệt → trạng thái `PENDING_VERIFICATION`&#10;3. Hệ thống gửi OTP 6 số qua email (hiệu lực 5 phút)&#10;4. User nhập OTP vào form → trạng thái `ACTIVE`&#10;5. Vấn đề: User phải chờ admin online và nhập OTP ngay trong 5 phút&#10;&#10;### Luồng mới (HIỆN TẠI)&#10;1. User đăng ký → trạng thái `PENDING_APPROVAL`&#10;2. Admin phê duyệt → trạng thái `PENDING_VERIFICATION`&#10;3. Hệ thống tạo verification token và gửi email với link xác nhận (hiệu lực 48 giờ)&#10;4. User click vào link trong email → trạng thái `ACTIVE`&#10;5. Ưu điểm: User có 2 ngày để xác nhận, không cần chờ admin online&#10;&#10;## Chi tiết kỹ thuật&#10;&#10;### 1. Entity mới: VerificationToken&#10;**File:** `entity/VerificationToken.java`&#10;&#10;Bảng `verification_tokens` lưu trữ token xác nhận:&#10;- `token`: UUID string (unique)&#10;- `user_id`: Foreign key đến bảng users&#10;- `expires_at`: Thời gian hết hạn (created_at + 48 giờ)&#10;- `is_used`: Flag đánh dấu token đã sử dụng&#10;- `verified_at`: Timestamp khi user xác nhận&#10;&#10;### 2. Repository: VerificationTokenRepository&#10;**File:** `repository/VerificationTokenRepository.java`&#10;&#10;Các query quan trọng:&#10;- `findByToken(String token)`: Tìm token&#10;- `findValidTokenByUserId(Long userId, LocalDateTime now)`: Tìm token hợp lệ của user&#10;- `deleteExpiredTokens(LocalDateTime now)`: Xóa token hết hạn (scheduled task)&#10;- `markOldTokensAsUsed(Long userId)`: Vô hiệu hóa token cũ khi tạo token mới&#10;&#10;### 3. Service: VerificationTokenService&#10;**File:** `service/VerificationTokenService.java`&#10;&#10;Các phương thức chính:&#10;- `createVerificationToken(User user)`: Tạo token mới cho user&#10;- `verifyToken(String tokenString)`: Xác thực token và kích hoạt tài khoản&#10;- `isTokenValid(String tokenString)`: Kiểm tra token có hợp lệ không&#10;- `cleanupExpiredTokens()`: Scheduled task chạy mỗi ngày lúc 2h sáng để xóa token hết hạn&#10;&#10;### 4. Controller: VerificationController&#10;**File:** `controller/VerificationController.java`&#10;&#10;API endpoints mới:&#10;- `GET /api/verification/confirm?token={token}`: Xác nhận đăng ký&#10;- `GET /api/verification/check-token?token={token}`: Kiểm tra token hợp lệ&#10;&#10;### 5. Cập nhật AuthService&#10;**File:** `service/AuthService.java`&#10;&#10;Thay đổi trong method `approveRegistration()`:&#10;```java&#10;// CŨ&#10;otpService.createAndSendOtp(user, OtpType.REGISTRATION);&#10;sendApprovalEmailToUser(user);&#10;&#10;// MỚI&#10;var verificationToken = verificationTokenService.createVerificationToken(user);&#10;sendApprovalEmailWithVerificationLink(user, verificationToken.getToken());&#10;```&#10;&#10;Method deprecated:&#10;- `verifyOtp()`: Giữ lại để tương thích ngược nhưng không khuyến khích dùng&#10;- `resendOtp()`: Ném exception yêu cầu liên hệ admin&#10;&#10;### 6. Email Template&#10;**File:** `service/AuthService.java` - method `sendApprovalEmailWithVerificationLink()`&#10;&#10;Email chứa:&#10;- Thông báo chúc mừng được phê duyệt&#10;- Button &quot;Xác nhận đăng ký&quot; link đến: `{FRONTEND_URL}/verify-registration?token={token}`&#10;- Cảnh báo link có hiệu lực 48 giờ&#10;- Link dạng text để copy/paste&#10;&#10;### 7. Database Migration&#10;**File:** `db/migration/V7__create_verification_tokens_table.sql`&#10;&#10;Tạo bảng `verification_tokens` với các index tối ưu:&#10;- Index trên `token` (unique lookup)&#10;- Index trên `user_id` (tìm token của user)&#10;- Index trên `expires_at` (xóa token hết hạn)&#10;&#10;### 8. Configuration&#10;**File:** `application.yml`&#10;&#10;Thêm config:&#10;```yaml&#10;app:&#10;  frontend-url: ${FRONTEND_URL:http://localhost:3000}&#10;  verification-token-expiration-hours: ${VERIFICATION_TOKEN_EXPIRATION_HOURS:48}&#10;```&#10;&#10;### 9. Security Config&#10;**File:** `security/config/SecurityConfig.java`&#10;&#10;Thêm endpoint public:&#10;```java&#10;.requestMatchers(&quot;/api/verification/**&quot;).permitAll()&#10;```&#10;&#10;### 10. Scheduled Task&#10;**File:** `AuthUserApplication.java`&#10;&#10;Thêm annotation `@EnableScheduling` để kích hoạt scheduled task dọn dẹp token hết hạn.&#10;&#10;## API Endpoints&#10;&#10;### Mới (Sử dụng)&#10;```&#10;GET /api/verification/confirm?token={token}&#10;- Public endpoint&#10;- Xác nhận đăng ký qua token&#10;- Response: Thông tin user + redirect URL đến trang login&#10;&#10;GET /api/verification/check-token?token={token}&#10;- Public endpoint&#10;- Kiểm tra token có hợp lệ không&#10;- Response: { isValid: boolean }&#10;```&#10;&#10;### Deprecated (Không khuyến khích)&#10;```&#10;POST /api/auth/verify-otp&#10;- Vẫn hoạt động nhưng đã lỗi thời&#10;- Nên xóa trong version tương lai&#10;&#10;POST /api/auth/resend-otp&#10;- Ném exception yêu cầu liên hệ admin&#10;- Nên xóa trong version tương lai&#10;```&#10;&#10;## Luồng hoạt động Frontend&#10;&#10;### 1. Trang xác nhận đăng ký&#10;**URL:** `/verify-registration?token={token}`&#10;&#10;Khi user click vào link trong email:&#10;1. Frontend lấy token từ URL query parameter&#10;2. (Optional) Gọi `/api/verification/check-token` để kiểm tra token trước&#10;3. Hiển thị màn hình xác nhận&#10;4. Gọi `/api/verification/confirm?token={token}`&#10;5. Nếu thành công:&#10;   - Hiển thị thông báo &quot;Xác nhận thành công!&quot;&#10;   - Redirect đến trang login sau 3 giây&#10;6. Nếu thất bại (token hết hạn/không hợp lệ):&#10;   - Hiển thị lỗi &quot;Link đã hết hạn hoặc không hợp lệ&quot;&#10;   - Hướng dẫn liên hệ admin&#10;&#10;### 2. Xử lý lỗi&#10;- **Token không tồn tại:** &quot;Link xác nhận không hợp lệ&quot;&#10;- **Token đã sử dụng:** &quot;Link này đã được sử dụng&quot;&#10;- **Token hết hạn:** &quot;Link đã hết hạn sau 48 giờ. Vui lòng liên hệ admin&quot;&#10;- **User không ở trạng thái PENDING_VERIFICATION:** &quot;Tài khoản đã được xác thực hoặc chưa được phê duyệt&quot;&#10;&#10;## Testing&#10;&#10;### Unit Test&#10;**File:** `test/service/VerificationTokenServiceTest.java`&#10;&#10;Test cases:&#10;- Tạo token thành công&#10;- Xác thực token thành công&#10;- Token không tồn tại → ném ResourceNotFoundException&#10;- Token đã sử dụng → ném InvalidCredentialsException&#10;- Token hết hạn → ném InvalidCredentialsException&#10;- Kiểm tra token hợp lệ/không hợp lệ&#10;&#10;### Manual Test&#10;1. Đăng ký user mới → trạng thái PENDING_APPROVAL&#10;2. Admin approve → nhận email với link xác nhận&#10;3. Click link → tài khoản chuyển sang ACTIVE&#10;4. Đăng nhập thành công&#10;&#10;## Migration Guide cho Frontend&#10;&#10;### Thay đổi cần thực hiện:&#10;1. **Xóa form nhập OTP** (không còn cần thiết)&#10;2. **Tạo trang xác nhận mới** (`/verify-registration`)&#10;3. **Cập nhật flow sau khi đăng ký:**&#10;   - Cũ: &quot;Chờ admin duyệt → Nhập OTP&quot;&#10;   - Mới: &quot;Chờ admin duyệt → Kiểm tra email → Click link&quot;&#10;4. **Xóa API calls:**&#10;   - `POST /api/auth/verify-otp`&#10;   - `POST /api/auth/resend-otp`&#10;5. **Thêm API calls mới:**&#10;   - `GET /api/verification/confirm?token={token}`&#10;   - `GET /api/verification/check-token?token={token}` (optional)&#10;&#10;## Lợi ích&#10;&#10;1. **Trải nghiệm người dùng tốt hơn:**&#10;   - Không cần chờ admin online&#10;   - Có 48 giờ để xác nhận thay vì 5 phút&#10;   - Chỉ cần click link, không cần nhập mã&#10;&#10;2. **Bảo mật tốt hơn:**&#10;   - Token là UUID dài và phức tạp&#10;   - Mỗi token chỉ dùng được 1 lần&#10;   - Tự động xóa token hết hạn&#10;&#10;3. **Giảm tải cho admin:**&#10;   - Không cần phải online cùng lúc với user&#10;   - Giảm số lượng ticket hỗ trợ &quot;OTP hết hạn&quot;&#10;&#10;4. **Phù hợp với best practices:**&#10;   - Nhiều hệ thống lớn dùng email verification link thay vì OTP&#10;   - Gmail, GitHub, etc. đều dùng cách này&#10;&#10;## Roadmap tiếp theo&#10;&#10;1. **Version 1.1:** Giữ cả 2 luồng (OTP + Token) để tương thích&#10;2. **Version 1.2:** Thông báo deprecation warning cho API OTP&#10;3. **Version 2.0:** Xóa hoàn toàn luồng OTP cho registration&#10;4. **Future:** Thêm tính năng &quot;Resend verification email&quot; cho user tự yêu cầu gửi lại&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;auth-user-service&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;auth-user-service&lt;/name&gt;&#10;&#9;&lt;description&gt;Auth User Service for EV Battery Swap Station Management System&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&#9;&lt;spring-cloud.version&gt;2024.0.0&lt;/spring-cloud.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Kafka --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Java Mail Sender --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Thymeleaf for Email Templates --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- AWS SDK for S3 --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;s3&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.20.26&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- JWT --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;0.12.6&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;0.12.6&lt;/version&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;0.12.6&lt;/version&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Google API Client cho OAuth2 --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;com.google.api-client&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;google-api-client&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.7.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Dotenv - Load .env file --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.github.cdimascio&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;dotenv-java&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;3.0.2&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- Eureka Discovery Client --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;!-- Test Dependencies --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;dependencyManagement&gt;&#10;&#9;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;version&gt;${spring-cloud.version}&lt;/version&gt;&#10;&#9;&#9;&#9;&#9;&lt;type&gt;pom&lt;/type&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;import&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;/dependencies&gt;&#10;&#9;&lt;/dependencyManagement&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;version&gt;3.11.0&lt;/version&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;source&gt;21&lt;/source&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;target&gt;21&lt;/target&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;release&gt;21&lt;/release&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;version&gt;1.18.42&lt;/version&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#13;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#13;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#13;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#13;&#10;&#9;&lt;parent&gt;&#13;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#13;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#13;&#10;&#9;&lt;/parent&gt;&#13;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#13;&#10;&#9;&lt;artifactId&gt;auth-user-service&lt;/artifactId&gt;&#13;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#13;&#10;&#9;&lt;name&gt;auth-user-service&lt;/name&gt;&#13;&#10;&#9;&lt;description&gt;Auth User Service for EV Battery Swap Station Management System&lt;/description&gt;&#13;&#10;&#9;&lt;url/&gt;&#13;&#10;&#9;&lt;licenses&gt;&#13;&#10;&#9;&#9;&lt;license/&gt;&#13;&#10;&#9;&lt;/licenses&gt;&#13;&#10;&#9;&lt;developers&gt;&#13;&#10;&#9;&#9;&lt;developer/&gt;&#13;&#10;&#9;&lt;/developers&gt;&#13;&#10;&#9;&lt;scm&gt;&#13;&#10;&#9;&#9;&lt;connection/&gt;&#13;&#10;&#9;&#9;&lt;developerConnection/&gt;&#13;&#10;&#9;&#9;&lt;tag/&gt;&#13;&#10;&#9;&#9;&lt;url/&gt;&#13;&#10;&#9;&lt;/scm&gt;&#13;&#10;&#9;&lt;properties&gt;&#13;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#13;&#10;&#9;&#9;&lt;spring-cloud.version&gt;2024.0.0&lt;/spring-cloud.version&gt;&#13;&#10;&#9;&lt;/properties&gt;&#13;&#10;&#9;&lt;dependencies&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#13;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#13;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- Kafka --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- Java Mail Sender --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- Thymeleaf for Email Templates --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- AWS SDK for S3 --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;s3&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.20.26&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- JWT --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;version&gt;0.12.6&lt;/version&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;version&gt;0.12.6&lt;/version&gt;&#13;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;version&gt;0.12.6&lt;/version&gt;&#13;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#13;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- Google API Client cho OAuth2 --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;com.google.api-client&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;google-api-client&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;version&gt;2.7.0&lt;/version&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- Dotenv - Load .env file --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;io.github.cdimascio&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;dotenv-java&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;version&gt;3.0.2&lt;/version&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#13;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#13;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;!-- Eureka Discovery Client --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#13;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;!-- Test Dependencies --&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&lt;/dependencies&gt;&#13;&#10;&#13;&#10;&#9;&lt;dependencyManagement&gt;&#13;&#10;&#9;&#9;&lt;dependencies&gt;&#13;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;version&gt;${spring-cloud.version}&lt;/version&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;type&gt;pom&lt;/type&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;import&lt;/scope&gt;&#13;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#13;&#10;&#9;&#9;&lt;/dependencies&gt;&#13;&#10;&#9;&lt;/dependencyManagement&gt;&#13;&#10;&#13;&#10;&#9;&lt;build&gt;&#13;&#10;&#9;&#9;&lt;plugins&gt;&#13;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;version&gt;3.11.0&lt;/version&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;source&gt;21&lt;/source&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;target&gt;21&lt;/target&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;release&gt;21&lt;/release&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;version&gt;1.18.42&lt;/version&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#13;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#13;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#13;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#13;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#13;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#13;&#10;&#9;&#9;&lt;/plugins&gt;&#13;&#10;&#9;&lt;/build&gt;&#13;&#10;&#13;&#10;&lt;/project&gt;&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/config/KafkaProducerConfig.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/config/KafkaProducerConfig.java" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.boilerplate.auth.config;&#10;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.apache.kafka.clients.producer.ProducerConfig;&#10;import org.apache.kafka.common.serialization.StringSerializer;&#10;import org.springframework.beans.factory.annotation.Value;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;import org.springframework.kafka.core.DefaultKafkaProducerFactory;&#10;import org.springframework.kafka.core.KafkaTemplate;&#10;import org.springframework.kafka.core.ProducerFactory;&#10;import org.springframework.kafka.support.serializer.JsonSerializer;&#10;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Kafka Producer Configuration cho Auth Service&#10; * &#10; * Production-ready với:&#10; * - Retry mechanism&#10; * - Idempotence&#10; * - Compression&#10; * - Monitoring metrics&#10; */&#10;@Configuration&#10;@Slf4j&#10;public class KafkaProducerConfig {&#10;&#10;    @Value(&quot;${spring.kafka.bootstrap-servers}&quot;)&#10;    private String bootstrapServers;&#10;&#10;    @Value(&quot;${spring.kafka.producer.acks:all}&quot;)&#10;    private String acks;&#10;&#10;    @Value(&quot;${spring.kafka.producer.retries:3}&quot;)&#10;    private Integer retries;&#10;&#10;    @Value(&quot;${spring.kafka.producer.compression-type:snappy}&quot;)&#10;    private String compressionType;&#10;&#10;    @Value(&quot;${spring.kafka.producer.max-in-flight-requests-per-connection:5}&quot;)&#10;    private Integer maxInFlightRequests;&#10;&#10;    @Value(&quot;${spring.kafka.producer.enable-idempotence:true}&quot;)&#10;    private Boolean enableIdempotence;&#10;&#10;    @Value(&quot;${spring.kafka.producer.request-timeout-ms:30000}&quot;)&#10;    private Integer requestTimeoutMs;&#10;&#10;    @Value(&quot;${spring.kafka.producer.delivery-timeout-ms:120000}&quot;)&#10;    private Integer deliveryTimeoutMs;&#10;&#10;    /**&#10;     * Cấu hình Producer Factory với các settings production-ready&#10;     */&#10;    @Bean&#10;    public ProducerFactory&lt;String, Object&gt; producerFactory() {&#10;        Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();&#10;&#10;        // Bootstrap servers&#10;        configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);&#10;&#10;        // Serializers&#10;        configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);&#10;        configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);&#10;&#10;        // Reliability settings&#10;        configProps.put(ProducerConfig.ACKS_CONFIG, acks);&#10;        configProps.put(ProducerConfig.RETRIES_CONFIG, retries);&#10;        configProps.put(ProducerConfig.ENABLE_IDEMPOTENCE_CONFIG, enableIdempotence);&#10;&#10;        // Performance &amp; Compression&#10;        configProps.put(ProducerConfig.COMPRESSION_TYPE_CONFIG, compressionType);&#10;        configProps.put(ProducerConfig.LINGER_MS_CONFIG, 10); // Batch messages trong 10ms&#10;        configProps.put(ProducerConfig.BATCH_SIZE_CONFIG, 32768); // 32KB batch size&#10;&#10;        // Timeout settings&#10;        configProps.put(ProducerConfig.MAX_IN_FLIGHT_REQUESTS_PER_CONNECTION, maxInFlightRequests);&#10;        configProps.put(ProducerConfig.REQUEST_TIMEOUT_MS_CONFIG, requestTimeoutMs);&#10;        configProps.put(ProducerConfig.DELIVERY_TIMEOUT_MS_CONFIG, deliveryTimeoutMs);&#10;&#10;        // Metadata&#10;        configProps.put(ProducerConfig.CLIENT_ID_CONFIG, &quot;auth-service-producer&quot;);&#10;&#10;        // JSON Serializer settings&#10;        configProps.put(JsonSerializer.ADD_TYPE_INFO_HEADERS, false);&#10;        configProps.put(JsonSerializer.TYPE_MAPPINGS, &#10;            &quot;supportTicketEvent:com.boilerplate.auth.model.event.SupportTicketEvent&quot;);&#10;&#10;        log.info(&quot;Kafka Producer initialized with bootstrap servers: {}&quot;, bootstrapServers);&#10;        &#10;        return new DefaultKafkaProducerFactory&lt;&gt;(configProps);&#10;    }&#10;&#10;    /**&#10;     * KafkaTemplate bean để gửi messages&#10;     */&#10;    @Bean&#10;    public KafkaTemplate&lt;String, Object&gt; kafkaTemplate() {&#10;        KafkaTemplate&lt;String, Object&gt; template = new KafkaTemplate&lt;&gt;(producerFactory());&#10;        &#10;        // Thêm observer để log thành công/thất bại&#10;        template.setObservationEnabled(true);&#10;        &#10;        log.info(&quot;KafkaTemplate bean created successfully&quot;);&#10;        return template;&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/controller/DebugController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/controller/DebugController.java" />
              <option name="updatedContent" value="package com.boilerplate.auth.controller;&#10;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.springframework.beans.factory.annotation.Value;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.web.bind.annotation.GetMapping;&#10;import org.springframework.web.bind.annotation.RequestMapping;&#10;import org.springframework.web.bind.annotation.RestController;&#10;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Controller để debug JWT configuration&#10; * CHỈ DÙNG CHO DEVELOPMENT - XÓA TRONG PRODUCTION&#10; */&#10;@RestController&#10;@RequestMapping(&quot;/debug&quot;)&#10;@Slf4j&#10;public class DebugController {&#10;&#10;    @Value(&quot;${jwt.secret}&quot;)&#10;    private String jwtSecret;&#10;&#10;    /**&#10;     * Endpoint để kiểm tra JWT secret info (KHÔNG trả về giá trị thực)&#10;     * CHỈ DÙNG TRONG DEV - PHẢI XÓA KHI PRODUCTION&#10;     */&#10;    @GetMapping(&quot;/jwt-info&quot;)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; getJwtInfo() {&#10;        log.warn(&quot;DEBUG: JWT info endpoint được gọi - CHỈ DÙNG TRONG DEV&quot;);&#10;        &#10;        Map&lt;String, Object&gt; info = new HashMap&lt;&gt;();&#10;        info.put(&quot;service&quot;, &quot;auth-user&quot;);&#10;        info.put(&quot;secretLength&quot;, jwtSecret.length());&#10;        info.put(&quot;secretFirst10Chars&quot;, jwtSecret.substring(0, Math.min(10, jwtSecret.length())));&#10;        info.put(&quot;secretLast10Chars&quot;, jwtSecret.substring(Math.max(0, jwtSecret.length() - 10)));&#10;        info.put(&quot;secretHashCode&quot;, jwtSecret.hashCode());&#10;        &#10;        return ResponseEntity.ok(info);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/security/config/SecurityConfig.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/security/config/SecurityConfig.java" />
              <option name="originalContent" value="package com.boilerplate.auth.security.config;&#10;&#10;import com.boilerplate.auth.security.CustomUserDetailsService;&#10;import com.boilerplate.auth.security.jwt.JwtAuthenticationFilter;&#10;import lombok.RequiredArgsConstructor;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;import org.springframework.context.annotation.Profile;&#10;import org.springframework.security.authentication.AuthenticationManager;&#10;import org.springframework.security.authentication.AuthenticationProvider;&#10;import org.springframework.security.authentication.dao.DaoAuthenticationProvider;&#10;import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;&#10;import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;&#10;import org.springframework.security.config.annotation.web.builders.HttpSecurity;&#10;import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;&#10;import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;&#10;import org.springframework.security.config.http.SessionCreationPolicy;&#10;import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;&#10;import org.springframework.security.crypto.password.PasswordEncoder;&#10;import org.springframework.security.web.SecurityFilterChain;&#10;import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;&#10;&#10;@Configuration&#10;@EnableWebSecurity&#10;@EnableMethodSecurity&#10;@RequiredArgsConstructor&#10;// Bỏ @Profile(&quot;!dev&quot;) - cho phép chạy trong TẤT CẢ profile&#10;public class SecurityConfig {&#10;&#10;    private final CustomUserDetailsService userDetailsService;&#10;    private final JwtAuthenticationFilter jwtAuthenticationFilter;&#10;&#10;    @Bean&#10;    public PasswordEncoder passwordEncoder() {&#10;        return new BCryptPasswordEncoder();&#10;    }&#10;&#10;    @Bean&#10;    public AuthenticationProvider authenticationProvider() {&#10;        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();&#10;        authProvider.setUserDetailsService(userDetailsService);&#10;        authProvider.setPasswordEncoder(passwordEncoder());&#10;        return authProvider;&#10;    }&#10;&#10;    @Bean&#10;    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {&#10;        return config.getAuthenticationManager();&#10;    }&#10;&#10;    @Bean&#10;    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {&#10;        http&#10;                .csrf(AbstractHttpConfigurer::disable)&#10;                .authorizeHttpRequests(auth -&gt; auth&#10;                        // Swagger UI &amp; API Docs (Public)&#10;                        .requestMatchers(&#10;                                &quot;/swagger-ui/**&quot;,&#10;                                &quot;/swagger-ui.html&quot;,&#10;                                &quot;/v3/api-docs/**&quot;,&#10;                                &quot;/swagger-resources/**&quot;,&#10;                                &quot;/webjars/**&quot;&#10;                        ).permitAll()&#10;&#10;                        // Actuator endpoints (Public)&#10;                        .requestMatchers(&quot;/actuator/**&quot;).permitAll()&#10;&#10;                        // OAuth2 endpoints (Public)&#10;                        .requestMatchers(&#10;                                &quot;/oauth2/**&quot;,&#10;                                &quot;/login/oauth2/**&quot;,&#10;                                &quot;/api/auth/oauth2/**&quot;&#10;                        ).permitAll()&#10;&#10;                        // Auth endpoints (Public)&#10;                        .requestMatchers(&#10;                                &quot;/api/auth/register&quot;,&#10;                                &quot;/api/auth/login&quot;,&#10;                                &quot;/api/auth/verify-otp&quot;,&#10;                                &quot;/api/auth/resend-otp&quot;,&#10;                                &quot;/api/auth/refresh-token&quot;,&#10;                                &quot;/api/auth/logout&quot;&#10;                        ).permitAll()&#10;&#10;                        // Verification endpoints (Public)&#10;                        .requestMatchers(&quot;/api/verification/**&quot;).permitAll()&#10;&#10;                        // Admin endpoints (Chỉ ADMIN)&#10;                        .requestMatchers(&quot;/api/admin/**&quot;).hasRole(&quot;ADMIN&quot;)&#10;&#10;                        // Staff endpoints (STAFF hoặc ADMIN)&#10;                        .requestMatchers(&quot;/api/staff/**&quot;).hasAnyRole(&quot;STAFF&quot;, &quot;ADMIN&quot;)&#10;&#10;                        // Driver endpoints (DRIVER hoặc ADMIN)&#10;                        .requestMatchers(&quot;/api/driver/**&quot;).hasAnyRole(&quot;DRIVER&quot;, &quot;ADMIN&quot;)&#10;&#10;                        // User profile endpoints (Authenticated users)&#10;                        .requestMatchers(&quot;/api/users/**&quot;).authenticated()&#10;&#10;                        // Tất cả request khác cần authentication&#10;                        .anyRequest().authenticated()&#10;                )&#10;                .sessionManagement(session -&gt; session&#10;                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)&#10;                )&#10;                .authenticationProvider(authenticationProvider())&#10;                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);&#10;&#10;        return http.build();&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.boilerplate.auth.security.config;&#10;&#10;import com.boilerplate.auth.security.CustomUserDetailsService;&#10;import com.boilerplate.auth.security.jwt.JwtAuthenticationFilter;&#10;import lombok.RequiredArgsConstructor;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;import org.springframework.context.annotation.Profile;&#10;import org.springframework.security.authentication.AuthenticationManager;&#10;import org.springframework.security.authentication.AuthenticationProvider;&#10;import org.springframework.security.authentication.dao.DaoAuthenticationProvider;&#10;import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;&#10;import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;&#10;import org.springframework.security.config.annotation.web.builders.HttpSecurity;&#10;import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;&#10;import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;&#10;import org.springframework.security.config.http.SessionCreationPolicy;&#10;import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;&#10;import org.springframework.security.crypto.password.PasswordEncoder;&#10;import org.springframework.security.web.SecurityFilterChain;&#10;import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;&#10;&#10;@Configuration&#10;@EnableWebSecurity&#10;@EnableMethodSecurity&#10;@RequiredArgsConstructor&#10;// Bỏ @Profile(&quot;!dev&quot;) - cho phép chạy trong TẤT CẢ profile&#10;public class SecurityConfig {&#10;&#10;    private final CustomUserDetailsService userDetailsService;&#10;    private final JwtAuthenticationFilter jwtAuthenticationFilter;&#10;&#10;    @Bean&#10;    public PasswordEncoder passwordEncoder() {&#10;        return new BCryptPasswordEncoder();&#10;    }&#10;&#10;    @Bean&#10;    public AuthenticationProvider authenticationProvider() {&#10;        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();&#10;        authProvider.setUserDetailsService(userDetailsService);&#10;        authProvider.setPasswordEncoder(passwordEncoder());&#10;        return authProvider;&#10;    }&#10;&#10;    @Bean&#10;    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {&#10;        return config.getAuthenticationManager();&#10;    }&#10;&#10;    @Bean&#10;    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {&#10;        http&#10;                .csrf(AbstractHttpConfigurer::disable)&#10;                .authorizeHttpRequests(auth -&gt; auth&#10;                        // Swagger UI &amp; API Docs (Public)&#10;                        .requestMatchers(&#10;                                &quot;/swagger-ui/**&quot;,&#10;                                &quot;/swagger-ui.html&quot;,&#10;                                &quot;/v3/api-docs/**&quot;,&#10;                                &quot;/swagger-resources/**&quot;,&#10;                                &quot;/webjars/**&quot;&#10;                        ).permitAll()&#10;&#10;                        // Actuator endpoints (Public)&#10;                        .requestMatchers(&quot;/actuator/**&quot;).permitAll()&#10;&#10;                        // OAuth2 endpoints (Public)&#10;                        .requestMatchers(&#10;                                &quot;/oauth2/**&quot;,&#10;                                &quot;/login/oauth2/**&quot;,&#10;                                &quot;/api/auth/oauth2/**&quot;&#10;                        ).permitAll()&#10;&#10;                        // Auth endpoints (Public)&#10;                        .requestMatchers(&#10;                                &quot;/api/auth/register&quot;,&#10;                                &quot;/api/auth/login&quot;,&#10;                                &quot;/api/auth/verify-otp&quot;,&#10;                                &quot;/api/auth/resend-otp&quot;,&#10;                                &quot;/api/auth/refresh-token&quot;,&#10;                                &quot;/api/auth/logout&quot;&#10;                        ).permitAll()&#10;&#10;                        // Verification endpoints (Public)&#10;                        .requestMatchers(&quot;/api/verification/**&quot;).permitAll()&#10;&#10;                        // Admin endpoints (Chỉ ADMIN)&#10;                        .requestMatchers(&quot;/api/admin/**&quot;).hasRole(&quot;ADMIN&quot;)&#10;&#10;                        // Staff endpoints (STAFF hoặc ADMIN)&#10;                        .requestMatchers(&quot;/api/staff/**&quot;).hasAnyRole(&quot;STAFF&quot;, &quot;ADMIN&quot;)&#10;&#10;                        // Driver endpoints (DRIVER hoặc ADMIN)&#10;                        .requestMatchers(&quot;/api/driver/**&quot;).hasAnyRole(&quot;DRIVER&quot;, &quot;ADMIN&quot;)&#10;&#10;                        // User profile endpoints (Authenticated users)&#10;                        .requestMatchers(&quot;/api/users/**&quot;).authenticated()&#10;&#10;                        // Tất cả request khác cần authentication&#10;                        .anyRequest().authenticated()&#10;                )&#10;                .sessionManagement(session -&gt; session&#10;                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)&#10;                )&#10;                .authenticationProvider(authenticationProvider())&#10;                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);&#10;&#10;        return http.build();&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/service/SupportTicketDemoService.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/service/SupportTicketDemoService.java" />
              <option name="updatedContent" value="package com.boilerplate.auth.service;&#10;&#10;import com.boilerplate.auth.entity.User;&#10;import com.boilerplate.auth.entity.Vehicle;&#10;import com.boilerplate.auth.enums.SupportTicketType;&#10;import com.boilerplate.auth.enums.TicketPriority;&#10;import com.boilerplate.auth.exception.ResourceNotFoundException;&#10;import com.boilerplate.auth.model.event.SupportTicketEvent;&#10;import com.boilerplate.auth.repository.UserRepository;&#10;import com.boilerplate.auth.repository.VehicleRepository;&#10;import lombok.RequiredArgsConstructor;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.slf4j.MDC;&#10;import org.springframework.stereotype.Service;&#10;import org.springframework.transaction.annotation.Transactional;&#10;&#10;import java.time.Instant;&#10;import java.util.List;&#10;import java.util.UUID;&#10;&#10;/**&#10; * Service demo cách sử dụng Support Ticket Event Publishing&#10; * &#10; * Best practices:&#10; * - Validate input trước khi tạo event&#10; * - Use correlation ID cho distributed tracing&#10; * - Handle async result với CompletableFuture&#10; * - Log đầy đủ cho debugging&#10; * - Transactional consistency&#10; */&#10;@Service&#10;@RequiredArgsConstructor&#10;@Slf4j&#10;public class SupportTicketDemoService {&#10;&#10;    private final UserRepository userRepository;&#10;    private final VehicleRepository vehicleRepository;&#10;    private final SupportTicketEventBuilder eventBuilder;&#10;    private final SupportTicketEventPublisher eventPublisher;&#10;&#10;    /**&#10;     * Example 1: Tạo simple support ticket&#10;     */&#10;    public String createSimpleSupportTicket(&#10;            String employeeId,&#10;            String title,&#10;            String description,&#10;            SupportTicketType ticketType&#10;    ) {&#10;        &#10;        // Generate correlation ID for tracing&#10;        String correlationId = UUID.randomUUID().toString();&#10;        MDC.put(&quot;correlationId&quot;, correlationId);&#10;        &#10;        try {&#10;            log.info(&quot;Creating simple support ticket: employeeId={}, type={}&quot;, &#10;                employeeId, ticketType);&#10;            &#10;            // Load user&#10;            User user = userRepository.findByEmployeeId(employeeId)&#10;                .orElseThrow(() -&gt; new ResourceNotFoundException(&#10;                    &quot;Không tìm thấy nhân viên với mã: &quot; + employeeId));&#10;            &#10;            // Generate ticket ID&#10;            String ticketId = generateTicketId();&#10;            &#10;            // Build event&#10;            SupportTicketEvent event = eventBuilder.buildSimpleTicketCreatedEvent(&#10;                ticketId,&#10;                user.getEmployeeId(),&#10;                user.getFullName(),&#10;                user.getEmail(),&#10;                ticketType,&#10;                title,&#10;                description&#10;            );&#10;            &#10;            // Set correlation ID&#10;            event.setCorrelationId(correlationId);&#10;            &#10;            // Publish event asynchronously&#10;            eventPublisher.publishSupportTicketCreated(event)&#10;                .whenComplete((result, ex) -&gt; {&#10;                    if (ex == null) {&#10;                        log.info(&quot;✓ Support ticket event published: ticketId={}&quot;, ticketId);&#10;                    } else {&#10;                        log.error(&quot;✗ Failed to publish support ticket: ticketId={}&quot;, &#10;                            ticketId, ex);&#10;                        // TODO: Alert, retry, or save to DLQ&#10;                    }&#10;                });&#10;            &#10;            log.info(&quot;Support ticket created successfully: ticketId={}&quot;, ticketId);&#10;            return ticketId;&#10;            &#10;        } finally {&#10;            MDC.remove(&quot;correlationId&quot;);&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Example 2: Tạo detailed support ticket với full context&#10;     */&#10;    @Transactional&#10;    public String createDetailedSupportTicket(&#10;            String employeeId,&#10;            String vehicleId,&#10;            Long stationId,&#10;            String stationName,&#10;            String stationAddress,&#10;            String batteryPackId,&#10;            SupportTicketType ticketType,&#10;            TicketPriority priority,&#10;            String title,&#10;            String description,&#10;            Instant incidentTime,&#10;            List&lt;String&gt; attachments&#10;    ) {&#10;        &#10;        String correlationId = UUID.randomUUID().toString();&#10;        MDC.put(&quot;correlationId&quot;, correlationId);&#10;        &#10;        try {&#10;            log.info(&quot;Creating detailed support ticket: employeeId={}, vehicleId={}, type={}, priority={}&quot;, &#10;                employeeId, vehicleId, ticketType, priority);&#10;            &#10;            // Load entities&#10;            User user = userRepository.findByEmployeeId(employeeId)&#10;                .orElseThrow(() -&gt; new ResourceNotFoundException(&#10;                    &quot;Không tìm thấy nhân viên: &quot; + employeeId));&#10;            &#10;            Vehicle vehicle = null;&#10;            if (vehicleId != null) {&#10;                vehicle = vehicleRepository.findByVehicleId(vehicleId)&#10;                    .orElseThrow(() -&gt; new ResourceNotFoundException(&#10;                        &quot;Không tìm thấy phương tiện: &quot; + vehicleId));&#10;            }&#10;            &#10;            // Generate ticket ID&#10;            String ticketId = generateTicketId();&#10;            &#10;            // Build comprehensive event&#10;            SupportTicketEvent event = eventBuilder.buildTicketCreatedEvent(&#10;                ticketId,&#10;                user,&#10;                vehicle,&#10;                ticketType,&#10;                priority,&#10;                title,&#10;                description,&#10;                stationId,&#10;                stationName,&#10;                stationAddress,&#10;                batteryPackId,&#10;                incidentTime,&#10;                attachments,&#10;                correlationId&#10;            );&#10;            &#10;            // Publish với error handling&#10;            eventPublisher.publishSupportTicketCreated(event)&#10;                .whenComplete((result, ex) -&gt; {&#10;                    if (ex != null) {&#10;                        log.error(&quot;✗ Critical: Failed to publish support ticket event&quot;, ex);&#10;                        // In production: Alert DevOps, save to DLQ, trigger retry&#10;                    } else {&#10;                        log.info(&quot;✓ Support ticket event published successfully: &quot; +&#10;                            &quot;ticketId={}, partition={}, offset={}&quot;, &#10;                            ticketId,&#10;                            result.getRecordMetadata().partition(),&#10;                            result.getRecordMetadata().offset());&#10;                    }&#10;                });&#10;            &#10;            log.info(&quot;Detailed support ticket created: ticketId={}, correlationId={}&quot;, &#10;                ticketId, correlationId);&#10;            &#10;            return ticketId;&#10;            &#10;        } finally {&#10;            MDC.remove(&quot;correlationId&quot;);&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Example 3: Tạo urgent/critical ticket với immediate notification&#10;     */&#10;    public String createUrgentSupportTicket(&#10;            String employeeId,&#10;            String vehicleId,&#10;            SupportTicketType ticketType,&#10;            String title,&#10;            String description&#10;    ) {&#10;        &#10;        String correlationId = UUID.randomUUID().toString();&#10;        MDC.put(&quot;correlationId&quot;, correlationId);&#10;        &#10;        try {&#10;            log.warn(&quot;⚠️ URGENT: Creating critical support ticket: employeeId={}, type={}&quot;, &#10;                employeeId, ticketType);&#10;            &#10;            User user = userRepository.findByEmployeeId(employeeId)&#10;                .orElseThrow(() -&gt; new ResourceNotFoundException(&#10;                    &quot;User not found: &quot; + employeeId));&#10;            &#10;            Vehicle vehicle = vehicleRepository.findByVehicleId(vehicleId)&#10;                .orElse(null);&#10;            &#10;            String ticketId = generateTicketId();&#10;            &#10;            // Build event với CRITICAL priority&#10;            SupportTicketEvent event = eventBuilder.buildTicketCreatedEvent(&#10;                ticketId,&#10;                user,&#10;                vehicle,&#10;                ticketType,&#10;                TicketPriority.CRITICAL, // CRITICAL priority&#10;                title,&#10;                description,&#10;                null, null, null, null,&#10;                Instant.now(),&#10;                null,&#10;                correlationId&#10;            );&#10;            &#10;            // Publish và đợi kết quả (synchronous cho urgent case)&#10;            try {&#10;                eventPublisher.publishSupportTicketCreated(event)&#10;                    .get(); // Block và đợi publish thành công&#10;                &#10;                log.warn(&quot;✓ URGENT ticket published successfully: ticketId={}&quot;, ticketId);&#10;                &#10;                // TODO: Gửi SMS/Push notification ngay lập tức cho staff&#10;                &#10;            } catch (Exception ex) {&#10;                log.error(&quot;✗ CRITICAL: Failed to publish urgent ticket: ticketId={}&quot;, &#10;                    ticketId, ex);&#10;                // TODO: Fallback mechanism - gọi API trực tiếp, alert DevOps&#10;                throw new RuntimeException(&quot;Failed to create urgent support ticket&quot;, ex);&#10;            }&#10;            &#10;            return ticketId;&#10;            &#10;        } finally {&#10;            MDC.remove(&quot;correlationId&quot;);&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Generate unique ticket ID&#10;     * Format: TKT-{timestamp}-{random}&#10;     */&#10;    private String generateTicketId() {&#10;        return String.format(&quot;TKT-%d-%s&quot;, &#10;            Instant.now().toEpochMilli(),&#10;            UUID.randomUUID().toString().substring(0, 8));&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/service/SupportTicketEventBuilder.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/src/main/java/com/boilerplate/auth/service/SupportTicketEventBuilder.java" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.boilerplate.auth.service;&#10;&#10;import com.boilerplate.auth.entity.User;&#10;import com.boilerplate.auth.entity.Vehicle;&#10;import com.boilerplate.auth.enums.SupportTicketType;&#10;import com.boilerplate.auth.enums.TicketPriority;&#10;import com.boilerplate.auth.model.event.SupportTicketEvent;&#10;import lombok.RequiredArgsConstructor;&#10;import lombok.extern.slf4j.Slf4j;&#10;import org.springframework.beans.factory.annotation.Value;&#10;import org.springframework.stereotype.Component;&#10;&#10;import java.time.Instant;&#10;import java.util.HashMap;&#10;import java.util.List;&#10;import java.util.Map;&#10;import java.util.UUID;&#10;&#10;/**&#10; * Helper class để build SupportTicketEvent từ domain entities&#10; * &#10; * Tách biệt logic build event khỏi business logic&#10; */&#10;@Component&#10;@RequiredArgsConstructor&#10;@Slf4j&#10;public class SupportTicketEventBuilder {&#10;&#10;    @Value(&quot;${spring.application.name:auth-service}&quot;)&#10;    private String serviceName;&#10;&#10;    /**&#10;     * Build SupportTicketEvent từ các thông tin ticket&#10;     */&#10;    public SupportTicketEvent buildTicketCreatedEvent(&#10;            String ticketId,&#10;            User user,&#10;            Vehicle vehicle,&#10;            SupportTicketType ticketType,&#10;            TicketPriority priority,&#10;            String title,&#10;            String description,&#10;            Long stationId,&#10;            String stationName,&#10;            String stationAddress,&#10;            String batteryPackId,&#10;            Instant incidentTime,&#10;            List&lt;String&gt; attachments,&#10;            String correlationId&#10;    ) {&#10;        &#10;        Instant now = Instant.now();&#10;        String eventId = UUID.randomUUID().toString();&#10;&#10;        // Build business data&#10;        SupportTicketEvent.SupportTicketData data = SupportTicketEvent.SupportTicketData.builder()&#10;                .ticketId(ticketId)&#10;                .employeeId(user.getEmployeeId())&#10;                .employeeName(user.getFullName())&#10;                .contactEmail(user.getEmail())&#10;                .contactPhone(user.getPhone())&#10;                .vehicleId(vehicle != null ? vehicle.getVehicleId() : null)&#10;                .vin(vehicle != null ? vehicle.getVin() : null)&#10;                .licensePlate(vehicle != null ? vehicle.getLicensePlate() : null)&#10;                .vehicleModel(vehicle != null ? vehicle.getModel() : null)&#10;                .batteryPackId(batteryPackId)&#10;                .stationId(stationId)&#10;                .stationName(stationName)&#10;                .stationAddress(stationAddress)&#10;                .ticketType(ticketType)&#10;                .priority(priority)&#10;                .title(title)&#10;                .description(description)&#10;                .attachments(attachments)&#10;                .incidentTime(incidentTime)&#10;                .createdAt(now)&#10;                .build();&#10;&#10;        // Build metadata&#10;        Map&lt;String, Object&gt; metadata = new HashMap&lt;&gt;();&#10;        metadata.put(&quot;service&quot;, serviceName);&#10;        metadata.put(&quot;version&quot;, &quot;1.0&quot;);&#10;        metadata.put(&quot;environment&quot;, System.getProperty(&quot;spring.profiles.active&quot;, &quot;unknown&quot;));&#10;&#10;        // Build event&#10;        SupportTicketEvent event = SupportTicketEvent.builder()&#10;                .eventId(eventId)&#10;                .source(String.format(&quot;/%s/support-tickets&quot;, serviceName))&#10;                .specVersion(&quot;1.0&quot;)&#10;                .type(&quot;com.evbss.support.ticket.created&quot;)&#10;                .eventTime(now)&#10;                .correlationId(correlationId != null ? correlationId : UUID.randomUUID().toString())&#10;                .dataContentType(&quot;application/json&quot;)&#10;                .data(data)&#10;                .metadata(metadata)&#10;                .build();&#10;&#10;        log.debug(&quot;Built SupportTicketEvent: eventId={}, ticketId={}&quot;, eventId, ticketId);&#10;        &#10;        return event;&#10;    }&#10;&#10;    /**&#10;     * Build event với minimal info (simplified version)&#10;     */&#10;    public SupportTicketEvent buildSimpleTicketCreatedEvent(&#10;            String ticketId,&#10;            String employeeId,&#10;            String employeeName,&#10;            String contactEmail,&#10;            SupportTicketType ticketType,&#10;            String title,&#10;            String description&#10;    ) {&#10;        &#10;        Instant now = Instant.now();&#10;        String eventId = UUID.randomUUID().toString();&#10;&#10;        SupportTicketEvent.SupportTicketData data = SupportTicketEvent.SupportTicketData.builder()&#10;                .ticketId(ticketId)&#10;                .employeeId(employeeId)&#10;                .employeeName(employeeName)&#10;                .contactEmail(contactEmail)&#10;                .ticketType(ticketType)&#10;                .priority(TicketPriority.MEDIUM)&#10;                .title(title)&#10;                .description(description)&#10;                .createdAt(now)&#10;                .build();&#10;&#10;        return SupportTicketEvent.builder()&#10;                .eventId(eventId)&#10;                .source(String.format(&quot;/%s/support-tickets&quot;, serviceName))&#10;                .specVersion(&quot;1.0&quot;)&#10;                .type(&quot;com.evbss.support.ticket.created&quot;)&#10;                .eventTime(now)&#10;                .correlationId(UUID.randomUUID().toString())&#10;                .dataContentType(&quot;application/json&quot;)&#10;                .data(data)&#10;                .metadata(Map.of(&quot;service&quot;, serviceName, &quot;version&quot;, &quot;1.0&quot;))&#10;                .build();&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/auth-user/src/main/resources/templates/verification-result.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/auth-user/src/main/resources/templates/verification-result.html" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; lang=&quot;vi&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;Xác nhận đăng ký&lt;/title&gt;&#10;    &lt;style&gt;&#10;        * {&#10;            margin: 0;&#10;            padding: 0;&#10;            box-sizing: border-box;&#10;        }&#10;&#10;        body {&#10;            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;&#10;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;            min-height: 100vh;&#10;            display: flex;&#10;            justify-content: center;&#10;            align-items: center;&#10;            padding: 20px;&#10;        }&#10;&#10;        .container {&#10;            background: white;&#10;            border-radius: 20px;&#10;            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);&#10;            max-width: 500px;&#10;            width: 100%;&#10;            padding: 40px;&#10;            text-align: center;&#10;            animation: slideIn 0.5s ease-out;&#10;        }&#10;&#10;        @keyframes slideIn {&#10;            from {&#10;                opacity: 0;&#10;                transform: translateY(-30px);&#10;            }&#10;            to {&#10;                opacity: 1;&#10;                transform: translateY(0);&#10;            }&#10;        }&#10;&#10;        .icon {&#10;            width: 80px;&#10;            height: 80px;&#10;            margin: 0 auto 20px;&#10;            border-radius: 50%;&#10;            display: flex;&#10;            align-items: center;&#10;            justify-content: center;&#10;            font-size: 40px;&#10;        }&#10;&#10;        .icon.success {&#10;            background: #d4edda;&#10;            color: #28a745;&#10;        }&#10;&#10;        .icon.error {&#10;            background: #f8d7da;&#10;            color: #dc3545;&#10;        }&#10;&#10;        .icon.warning {&#10;            background: #fff3cd;&#10;            color: #ffc107;&#10;        }&#10;&#10;        h1 {&#10;            color: #333;&#10;            margin-bottom: 15px;&#10;            font-size: 28px;&#10;        }&#10;&#10;        .message {&#10;            color: #666;&#10;            font-size: 16px;&#10;            line-height: 1.6;&#10;            margin-bottom: 20px;&#10;        }&#10;&#10;        .user-info {&#10;            background: #f8f9fa;&#10;            border-radius: 10px;&#10;            padding: 20px;&#10;            margin: 20px 0;&#10;            text-align: left;&#10;        }&#10;&#10;        .user-info .label {&#10;            color: #666;&#10;            font-size: 14px;&#10;            margin-bottom: 5px;&#10;        }&#10;&#10;        .user-info .value {&#10;            color: #333;&#10;            font-size: 16px;&#10;            font-weight: 600;&#10;            margin-bottom: 15px;&#10;        }&#10;&#10;        .user-info .value:last-child {&#10;            margin-bottom: 0;&#10;        }&#10;&#10;        .badge {&#10;            display: inline-block;&#10;            padding: 5px 15px;&#10;            border-radius: 20px;&#10;            font-size: 14px;&#10;            font-weight: 600;&#10;            margin-top: 5px;&#10;        }&#10;&#10;        .badge.active {&#10;            background: #d4edda;&#10;            color: #28a745;&#10;        }&#10;&#10;        .badge.driver {&#10;            background: #d1ecf1;&#10;            color: #0c5460;&#10;        }&#10;&#10;        .badge.staff {&#10;            background: #fff3cd;&#10;            color: #856404;&#10;        }&#10;&#10;        .btn {&#10;            display: inline-block;&#10;            padding: 12px 30px;&#10;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;            color: white;&#10;            text-decoration: none;&#10;            border-radius: 25px;&#10;            font-weight: 600;&#10;            transition: transform 0.2s, box-shadow 0.2s;&#10;            margin-top: 20px;&#10;        }&#10;&#10;        .btn:hover {&#10;            transform: translateY(-2px);&#10;            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);&#10;        }&#10;&#10;        .countdown {&#10;            color: #999;&#10;            font-size: 14px;&#10;            margin-top: 15px;&#10;        }&#10;&#10;        .error-details {&#10;            background: #f8d7da;&#10;            border-left: 4px solid #dc3545;&#10;            padding: 15px;&#10;            border-radius: 5px;&#10;            text-align: left;&#10;            margin: 20px 0;&#10;        }&#10;&#10;        .error-details strong {&#10;            color: #721c24;&#10;        }&#10;&#10;        .support-info {&#10;            background: #e7f3ff;&#10;            border-left: 4px solid #2196F3;&#10;            padding: 15px;&#10;            border-radius: 5px;&#10;            text-align: left;&#10;            margin: 20px 0;&#10;            font-size: 14px;&#10;        }&#10;&#10;        .support-info strong {&#10;            color: #0d47a1;&#10;        }&#10;    &lt;/style&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class=&quot;container&quot;&gt;&#10;        &lt;!-- Success Case --&gt;&#10;        &lt;div th:if=&quot;${success}&quot;&gt;&#10;            &lt;div class=&quot;icon success&quot;&gt;✓&lt;/div&gt;&#10;            &lt;h1&gt;Xác nhận thành công!&lt;/h1&gt;&#10;            &lt;p class=&quot;message&quot;&gt;Chúc mừng! Tài khoản của bạn đã được kích hoạt thành công.&lt;/p&gt;&#10;            &#10;            &lt;div class=&quot;user-info&quot; th:if=&quot;${userInfo}&quot;&gt;&#10;                &lt;div class=&quot;label&quot;&gt;Họ và tên&lt;/div&gt;&#10;                &lt;div class=&quot;value&quot; th:text=&quot;${userInfo.fullName}&quot;&gt;&lt;/div&gt;&#10;                &#10;                &lt;div class=&quot;label&quot;&gt;Email&lt;/div&gt;&#10;                &lt;div class=&quot;value&quot; th:text=&quot;${userInfo.email}&quot;&gt;&lt;/div&gt;&#10;                &#10;                &lt;div class=&quot;label&quot;&gt;Vai trò&lt;/div&gt;&#10;                &lt;div&gt;&#10;                    &lt;span class=&quot;badge&quot; &#10;                          th:classappend=&quot;${userInfo.role == 'DRIVER'} ? 'driver' : 'staff'&quot;&#10;                          th:text=&quot;${userInfo.role == 'DRIVER' ? 'Tài xế' : 'Nhân viên trạm'}&quot;&gt;&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &#10;                &lt;div class=&quot;label&quot; style=&quot;margin-top: 15px;&quot;&gt;Trạng thái&lt;/div&gt;&#10;                &lt;div&gt;&#10;                    &lt;span class=&quot;badge active&quot;&gt;Đã kích hoạt&lt;/span&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &#10;            &lt;p class=&quot;message&quot;&gt;Bạn có thể đăng nhập ngay bây giờ!&lt;/p&gt;&#10;            &lt;a href=&quot;http://localhost:3000/login&quot; class=&quot;btn&quot; th:href=&quot;${loginUrl}&quot;&gt;Đăng nhập&lt;/a&gt;&#10;            &lt;p class=&quot;countdown&quot;&gt;Tự động chuyển hướng sau &lt;span id=&quot;countdown&quot;&gt;5&lt;/span&gt; giây...&lt;/p&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- Error Case --&gt;&#10;        &lt;div th:if=&quot;${!success}&quot;&gt;&#10;            &lt;div class=&quot;icon error&quot;&gt;✕&lt;/div&gt;&#10;            &lt;h1&gt;Xác nhận thất bại!&lt;/h1&gt;&#10;            &lt;p class=&quot;message&quot; th:text=&quot;${message}&quot;&gt;Đã có lỗi xảy ra&lt;/p&gt;&#10;            &#10;            &lt;div class=&quot;error-details&quot; th:if=&quot;${errorDetails}&quot;&gt;&#10;                &lt;strong&gt;Chi tiết lỗi:&lt;/strong&gt;&lt;br/&gt;&#10;                &lt;span th:text=&quot;${errorDetails}&quot;&gt;&lt;/span&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;support-info&quot;&gt;&#10;                &lt;strong&gt; Cần hỗ trợ?&lt;/strong&gt;&lt;br/&gt;&#10;                Vui lòng liên hệ với quản trị viên để được hỗ trợ xác nhận tài khoản.&lt;br/&gt;&#10;                Email: admin@evbss.com&#10;            &lt;/div&gt;&#10;            &#10;            &lt;a href=&quot;http://localhost:3000&quot; class=&quot;btn&quot; th:href=&quot;${homeUrl}&quot;&gt;Về trang chủ&lt;/a&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;script th:if=&quot;${success}&quot;&gt;&#10;        // Auto redirect after 5 seconds on success&#10;        let countdown = 5;&#10;        const countdownElement = document.getElementById('countdown');&#10;        const loginUrl = /*[[${loginUrl}]]*/ 'http://localhost:3000/login';&#10;        &#10;        const timer = setInterval(() =&gt; {&#10;            countdown--;&#10;            if (countdownElement) {&#10;                countdownElement.textContent = countdown;&#10;            }&#10;            &#10;            if (countdown &lt;= 0) {&#10;                clearInterval(timer);&#10;                window.location.href = loginUrl;&#10;            }&#10;        }, 1000);&#10;    &lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/compare-jwt-secrets.ps1">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/compare-jwt-secrets.ps1" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="# Script so sánh JWT secret giữa auth-user và api-gateway&#10;Write-Host &quot;`n========================================&quot; -ForegroundColor Cyan&#10;Write-Host &quot;   JWT SECRET COMPARISON TOOL&quot; -ForegroundColor Cyan&#10;Write-Host &quot;========================================`n&quot; -ForegroundColor Cyan&#10;&#10;# Lấy thông tin từ api-gateway&#10;Write-Host &quot;[1/2] Checking API Gateway JWT secret...&quot; -ForegroundColor Yellow&#10;try {&#10;    $gatewayInfo = Invoke-RestMethod -Uri 'http://localhost:9000/debug/jwt-info'&#10;    Write-Host &quot;OK API Gateway responded&quot; -ForegroundColor Green&#10;    Write-Host &quot;  - Secret Length: $($gatewayInfo.secretLength)&quot; -ForegroundColor White&#10;    Write-Host &quot;  - First 10 chars: $($gatewayInfo.secretFirst10Chars)&quot; -ForegroundColor White&#10;    Write-Host &quot;  - Last 10 chars: $($gatewayInfo.secretLast10Chars)&quot; -ForegroundColor White&#10;    Write-Host &quot;  - Hash Code: $($gatewayInfo.secretHashCode)&quot; -ForegroundColor White&#10;} catch {&#10;    Write-Host &quot;ERROR Failed to connect to API Gateway (http://localhost:9000)&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Error: $($_.Exception.Message)&quot; -ForegroundColor Red&#10;    exit 1&#10;}&#10;&#10;Write-Host &quot;&quot;&#10;&#10;# Lấy thông tin từ auth-user&#10;Write-Host &quot;[2/2] Checking Auth-User JWT secret...&quot; -ForegroundColor Yellow&#10;try {&#10;    $authInfo = Invoke-RestMethod -Uri 'http://localhost:9001/debug/jwt-info'&#10;    Write-Host &quot;OK Auth-User responded&quot; -ForegroundColor Green&#10;    Write-Host &quot;  - Secret Length: $($authInfo.secretLength)&quot; -ForegroundColor White&#10;    Write-Host &quot;  - First 10 chars: $($authInfo.secretFirst10Chars)&quot; -ForegroundColor White&#10;    Write-Host &quot;  - Last 10 chars: $($authInfo.secretLast10Chars)&quot; -ForegroundColor White&#10;    Write-Host &quot;  - Hash Code: $($authInfo.secretHashCode)&quot; -ForegroundColor White&#10;} catch {&#10;    Write-Host &quot;ERROR Failed to connect to Auth-User (http://localhost:9001)&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Error: $($_.Exception.Message)&quot; -ForegroundColor Red&#10;    Write-Host &quot;`nPossible reasons:&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  1. Auth-User service is not running&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  2. Debug endpoint is blocked by Spring Security&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  3. Need to restart auth-user service after adding debug endpoint&quot; -ForegroundColor Yellow&#10;    exit 1&#10;}&#10;&#10;Write-Host &quot;`n========================================&quot; -ForegroundColor Cyan&#10;Write-Host &quot;   COMPARISON RESULT&quot; -ForegroundColor Cyan&#10;Write-Host &quot;========================================`n&quot; -ForegroundColor Cyan&#10;&#10;# So sánh các giá trị&#10;$allMatch = $true&#10;&#10;# So sánh secretLength&#10;if ($gatewayInfo.secretLength -eq $authInfo.secretLength) {&#10;    Write-Host &quot;[OK] Secret Length: MATCH ($($gatewayInfo.secretLength))&quot; -ForegroundColor Green&#10;} else {&#10;    Write-Host &quot;[ERROR] Secret Length: MISMATCH&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Gateway: $($gatewayInfo.secretLength)&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Auth-User: $($authInfo.secretLength)&quot; -ForegroundColor Red&#10;    $allMatch = $false&#10;}&#10;&#10;# So sánh secretFirst10Chars&#10;if ($gatewayInfo.secretFirst10Chars -eq $authInfo.secretFirst10Chars) {&#10;    Write-Host &quot;[OK] First 10 Chars: MATCH ($($gatewayInfo.secretFirst10Chars))&quot; -ForegroundColor Green&#10;} else {&#10;    Write-Host &quot;[ERROR] First 10 Chars: MISMATCH&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Gateway: $($gatewayInfo.secretFirst10Chars)&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Auth-User: $($authInfo.secretFirst10Chars)&quot; -ForegroundColor Red&#10;    $allMatch = $false&#10;}&#10;&#10;# So sánh secretLast10Chars&#10;if ($gatewayInfo.secretLast10Chars -eq $authInfo.secretLast10Chars) {&#10;    Write-Host &quot;[OK] Last 10 Chars: MATCH ($($gatewayInfo.secretLast10Chars))&quot; -ForegroundColor Green&#10;} else {&#10;    Write-Host &quot;[ERROR] Last 10 Chars: MISMATCH&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Gateway: $($gatewayInfo.secretLast10Chars)&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Auth-User: $($authInfo.secretLast10Chars)&quot; -ForegroundColor Red&#10;    $allMatch = $false&#10;}&#10;&#10;# So sánh secretHashCode&#10;if ($gatewayInfo.secretHashCode -eq $authInfo.secretHashCode) {&#10;    Write-Host &quot;[OK] Hash Code: MATCH ($($gatewayInfo.secretHashCode))&quot; -ForegroundColor Green&#10;} else {&#10;    Write-Host &quot;[ERROR] Hash Code: MISMATCH&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Gateway: $($gatewayInfo.secretHashCode)&quot; -ForegroundColor Red&#10;    Write-Host &quot;  Auth-User: $($authInfo.secretHashCode)&quot; -ForegroundColor Red&#10;    $allMatch = $false&#10;}&#10;&#10;Write-Host &quot;`n========================================&quot; -ForegroundColor Cyan&#10;&#10;if ($allMatch) {&#10;    Write-Host &quot;*** JWT SECRETS MATCH! ***&quot; -ForegroundColor Green&#10;    Write-Host &quot;`nYour JWT configuration is correct!&quot; -ForegroundColor Green&#10;    Write-Host &quot;If you're still getting 401 errors:&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  1. Make sure you're using a NEW token (login again)&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  2. Check token format: 'Authorization: Bearer &lt;token&gt;'&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  3. Check token hasn't expired&quot; -ForegroundColor Yellow&#10;} else {&#10;    Write-Host &quot;*** JWT SECRETS DO NOT MATCH! ***&quot; -ForegroundColor Red&#10;    Write-Host &quot;`nAction required:&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  1. Update api-gateway/src/main/resources/application-dev.yml&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  2. Make sure jwt.secret matches auth-user's secret&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  3. Restart api-gateway service&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;  4. Run this script again to verify&quot; -ForegroundColor Yellow&#10;}&#10;&#10;Write-Host &quot;========================================`n&quot; -ForegroundColor Cyan&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/geo-routing/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/geo-routing/Dockerfile" />
              <option name="originalContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]&#10;" />
              <option name="updatedContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./geo-routing/target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/geo-routing/docker-compose.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/geo-routing/docker-compose.yml" />
              <option name="originalContent" value="geo-routing:&#10;  build:&#10;    context: ./geo-routing&#10;  command: [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]&#10;  ports:&#10;    - &quot;9009:8080&quot;&#10;  env_file:&#10;    - .env&#10;  depends_on:&#10;    - eureka-server&#10;  networks: [evnet]&#10;" />
              <option name="updatedContent" value="version: &quot;3.8&quot;&#10;services:&#10;  geo-routing:&#10;    build:&#10;      context: ./geo-routing&#10;    command: [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]&#10;    ports:&#10;      - &quot;9009:8080&quot;&#10;    env_file:&#10;      - .env&#10;    depends_on:&#10;      - eureka-server&#10;    networks:&#10;      - evnet&#10;&#10;  eureka-server:&#10;    image: eurekaserver:latest&#10;    ports:&#10;      - &quot;8761:8761&quot;&#10;    networks:&#10;      - evnet&#10;&#10;networks:&#10;  evnet:&#10;    driver: bridge" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/geo-routing/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/geo-routing/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.6&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.flywaydb/flyway-core --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;flyway-database-postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;11.10.0&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.postgresql&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/load-env.ps1">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/load-env.ps1" />
              <option name="updatedContent" value="# Script để load .env và set environment variables&#10;Write-Host &quot;Loading .env file...&quot; -ForegroundColor Cyan&#10;&#10;$envFile = &quot;D:\Code\SpringBoot3\EV_Battery_SwapStation_MS\BE_EVBSSMS\.env&quot;&#10;&#10;if (Test-Path $envFile) {&#10;    Get-Content $envFile | ForEach-Object {&#10;        if ($_ -match '^([^#=]+)=(.*)$') {&#10;            $key = $matches[1].Trim()&#10;            $value = $matches[2].Trim()&#10;            &#10;            # Set environment variable&#10;            [Environment]::SetEnvironmentVariable($key, $value, &quot;Process&quot;)&#10;            &#10;            # Also set in current session&#10;            Set-Item -Path &quot;env:$key&quot; -Value $value&#10;            &#10;            # Hiển thị (ẩn sensitive data)&#10;            if ($key -like &quot;*PASSWORD*&quot; -or $key -like &quot;*SECRET*&quot;) {&#10;                Write-Host &quot;  $key = ********&quot; -ForegroundColor Yellow&#10;            } else {&#10;                Write-Host &quot;  $key = $value&quot; -ForegroundColor Green&#10;            }&#10;        }&#10;    }&#10;    &#10;    Write-Host &quot;`n.env file loaded successfully!&quot; -ForegroundColor Green&#10;    Write-Host &quot;`nIMPORTANT: Restart your services in THIS PowerShell window&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;to use these environment variables.&quot; -ForegroundColor Yellow&#10;    &#10;    # Hiển thị JWT_SECRET info&#10;    Write-Host &quot;`nJWT_SECRET info:&quot; -ForegroundColor Cyan&#10;    $jwtSecret = $env:JWT_SECRET&#10;    Write-Host &quot;  Length: $($jwtSecret.Length)&quot; -ForegroundColor White&#10;    Write-Host &quot;  First 10 chars: $($jwtSecret.Substring(0, 10))&quot; -ForegroundColor White&#10;    Write-Host &quot;  Last 10 chars: $($jwtSecret.Substring($jwtSecret.Length - 10))&quot; -ForegroundColor White&#10;    &#10;} else {&#10;    Write-Host &quot;ERROR: .env file not found at $envFile&quot; -ForegroundColor Red&#10;    exit 1&#10;}&#10;&#10;Write-Host &quot;`n========================================&quot; -ForegroundColor Cyan&#10;Write-Host &quot;Next steps:&quot; -ForegroundColor Yellow&#10;Write-Host &quot;1. In THIS PowerShell window, navigate to api-gateway:&quot; -ForegroundColor White&#10;Write-Host &quot;   cd api-gateway&quot; -ForegroundColor White&#10;Write-Host &quot;2. Stop api-gateway if running&quot; -ForegroundColor White&#10;Write-Host &quot;3. Start api-gateway:&quot; -ForegroundColor White&#10;Write-Host &quot;   mvn spring-boot:run -Dspring-boot.run.profiles=dev&quot; -ForegroundColor White&#10;Write-Host &quot;4. Verify JWT secret matches:&quot; -ForegroundColor White&#10;Write-Host &quot;   curl http://localhost:9000/debug/jwt-info&quot; -ForegroundColor White&#10;Write-Host &quot;========================================`n&quot; -ForegroundColor Cyan&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/notification/Dockerfile">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/notification/Dockerfile" />
              <option name="originalContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]&#10;" />
              <option name="updatedContent" value="FROM eclipse-temurin:21-jre&#10;WORKDIR /app&#10;COPY ./notification/target/code-0.0.1-SNAPSHOT.jar app.jar&#10;EXPOSE 8080&#10;ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/app.jar&quot;]" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/notification/pom.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/notification/pom.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.5.6&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;runtime&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#10;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&#10;&#9;xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;&#10;&#9;&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;&#10;&#9;&lt;parent&gt;&#10;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;&#10;&#9;&#9;&lt;version&gt;3.4.1&lt;/version&gt;&#10;&#9;&#9;&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;&#10;&#9;&lt;/parent&gt;&#10;&#9;&lt;groupId&gt;com.boilerplate&lt;/groupId&gt;&#10;&#9;&lt;artifactId&gt;code&lt;/artifactId&gt;&#10;&#9;&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;&#10;&#9;&lt;name&gt;code&lt;/name&gt;&#10;&#9;&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;&#10;&#9;&lt;url/&gt;&#10;&#9;&lt;licenses&gt;&#10;&#9;&#9;&lt;license/&gt;&#10;&#9;&lt;/licenses&gt;&#10;&#9;&lt;developers&gt;&#10;&#9;&#9;&lt;developer/&gt;&#10;&#9;&lt;/developers&gt;&#10;&#9;&lt;scm&gt;&#10;&#9;&#9;&lt;connection/&gt;&#10;&#9;&#9;&lt;developerConnection/&gt;&#10;&#9;&#9;&lt;tag/&gt;&#10;&#9;&#9;&lt;url/&gt;&#10;&#9;&lt;/scm&gt;&#10;&#9;&lt;properties&gt;&#10;&#9;&#9;&lt;java.version&gt;21&lt;/java.version&gt;&#10;&#9;&lt;/properties&gt;&#10;&#9;&lt;dependencies&gt;&#10;&#9;&#9;&#9;&lt;!-- Validation --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Actuator --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springdoc&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;version&gt;2.8.13&lt;/version&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#10;&#10;&#9;&#9;&lt;!-- Resource Server cho JWT --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Test --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&#9;&lt;!-- Testcontainers (tùy chọn) --&gt;&#10;&#9;&#9;&#9;&lt;!--&#10;            &lt;dependency&gt;&#10;              &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;&#10;              &lt;artifactId&gt;postgresql&lt;/artifactId&gt;&#10;              &lt;scope&gt;test&lt;/scope&gt;&#10;            &lt;/dependency&gt;&#10;            --&gt;&#10;&#10;&#9;&#9;&#9;&lt;!-- Configuration metadata (IDE hints) --&gt;&#10;&#9;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;optional&gt;true&lt;/optional&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&#9;&lt;dependency&gt;&#10;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;&#10;&#9;&#9;&#9;&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&lt;scope&gt;test&lt;/scope&gt;&#10;&#9;&#9;&lt;/dependency&gt;&#10;&#9;&lt;/dependencies&gt;&#10;&#10;&#9;&lt;build&gt;&#10;&#9;&#9;&lt;plugins&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/path&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/annotationProcessorPaths&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&#9;&lt;plugin&gt;&#10;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&lt;configuration&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;excludes&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&#9;&lt;artifactId&gt;lombok&lt;/artifactId&gt;&#10;&#9;&#9;&#9;&#9;&#9;&#9;&lt;/exclude&gt;&#10;&#9;&#9;&#9;&#9;&#9;&lt;/excludes&gt;&#10;&#9;&#9;&#9;&#9;&lt;/configuration&gt;&#10;&#9;&#9;&#9;&lt;/plugin&gt;&#10;&#9;&#9;&lt;/plugins&gt;&#10;&#9;&lt;/build&gt;&#10;&#10;&lt;/project&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/notification/src/main/resources/application.properties">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/notification/src/main/resources/application.properties" />
              <option name="originalContent" value="spring.application.name=code&#10;" />
              <option name="updatedContent" value="spring.application.name=notification-service&#10;&#10;# Server port&#10;server.port=8085&#10;&#10;# Database Configuration&#10;spring.datasource.url=jdbc:mysql://localhost:3306/ev_battery_swapstation_ms_notification_db?createDatabaseIfNotExist=true&amp;useSSL=false&amp;serverTimezone=UTC&#10;spring.datasource.username=root&#10;spring.datasource.password=&#10;spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver&#10;&#10;# JPA/Hibernate&#10;spring.jpa.hibernate.ddl-auto=update&#10;spring.jpa.show-sql=true&#10;spring.jpa.properties.hibernate.format_sql=true&#10;spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect&#10;&#10;# Eureka Client Configuration&#10;eureka.client.service-url.defaultZone=http://localhost:8761/eureka/&#10;eureka.client.register-with-eureka=true&#10;eureka.client.fetch-registry=true&#10;eureka.instance.prefer-ip-address=true&#10;&#10;# Actuator&#10;management.endpoints.web.exposure.include=*&#10;management.endpoint.health.show-details=always&#10;&#10;# Logging&#10;logging.level.com.notification=DEBUG&#10;logging.level.org.springframework.web=INFO&#10;logging.level.org.hibernate=ERROR" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/start-gateway-with-env.bat">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/start-gateway-with-env.bat" />
              <option name="updatedContent" value="@echo off&#10;echo ================================================&#10;echo   QUICK FIX: Load .env and Start API Gateway&#10;echo ================================================&#10;echo.&#10;&#10;echo [Step 1] Loading .env file...&#10;powershell -ExecutionPolicy Bypass -File load-env.ps1&#10;&#10;echo.&#10;echo [Step 2] Starting API Gateway with environment variables...&#10;echo Press Ctrl+C to stop the gateway&#10;echo.&#10;&#10;cd api-gateway&#10;mvn spring-boot:run -Dspring-boot.run.profiles=dev&#10;&#10;pause&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>